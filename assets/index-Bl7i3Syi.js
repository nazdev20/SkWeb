function SA(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var CA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var CT={exports:{}},Sf={},xT={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vc=Symbol.for("react.element"),PA=Symbol.for("react.portal"),AA=Symbol.for("react.fragment"),RA=Symbol.for("react.strict_mode"),kA=Symbol.for("react.profiler"),bA=Symbol.for("react.provider"),NA=Symbol.for("react.context"),LA=Symbol.for("react.forward_ref"),OA=Symbol.for("react.suspense"),DA=Symbol.for("react.memo"),MA=Symbol.for("react.lazy"),iw=Symbol.iterator;function FA(t){return t===null||typeof t!="object"?null:(t=iw&&t[iw]||t["@@iterator"],typeof t=="function"?t:null)}var PT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AT=Object.assign,RT={};function Za(t,e,n){this.props=t,this.context=e,this.refs=RT,this.updater=n||PT}Za.prototype.isReactComponent={};Za.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Za.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function kT(){}kT.prototype=Za.prototype;function sg(t,e,n){this.props=t,this.context=e,this.refs=RT,this.updater=n||PT}var og=sg.prototype=new kT;og.constructor=sg;AT(og,Za.prototype);og.isPureReactComponent=!0;var rw=Array.isArray,bT=Object.prototype.hasOwnProperty,ag={current:null},NT={key:!0,ref:!0,__self:!0,__source:!0};function LT(t,e,n){var i,r={},s=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)bT.call(e,i)&&!NT.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var h=Array(u),f=0;f<u;f++)h[f]=arguments[f+2];r.children=h}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:vc,type:t,key:s,ref:a,props:r,_owner:ag.current}}function VA(t,e){return{$$typeof:vc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function lg(t){return typeof t=="object"&&t!==null&&t.$$typeof===vc}function UA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sw=/\/+/g;function bp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?UA(""+t.key):e.toString(36)}function Kh(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case vc:case PA:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+bp(a,0):i,rw(r)?(n="",t!=null&&(n=t.replace(sw,"$&/")+"/"),Kh(r,e,n,"",function(f){return f})):r!=null&&(lg(r)&&(r=VA(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(sw,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",rw(t))for(var u=0;u<t.length;u++){s=t[u];var h=i+bp(s,u);a+=Kh(s,e,n,h,r)}else if(h=FA(t),typeof h=="function")for(t=h.call(t),u=0;!(s=t.next()).done;)s=s.value,h=i+bp(s,u++),a+=Kh(s,e,n,h,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Th(t,e,n){if(t==null)return t;var i=[],r=0;return Kh(t,i,"","",function(s){return e.call(n,s,r++)}),i}function jA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ln={current:null},Zh={transition:null},zA={ReactCurrentDispatcher:ln,ReactCurrentBatchConfig:Zh,ReactCurrentOwner:ag};function OT(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:Th,forEach:function(t,e,n){Th(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Th(t,function(){e++}),e},toArray:function(t){return Th(t,function(e){return e})||[]},only:function(t){if(!lg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pe.Component=Za;Pe.Fragment=AA;Pe.Profiler=kA;Pe.PureComponent=sg;Pe.StrictMode=RA;Pe.Suspense=OA;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zA;Pe.act=OT;Pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=AT({},t.props),r=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=ag.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(h in e)bT.call(e,h)&&!NT.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){u=Array(h);for(var f=0;f<h;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:vc,type:t.type,key:r,ref:s,props:i,_owner:a}};Pe.createContext=function(t){return t={$$typeof:NA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bA,_context:t},t.Consumer=t};Pe.createElement=LT;Pe.createFactory=function(t){var e=LT.bind(null,t);return e.type=t,e};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(t){return{$$typeof:LA,render:t}};Pe.isValidElement=lg;Pe.lazy=function(t){return{$$typeof:MA,_payload:{_status:-1,_result:t},_init:jA}};Pe.memo=function(t,e){return{$$typeof:DA,type:t,compare:e===void 0?null:e}};Pe.startTransition=function(t){var e=Zh.transition;Zh.transition={};try{t()}finally{Zh.transition=e}};Pe.unstable_act=OT;Pe.useCallback=function(t,e){return ln.current.useCallback(t,e)};Pe.useContext=function(t){return ln.current.useContext(t)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(t){return ln.current.useDeferredValue(t)};Pe.useEffect=function(t,e){return ln.current.useEffect(t,e)};Pe.useId=function(){return ln.current.useId()};Pe.useImperativeHandle=function(t,e,n){return ln.current.useImperativeHandle(t,e,n)};Pe.useInsertionEffect=function(t,e){return ln.current.useInsertionEffect(t,e)};Pe.useLayoutEffect=function(t,e){return ln.current.useLayoutEffect(t,e)};Pe.useMemo=function(t,e){return ln.current.useMemo(t,e)};Pe.useReducer=function(t,e,n){return ln.current.useReducer(t,e,n)};Pe.useRef=function(t){return ln.current.useRef(t)};Pe.useState=function(t){return ln.current.useState(t)};Pe.useSyncExternalStore=function(t,e,n){return ln.current.useSyncExternalStore(t,e,n)};Pe.useTransition=function(){return ln.current.useTransition()};Pe.version="18.3.1";xT.exports=Pe;var $=xT.exports;const _d=xA($),BA=SA({__proto__:null,default:_d},[$]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WA=$,HA=Symbol.for("react.element"),$A=Symbol.for("react.fragment"),qA=Object.prototype.hasOwnProperty,GA=WA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,KA={key:!0,ref:!0,__self:!0,__source:!0};function DT(t,e,n){var i,r={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)qA.call(e,i)&&!KA.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:HA,type:t,key:s,ref:a,props:r,_owner:GA.current}}Sf.Fragment=$A;Sf.jsx=DT;Sf.jsxs=DT;CT.exports=Sf;var E=CT.exports,MT={exports:{}},Dn={},FT={exports:{}},VT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,ce){var J=q.length;q.push(ce);e:for(;0<J;){var fe=J-1>>>1,we=q[fe];if(0<r(we,ce))q[fe]=ce,q[J]=we,J=fe;else break e}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var ce=q[0],J=q.pop();if(J!==ce){q[0]=J;e:for(var fe=0,we=q.length,Ae=we>>>1;fe<Ae;){var Fe=2*(fe+1)-1,Ee=q[Fe],_e=Fe+1,It=q[_e];if(0>r(Ee,J))_e<we&&0>r(It,Ee)?(q[fe]=It,q[_e]=J,fe=_e):(q[fe]=Ee,q[Fe]=J,fe=Fe);else if(_e<we&&0>r(It,J))q[fe]=It,q[_e]=J,fe=_e;else break e}}return ce}function r(q,ce){var J=q.sortIndex-ce.sortIndex;return J!==0?J:q.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var h=[],f=[],_=1,g=null,w=3,C=!1,b=!1,k=!1,D=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(q){for(var ce=n(f);ce!==null;){if(ce.callback===null)i(f);else if(ce.startTime<=q)i(f),ce.sortIndex=ce.expirationTime,e(h,ce);else break;ce=n(f)}}function j(q){if(k=!1,N(q),!b)if(n(h)!==null)b=!0,Tt(G);else{var ce=n(f);ce!==null&&tn(j,ce.startTime-q)}}function G(q,ce){b=!1,k&&(k=!1,A(I),I=-1),C=!0;var J=w;try{for(N(ce),g=n(h);g!==null&&(!(g.expirationTime>ce)||q&&!V());){var fe=g.callback;if(typeof fe=="function"){g.callback=null,w=g.priorityLevel;var we=fe(g.expirationTime<=ce);ce=t.unstable_now(),typeof we=="function"?g.callback=we:g===n(h)&&i(h),N(ce)}else i(h);g=n(h)}if(g!==null)var Ae=!0;else{var Fe=n(f);Fe!==null&&tn(j,Fe.startTime-ce),Ae=!1}return Ae}finally{g=null,w=J,C=!1}}var Z=!1,x=null,I=-1,R=5,O=-1;function V(){return!(t.unstable_now()-O<R)}function U(){if(x!==null){var q=t.unstable_now();O=q;var ce=!0;try{ce=x(!0,q)}finally{ce?F():(Z=!1,x=null)}}else Z=!1}var F;if(typeof P=="function")F=function(){P(U)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,Oi=ot.port2;ot.port1.onmessage=U,F=function(){Oi.postMessage(null)}}else F=function(){D(U,0)};function Tt(q){x=q,Z||(Z=!0,F())}function tn(q,ce){I=D(function(){q(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){b||C||(b=!0,Tt(G))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(q){switch(w){case 1:case 2:case 3:var ce=3;break;default:ce=w}var J=w;w=ce;try{return q()}finally{w=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,ce){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var J=w;w=q;try{return ce()}finally{w=J}},t.unstable_scheduleCallback=function(q,ce,J){var fe=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?fe+J:fe):J=fe,q){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=J+we,q={id:_++,callback:ce,priorityLevel:q,startTime:J,expirationTime:we,sortIndex:-1},J>fe?(q.sortIndex=J,e(f,q),n(h)===null&&q===n(f)&&(k?(A(I),I=-1):k=!0,tn(j,J-fe))):(q.sortIndex=we,e(h,q),b||C||(b=!0,Tt(G))),q},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(q){var ce=w;return function(){var J=w;w=ce;try{return q.apply(this,arguments)}finally{w=J}}}})(VT);FT.exports=VT;var ZA=FT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QA=$,Ln=ZA;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var UT=new Set,Mu={};function po(t,e){ka(t,e),ka(t+"Capture",e)}function ka(t,e){for(Mu[t]=e,t=0;t<e.length;t++)UT.add(e[t])}var ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Im=Object.prototype.hasOwnProperty,YA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ow={},aw={};function XA(t){return Im.call(aw,t)?!0:Im.call(ow,t)?!1:YA.test(t)?aw[t]=!0:(ow[t]=!0,!1)}function JA(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function eR(t,e,n,i){if(e===null||typeof e>"u"||JA(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function un(t,e,n,i,r,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ht[t]=new un(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ht[e]=new un(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ht[t]=new un(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ht[t]=new un(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ht[t]=new un(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ht[t]=new un(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ht[t]=new un(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ht[t]=new un(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ht[t]=new un(t,5,!1,t.toLowerCase(),null,!1,!1)});var ug=/[\-:]([a-z])/g;function cg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ug,cg);Ht[e]=new un(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ug,cg);Ht[e]=new un(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ug,cg);Ht[e]=new un(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ht[t]=new un(t,1,!1,t.toLowerCase(),null,!1,!1)});Ht.xlinkHref=new un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ht[t]=new un(t,1,!1,t.toLowerCase(),null,!0,!0)});function hg(t,e,n,i){var r=Ht.hasOwnProperty(e)?Ht[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(eR(e,n,r,i)&&(n=null),i||r===null?XA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var wr=QA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ih=Symbol.for("react.element"),na=Symbol.for("react.portal"),ia=Symbol.for("react.fragment"),dg=Symbol.for("react.strict_mode"),Sm=Symbol.for("react.profiler"),jT=Symbol.for("react.provider"),zT=Symbol.for("react.context"),fg=Symbol.for("react.forward_ref"),Cm=Symbol.for("react.suspense"),xm=Symbol.for("react.suspense_list"),pg=Symbol.for("react.memo"),Dr=Symbol.for("react.lazy"),BT=Symbol.for("react.offscreen"),lw=Symbol.iterator;function $l(t){return t===null||typeof t!="object"?null:(t=lw&&t[lw]||t["@@iterator"],typeof t=="function"?t:null)}var st=Object.assign,Np;function ou(t){if(Np===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Np=e&&e[1]||""}return`
`+Np+t}var Lp=!1;function Op(t,e){if(!t||Lp)return"";Lp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),s=i.stack.split(`
`),a=r.length-1,u=s.length-1;1<=a&&0<=u&&r[a]!==s[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==s[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==s[u]){var h=`
`+r[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=u);break}}}finally{Lp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ou(t):""}function tR(t){switch(t.tag){case 5:return ou(t.type);case 16:return ou("Lazy");case 13:return ou("Suspense");case 19:return ou("SuspenseList");case 0:case 2:case 15:return t=Op(t.type,!1),t;case 11:return t=Op(t.type.render,!1),t;case 1:return t=Op(t.type,!0),t;default:return""}}function Pm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ia:return"Fragment";case na:return"Portal";case Sm:return"Profiler";case dg:return"StrictMode";case Cm:return"Suspense";case xm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zT:return(t.displayName||"Context")+".Consumer";case jT:return(t._context.displayName||"Context")+".Provider";case fg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case pg:return e=t.displayName||null,e!==null?e:Pm(t.type)||"Memo";case Dr:e=t._payload,t=t._init;try{return Pm(t(e))}catch{}}return null}function nR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pm(e);case 8:return e===dg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function os(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function WT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iR(t){var e=WT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Sh(t){t._valueTracker||(t._valueTracker=iR(t))}function HT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=WT(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function gd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Am(t,e){var n=e.checked;return st({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function uw(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=os(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $T(t,e){e=e.checked,e!=null&&hg(t,"checked",e,!1)}function Rm(t,e){$T(t,e);var n=os(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?km(t,e.type,n):e.hasOwnProperty("defaultValue")&&km(t,e.type,os(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function km(t,e,n){(e!=="number"||gd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var au=Array.isArray;function _a(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+os(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function bm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return st({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(au(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:os(n)}}function qT(t,e){var n=os(e.value),i=os(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function dw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function GT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?GT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ch,KT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ch=Ch||document.createElement("div"),Ch.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ch.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var _u={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rR=["Webkit","ms","Moz","O"];Object.keys(_u).forEach(function(t){rR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_u[e]=_u[t]})});function ZT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||_u.hasOwnProperty(t)&&_u[t]?(""+e).trim():e+"px"}function QT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=ZT(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var sR=st({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lm(t,e){if(e){if(sR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function Om(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dm=null;function mg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mm=null,ga=null,va=null;function fw(t){if(t=Ec(t)){if(typeof Mm!="function")throw Error(X(280));var e=t.stateNode;e&&(e=Rf(e),Mm(t.stateNode,t.type,e))}}function YT(t){ga?va?va.push(t):va=[t]:ga=t}function XT(){if(ga){var t=ga,e=va;if(va=ga=null,fw(t),e)for(t=0;t<e.length;t++)fw(e[t])}}function JT(t,e){return t(e)}function eI(){}var Dp=!1;function tI(t,e,n){if(Dp)return t(e,n);Dp=!0;try{return JT(t,e,n)}finally{Dp=!1,(ga!==null||va!==null)&&(eI(),XT())}}function Vu(t,e){var n=t.stateNode;if(n===null)return null;var i=Rf(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var Fm=!1;if(ar)try{var ql={};Object.defineProperty(ql,"passive",{get:function(){Fm=!0}}),window.addEventListener("test",ql,ql),window.removeEventListener("test",ql,ql)}catch{Fm=!1}function oR(t,e,n,i,r,s,a,u,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(_){this.onError(_)}}var gu=!1,vd=null,yd=!1,Vm=null,aR={onError:function(t){gu=!0,vd=t}};function lR(t,e,n,i,r,s,a,u,h){gu=!1,vd=null,oR.apply(aR,arguments)}function uR(t,e,n,i,r,s,a,u,h){if(lR.apply(this,arguments),gu){if(gu){var f=vd;gu=!1,vd=null}else throw Error(X(198));yd||(yd=!0,Vm=f)}}function mo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function nI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function pw(t){if(mo(t)!==t)throw Error(X(188))}function cR(t){var e=t.alternate;if(!e){if(e=mo(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return pw(r),t;if(s===i)return pw(r),e;s=s.sibling}throw Error(X(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=s;break}if(u===i){a=!0,i=r,n=s;break}u=u.sibling}if(!a){for(u=s.child;u;){if(u===n){a=!0,n=s,i=r;break}if(u===i){a=!0,i=s,n=r;break}u=u.sibling}if(!a)throw Error(X(189))}}if(n.alternate!==i)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function iI(t){return t=cR(t),t!==null?rI(t):null}function rI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rI(t);if(e!==null)return e;t=t.sibling}return null}var sI=Ln.unstable_scheduleCallback,mw=Ln.unstable_cancelCallback,hR=Ln.unstable_shouldYield,dR=Ln.unstable_requestPaint,ft=Ln.unstable_now,fR=Ln.unstable_getCurrentPriorityLevel,_g=Ln.unstable_ImmediatePriority,oI=Ln.unstable_UserBlockingPriority,wd=Ln.unstable_NormalPriority,pR=Ln.unstable_LowPriority,aI=Ln.unstable_IdlePriority,Cf=null,Ci=null;function mR(t){if(Ci&&typeof Ci.onCommitFiberRoot=="function")try{Ci.onCommitFiberRoot(Cf,t,void 0,(t.current.flags&128)===128)}catch{}}var ui=Math.clz32?Math.clz32:vR,_R=Math.log,gR=Math.LN2;function vR(t){return t>>>=0,t===0?32:31-(_R(t)/gR|0)|0}var xh=64,Ph=4194304;function lu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ed(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=lu(u):(s&=a,s!==0&&(i=lu(s)))}else a=n&~r,a!==0?i=lu(a):s!==0&&(i=lu(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ui(e),r=1<<n,i|=t[n],e&=~r;return i}function yR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wR(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-ui(s),u=1<<a,h=r[a];h===-1?(!(u&n)||u&i)&&(r[a]=yR(u,e)):h<=e&&(t.expiredLanes|=u),s&=~u}}function Um(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function lI(){var t=xh;return xh<<=1,!(xh&4194240)&&(xh=64),t}function Mp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function yc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ui(e),t[e]=n}function ER(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ui(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function gg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ui(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ue=0;function uI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var cI,vg,hI,dI,fI,jm=!1,Ah=[],Gr=null,Kr=null,Zr=null,Uu=new Map,ju=new Map,Fr=[],TR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _w(t,e){switch(t){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":Uu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ju.delete(e.pointerId)}}function Gl(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Ec(e),e!==null&&vg(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function IR(t,e,n,i,r){switch(e){case"focusin":return Gr=Gl(Gr,t,e,n,i,r),!0;case"dragenter":return Kr=Gl(Kr,t,e,n,i,r),!0;case"mouseover":return Zr=Gl(Zr,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Uu.set(s,Gl(Uu.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ju.set(s,Gl(ju.get(s)||null,t,e,n,i,r)),!0}return!1}function pI(t){var e=zs(t.target);if(e!==null){var n=mo(e);if(n!==null){if(e=n.tag,e===13){if(e=nI(n),e!==null){t.blockedOn=e,fI(t.priority,function(){hI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=zm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Dm=i,n.target.dispatchEvent(i),Dm=null}else return e=Ec(n),e!==null&&vg(e),t.blockedOn=n,!1;e.shift()}return!0}function gw(t,e,n){Qh(t)&&n.delete(e)}function SR(){jm=!1,Gr!==null&&Qh(Gr)&&(Gr=null),Kr!==null&&Qh(Kr)&&(Kr=null),Zr!==null&&Qh(Zr)&&(Zr=null),Uu.forEach(gw),ju.forEach(gw)}function Kl(t,e){t.blockedOn===e&&(t.blockedOn=null,jm||(jm=!0,Ln.unstable_scheduleCallback(Ln.unstable_NormalPriority,SR)))}function zu(t){function e(r){return Kl(r,t)}if(0<Ah.length){Kl(Ah[0],t);for(var n=1;n<Ah.length;n++){var i=Ah[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Gr!==null&&Kl(Gr,t),Kr!==null&&Kl(Kr,t),Zr!==null&&Kl(Zr,t),Uu.forEach(e),ju.forEach(e),n=0;n<Fr.length;n++)i=Fr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Fr.length&&(n=Fr[0],n.blockedOn===null);)pI(n),n.blockedOn===null&&Fr.shift()}var ya=wr.ReactCurrentBatchConfig,Td=!0;function CR(t,e,n,i){var r=Ue,s=ya.transition;ya.transition=null;try{Ue=1,yg(t,e,n,i)}finally{Ue=r,ya.transition=s}}function xR(t,e,n,i){var r=Ue,s=ya.transition;ya.transition=null;try{Ue=4,yg(t,e,n,i)}finally{Ue=r,ya.transition=s}}function yg(t,e,n,i){if(Td){var r=zm(t,e,n,i);if(r===null)qp(t,e,i,Id,n),_w(t,i);else if(IR(r,t,e,n,i))i.stopPropagation();else if(_w(t,i),e&4&&-1<TR.indexOf(t)){for(;r!==null;){var s=Ec(r);if(s!==null&&cI(s),s=zm(t,e,n,i),s===null&&qp(t,e,i,Id,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else qp(t,e,i,null,n)}}var Id=null;function zm(t,e,n,i){if(Id=null,t=mg(i),t=zs(t),t!==null)if(e=mo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=nI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Id=t,null}function mI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fR()){case _g:return 1;case oI:return 4;case wd:case pR:return 16;case aI:return 536870912;default:return 16}default:return 16}}var Wr=null,wg=null,Yh=null;function _I(){if(Yh)return Yh;var t,e=wg,n=e.length,i,r="value"in Wr?Wr.value:Wr.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[s-i];i++);return Yh=r.slice(t,1<i?1-i:void 0)}function Xh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rh(){return!0}function vw(){return!1}function Mn(t){function e(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Rh:vw,this.isPropagationStopped=vw,this}return st(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rh)},persist:function(){},isPersistent:Rh}),e}var Qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Eg=Mn(Qa),wc=st({},Qa,{view:0,detail:0}),PR=Mn(wc),Fp,Vp,Zl,xf=st({},wc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zl&&(Zl&&t.type==="mousemove"?(Fp=t.screenX-Zl.screenX,Vp=t.screenY-Zl.screenY):Vp=Fp=0,Zl=t),Fp)},movementY:function(t){return"movementY"in t?t.movementY:Vp}}),yw=Mn(xf),AR=st({},xf,{dataTransfer:0}),RR=Mn(AR),kR=st({},wc,{relatedTarget:0}),Up=Mn(kR),bR=st({},Qa,{animationName:0,elapsedTime:0,pseudoElement:0}),NR=Mn(bR),LR=st({},Qa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),OR=Mn(LR),DR=st({},Qa,{data:0}),ww=Mn(DR),MR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=VR[t])?!!e[t]:!1}function Tg(){return UR}var jR=st({},wc,{key:function(t){if(t.key){var e=MR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tg,charCode:function(t){return t.type==="keypress"?Xh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zR=Mn(jR),BR=st({},xf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ew=Mn(BR),WR=st({},wc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tg}),HR=Mn(WR),$R=st({},Qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),qR=Mn($R),GR=st({},xf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),KR=Mn(GR),ZR=[9,13,27,32],Ig=ar&&"CompositionEvent"in window,vu=null;ar&&"documentMode"in document&&(vu=document.documentMode);var QR=ar&&"TextEvent"in window&&!vu,gI=ar&&(!Ig||vu&&8<vu&&11>=vu),Tw=" ",Iw=!1;function vI(t,e){switch(t){case"keyup":return ZR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ra=!1;function YR(t,e){switch(t){case"compositionend":return yI(e);case"keypress":return e.which!==32?null:(Iw=!0,Tw);case"textInput":return t=e.data,t===Tw&&Iw?null:t;default:return null}}function XR(t,e){if(ra)return t==="compositionend"||!Ig&&vI(t,e)?(t=_I(),Yh=wg=Wr=null,ra=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gI&&e.locale!=="ko"?null:e.data;default:return null}}var JR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!JR[t.type]:e==="textarea"}function wI(t,e,n,i){YT(i),e=Sd(e,"onChange"),0<e.length&&(n=new Eg("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var yu=null,Bu=null;function ek(t){bI(t,0)}function Pf(t){var e=aa(t);if(HT(e))return t}function tk(t,e){if(t==="change")return e}var EI=!1;if(ar){var jp;if(ar){var zp="oninput"in document;if(!zp){var Cw=document.createElement("div");Cw.setAttribute("oninput","return;"),zp=typeof Cw.oninput=="function"}jp=zp}else jp=!1;EI=jp&&(!document.documentMode||9<document.documentMode)}function xw(){yu&&(yu.detachEvent("onpropertychange",TI),Bu=yu=null)}function TI(t){if(t.propertyName==="value"&&Pf(Bu)){var e=[];wI(e,Bu,t,mg(t)),tI(ek,e)}}function nk(t,e,n){t==="focusin"?(xw(),yu=e,Bu=n,yu.attachEvent("onpropertychange",TI)):t==="focusout"&&xw()}function ik(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pf(Bu)}function rk(t,e){if(t==="click")return Pf(e)}function sk(t,e){if(t==="input"||t==="change")return Pf(e)}function ok(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fi=typeof Object.is=="function"?Object.is:ok;function Wu(t,e){if(fi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Im.call(e,r)||!fi(t[r],e[r]))return!1}return!0}function Pw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Aw(t,e){var n=Pw(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Pw(n)}}function II(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?II(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function SI(){for(var t=window,e=gd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gd(t.document)}return e}function Sg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ak(t){var e=SI(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&II(n.ownerDocument.documentElement,n)){if(i!==null&&Sg(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=Aw(n,s);var a=Aw(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lk=ar&&"documentMode"in document&&11>=document.documentMode,sa=null,Bm=null,wu=null,Wm=!1;function Rw(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wm||sa==null||sa!==gd(i)||(i=sa,"selectionStart"in i&&Sg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),wu&&Wu(wu,i)||(wu=i,i=Sd(Bm,"onSelect"),0<i.length&&(e=new Eg("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=sa)))}function kh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var oa={animationend:kh("Animation","AnimationEnd"),animationiteration:kh("Animation","AnimationIteration"),animationstart:kh("Animation","AnimationStart"),transitionend:kh("Transition","TransitionEnd")},Bp={},CI={};ar&&(CI=document.createElement("div").style,"AnimationEvent"in window||(delete oa.animationend.animation,delete oa.animationiteration.animation,delete oa.animationstart.animation),"TransitionEvent"in window||delete oa.transitionend.transition);function Af(t){if(Bp[t])return Bp[t];if(!oa[t])return t;var e=oa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in CI)return Bp[t]=e[n];return t}var xI=Af("animationend"),PI=Af("animationiteration"),AI=Af("animationstart"),RI=Af("transitionend"),kI=new Map,kw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ps(t,e){kI.set(t,e),po(e,[t])}for(var Wp=0;Wp<kw.length;Wp++){var Hp=kw[Wp],uk=Hp.toLowerCase(),ck=Hp[0].toUpperCase()+Hp.slice(1);ps(uk,"on"+ck)}ps(xI,"onAnimationEnd");ps(PI,"onAnimationIteration");ps(AI,"onAnimationStart");ps("dblclick","onDoubleClick");ps("focusin","onFocus");ps("focusout","onBlur");ps(RI,"onTransitionEnd");ka("onMouseEnter",["mouseout","mouseover"]);ka("onMouseLeave",["mouseout","mouseover"]);ka("onPointerEnter",["pointerout","pointerover"]);ka("onPointerLeave",["pointerout","pointerover"]);po("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));po("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));po("onBeforeInput",["compositionend","keypress","textInput","paste"]);po("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));po("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));po("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hk=new Set("cancel close invalid load scroll toggle".split(" ").concat(uu));function bw(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,uR(i,e,void 0,t),t.currentTarget=null}function bI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],h=u.instance,f=u.currentTarget;if(u=u.listener,h!==s&&r.isPropagationStopped())break e;bw(r,u,f),s=h}else for(a=0;a<i.length;a++){if(u=i[a],h=u.instance,f=u.currentTarget,u=u.listener,h!==s&&r.isPropagationStopped())break e;bw(r,u,f),s=h}}}if(yd)throw t=Vm,yd=!1,Vm=null,t}function Ke(t,e){var n=e[Km];n===void 0&&(n=e[Km]=new Set);var i=t+"__bubble";n.has(i)||(NI(e,t,2,!1),n.add(i))}function $p(t,e,n){var i=0;e&&(i|=4),NI(n,t,i,e)}var bh="_reactListening"+Math.random().toString(36).slice(2);function Hu(t){if(!t[bh]){t[bh]=!0,UT.forEach(function(n){n!=="selectionchange"&&(hk.has(n)||$p(n,!1,t),$p(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bh]||(e[bh]=!0,$p("selectionchange",!1,e))}}function NI(t,e,n,i){switch(mI(e)){case 1:var r=CR;break;case 4:r=xR;break;default:r=yg}n=r.bind(null,e,n,t),r=void 0,!Fm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function qp(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;a=a.return}for(;u!==null;){if(a=zs(u),a===null)return;if(h=a.tag,h===5||h===6){i=s=a;continue e}u=u.parentNode}}i=i.return}tI(function(){var f=s,_=mg(n),g=[];e:{var w=kI.get(t);if(w!==void 0){var C=Eg,b=t;switch(t){case"keypress":if(Xh(n)===0)break e;case"keydown":case"keyup":C=zR;break;case"focusin":b="focus",C=Up;break;case"focusout":b="blur",C=Up;break;case"beforeblur":case"afterblur":C=Up;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=yw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=RR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=HR;break;case xI:case PI:case AI:C=NR;break;case RI:C=qR;break;case"scroll":C=PR;break;case"wheel":C=KR;break;case"copy":case"cut":case"paste":C=OR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=Ew}var k=(e&4)!==0,D=!k&&t==="scroll",A=k?w!==null?w+"Capture":null:w;k=[];for(var P=f,N;P!==null;){N=P;var j=N.stateNode;if(N.tag===5&&j!==null&&(N=j,A!==null&&(j=Vu(P,A),j!=null&&k.push($u(P,j,N)))),D)break;P=P.return}0<k.length&&(w=new C(w,b,null,n,_),g.push({event:w,listeners:k}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",w&&n!==Dm&&(b=n.relatedTarget||n.fromElement)&&(zs(b)||b[lr]))break e;if((C||w)&&(w=_.window===_?_:(w=_.ownerDocument)?w.defaultView||w.parentWindow:window,C?(b=n.relatedTarget||n.toElement,C=f,b=b?zs(b):null,b!==null&&(D=mo(b),b!==D||b.tag!==5&&b.tag!==6)&&(b=null)):(C=null,b=f),C!==b)){if(k=yw,j="onMouseLeave",A="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(k=Ew,j="onPointerLeave",A="onPointerEnter",P="pointer"),D=C==null?w:aa(C),N=b==null?w:aa(b),w=new k(j,P+"leave",C,n,_),w.target=D,w.relatedTarget=N,j=null,zs(_)===f&&(k=new k(A,P+"enter",b,n,_),k.target=N,k.relatedTarget=D,j=k),D=j,C&&b)t:{for(k=C,A=b,P=0,N=k;N;N=Yo(N))P++;for(N=0,j=A;j;j=Yo(j))N++;for(;0<P-N;)k=Yo(k),P--;for(;0<N-P;)A=Yo(A),N--;for(;P--;){if(k===A||A!==null&&k===A.alternate)break t;k=Yo(k),A=Yo(A)}k=null}else k=null;C!==null&&Nw(g,w,C,k,!1),b!==null&&D!==null&&Nw(g,D,b,k,!0)}}e:{if(w=f?aa(f):window,C=w.nodeName&&w.nodeName.toLowerCase(),C==="select"||C==="input"&&w.type==="file")var G=tk;else if(Sw(w))if(EI)G=sk;else{G=ik;var Z=nk}else(C=w.nodeName)&&C.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(G=rk);if(G&&(G=G(t,f))){wI(g,G,n,_);break e}Z&&Z(t,w,f),t==="focusout"&&(Z=w._wrapperState)&&Z.controlled&&w.type==="number"&&km(w,"number",w.value)}switch(Z=f?aa(f):window,t){case"focusin":(Sw(Z)||Z.contentEditable==="true")&&(sa=Z,Bm=f,wu=null);break;case"focusout":wu=Bm=sa=null;break;case"mousedown":Wm=!0;break;case"contextmenu":case"mouseup":case"dragend":Wm=!1,Rw(g,n,_);break;case"selectionchange":if(lk)break;case"keydown":case"keyup":Rw(g,n,_)}var x;if(Ig)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else ra?vI(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(gI&&n.locale!=="ko"&&(ra||I!=="onCompositionStart"?I==="onCompositionEnd"&&ra&&(x=_I()):(Wr=_,wg="value"in Wr?Wr.value:Wr.textContent,ra=!0)),Z=Sd(f,I),0<Z.length&&(I=new ww(I,t,null,n,_),g.push({event:I,listeners:Z}),x?I.data=x:(x=yI(n),x!==null&&(I.data=x)))),(x=QR?YR(t,n):XR(t,n))&&(f=Sd(f,"onBeforeInput"),0<f.length&&(_=new ww("onBeforeInput","beforeinput",null,n,_),g.push({event:_,listeners:f}),_.data=x))}bI(g,e)})}function $u(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sd(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Vu(t,n),s!=null&&i.unshift($u(t,s,r)),s=Vu(t,e),s!=null&&i.push($u(t,s,r))),t=t.return}return i}function Yo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Nw(t,e,n,i,r){for(var s=e._reactName,a=[];n!==null&&n!==i;){var u=n,h=u.alternate,f=u.stateNode;if(h!==null&&h===i)break;u.tag===5&&f!==null&&(u=f,r?(h=Vu(n,s),h!=null&&a.unshift($u(n,h,u))):r||(h=Vu(n,s),h!=null&&a.push($u(n,h,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var dk=/\r\n?/g,fk=/\u0000|\uFFFD/g;function Lw(t){return(typeof t=="string"?t:""+t).replace(dk,`
`).replace(fk,"")}function Nh(t,e,n){if(e=Lw(e),Lw(t)!==e&&n)throw Error(X(425))}function Cd(){}var Hm=null,$m=null;function qm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gm=typeof setTimeout=="function"?setTimeout:void 0,pk=typeof clearTimeout=="function"?clearTimeout:void 0,Ow=typeof Promise=="function"?Promise:void 0,mk=typeof queueMicrotask=="function"?queueMicrotask:typeof Ow<"u"?function(t){return Ow.resolve(null).then(t).catch(_k)}:Gm;function _k(t){setTimeout(function(){throw t})}function Gp(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),zu(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);zu(e)}function Qr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Dw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ya=Math.random().toString(36).slice(2),Ti="__reactFiber$"+Ya,qu="__reactProps$"+Ya,lr="__reactContainer$"+Ya,Km="__reactEvents$"+Ya,gk="__reactListeners$"+Ya,vk="__reactHandles$"+Ya;function zs(t){var e=t[Ti];if(e)return e;for(var n=t.parentNode;n;){if(e=n[lr]||n[Ti]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Dw(t);t!==null;){if(n=t[Ti])return n;t=Dw(t)}return e}t=n,n=t.parentNode}return null}function Ec(t){return t=t[Ti]||t[lr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function aa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function Rf(t){return t[qu]||null}var Zm=[],la=-1;function ms(t){return{current:t}}function Qe(t){0>la||(t.current=Zm[la],Zm[la]=null,la--)}function qe(t,e){la++,Zm[la]=t.current,t.current=e}var as={},en=ms(as),gn=ms(!1),Ys=as;function ba(t,e){var n=t.type.contextTypes;if(!n)return as;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function vn(t){return t=t.childContextTypes,t!=null}function xd(){Qe(gn),Qe(en)}function Mw(t,e,n){if(en.current!==as)throw Error(X(168));qe(en,e),qe(gn,n)}function LI(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(X(108,nR(t)||"Unknown",r));return st({},n,i)}function Pd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||as,Ys=en.current,qe(en,t),qe(gn,gn.current),!0}function Fw(t,e,n){var i=t.stateNode;if(!i)throw Error(X(169));n?(t=LI(t,e,Ys),i.__reactInternalMemoizedMergedChildContext=t,Qe(gn),Qe(en),qe(en,t)):Qe(gn),qe(gn,n)}var Zi=null,kf=!1,Kp=!1;function OI(t){Zi===null?Zi=[t]:Zi.push(t)}function yk(t){kf=!0,OI(t)}function _s(){if(!Kp&&Zi!==null){Kp=!0;var t=0,e=Ue;try{var n=Zi;for(Ue=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Zi=null,kf=!1}catch(r){throw Zi!==null&&(Zi=Zi.slice(t+1)),sI(_g,_s),r}finally{Ue=e,Kp=!1}}return null}var ua=[],ca=0,Ad=null,Rd=0,Hn=[],$n=0,Xs=null,Yi=1,Xi="";function Ms(t,e){ua[ca++]=Rd,ua[ca++]=Ad,Ad=t,Rd=e}function DI(t,e,n){Hn[$n++]=Yi,Hn[$n++]=Xi,Hn[$n++]=Xs,Xs=t;var i=Yi;t=Xi;var r=32-ui(i)-1;i&=~(1<<r),n+=1;var s=32-ui(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Yi=1<<32-ui(e)+r|n<<r|i,Xi=s+t}else Yi=1<<s|n<<r|i,Xi=t}function Cg(t){t.return!==null&&(Ms(t,1),DI(t,1,0))}function xg(t){for(;t===Ad;)Ad=ua[--ca],ua[ca]=null,Rd=ua[--ca],ua[ca]=null;for(;t===Xs;)Xs=Hn[--$n],Hn[$n]=null,Xi=Hn[--$n],Hn[$n]=null,Yi=Hn[--$n],Hn[$n]=null}var bn=null,An=null,Je=!1,si=null;function MI(t,e){var n=qn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Vw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bn=t,An=Qr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bn=t,An=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xs!==null?{id:Yi,overflow:Xi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bn=t,An=null,!0):!1;default:return!1}}function Qm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ym(t){if(Je){var e=An;if(e){var n=e;if(!Vw(t,e)){if(Qm(t))throw Error(X(418));e=Qr(n.nextSibling);var i=bn;e&&Vw(t,e)?MI(i,n):(t.flags=t.flags&-4097|2,Je=!1,bn=t)}}else{if(Qm(t))throw Error(X(418));t.flags=t.flags&-4097|2,Je=!1,bn=t}}}function Uw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bn=t}function Lh(t){if(t!==bn)return!1;if(!Je)return Uw(t),Je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qm(t.type,t.memoizedProps)),e&&(e=An)){if(Qm(t))throw FI(),Error(X(418));for(;e;)MI(t,e),e=Qr(e.nextSibling)}if(Uw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){An=Qr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}An=null}}else An=bn?Qr(t.stateNode.nextSibling):null;return!0}function FI(){for(var t=An;t;)t=Qr(t.nextSibling)}function Na(){An=bn=null,Je=!1}function Pg(t){si===null?si=[t]:si.push(t)}var wk=wr.ReactCurrentBatchConfig;function Ql(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var i=n.stateNode}if(!i)throw Error(X(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var u=r.refs;a===null?delete u[s]:u[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function Oh(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jw(t){var e=t._init;return e(t._payload)}function VI(t){function e(A,P){if(t){var N=A.deletions;N===null?(A.deletions=[P],A.flags|=16):N.push(P)}}function n(A,P){if(!t)return null;for(;P!==null;)e(A,P),P=P.sibling;return null}function i(A,P){for(A=new Map;P!==null;)P.key!==null?A.set(P.key,P):A.set(P.index,P),P=P.sibling;return A}function r(A,P){return A=es(A,P),A.index=0,A.sibling=null,A}function s(A,P,N){return A.index=N,t?(N=A.alternate,N!==null?(N=N.index,N<P?(A.flags|=2,P):N):(A.flags|=2,P)):(A.flags|=1048576,P)}function a(A){return t&&A.alternate===null&&(A.flags|=2),A}function u(A,P,N,j){return P===null||P.tag!==6?(P=tm(N,A.mode,j),P.return=A,P):(P=r(P,N),P.return=A,P)}function h(A,P,N,j){var G=N.type;return G===ia?_(A,P,N.props.children,j,N.key):P!==null&&(P.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Dr&&jw(G)===P.type)?(j=r(P,N.props),j.ref=Ql(A,P,N),j.return=A,j):(j=sd(N.type,N.key,N.props,null,A.mode,j),j.ref=Ql(A,P,N),j.return=A,j)}function f(A,P,N,j){return P===null||P.tag!==4||P.stateNode.containerInfo!==N.containerInfo||P.stateNode.implementation!==N.implementation?(P=nm(N,A.mode,j),P.return=A,P):(P=r(P,N.children||[]),P.return=A,P)}function _(A,P,N,j,G){return P===null||P.tag!==7?(P=Ks(N,A.mode,j,G),P.return=A,P):(P=r(P,N),P.return=A,P)}function g(A,P,N){if(typeof P=="string"&&P!==""||typeof P=="number")return P=tm(""+P,A.mode,N),P.return=A,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Ih:return N=sd(P.type,P.key,P.props,null,A.mode,N),N.ref=Ql(A,null,P),N.return=A,N;case na:return P=nm(P,A.mode,N),P.return=A,P;case Dr:var j=P._init;return g(A,j(P._payload),N)}if(au(P)||$l(P))return P=Ks(P,A.mode,N,null),P.return=A,P;Oh(A,P)}return null}function w(A,P,N,j){var G=P!==null?P.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return G!==null?null:u(A,P,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ih:return N.key===G?h(A,P,N,j):null;case na:return N.key===G?f(A,P,N,j):null;case Dr:return G=N._init,w(A,P,G(N._payload),j)}if(au(N)||$l(N))return G!==null?null:_(A,P,N,j,null);Oh(A,N)}return null}function C(A,P,N,j,G){if(typeof j=="string"&&j!==""||typeof j=="number")return A=A.get(N)||null,u(P,A,""+j,G);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ih:return A=A.get(j.key===null?N:j.key)||null,h(P,A,j,G);case na:return A=A.get(j.key===null?N:j.key)||null,f(P,A,j,G);case Dr:var Z=j._init;return C(A,P,N,Z(j._payload),G)}if(au(j)||$l(j))return A=A.get(N)||null,_(P,A,j,G,null);Oh(P,j)}return null}function b(A,P,N,j){for(var G=null,Z=null,x=P,I=P=0,R=null;x!==null&&I<N.length;I++){x.index>I?(R=x,x=null):R=x.sibling;var O=w(A,x,N[I],j);if(O===null){x===null&&(x=R);break}t&&x&&O.alternate===null&&e(A,x),P=s(O,P,I),Z===null?G=O:Z.sibling=O,Z=O,x=R}if(I===N.length)return n(A,x),Je&&Ms(A,I),G;if(x===null){for(;I<N.length;I++)x=g(A,N[I],j),x!==null&&(P=s(x,P,I),Z===null?G=x:Z.sibling=x,Z=x);return Je&&Ms(A,I),G}for(x=i(A,x);I<N.length;I++)R=C(x,A,I,N[I],j),R!==null&&(t&&R.alternate!==null&&x.delete(R.key===null?I:R.key),P=s(R,P,I),Z===null?G=R:Z.sibling=R,Z=R);return t&&x.forEach(function(V){return e(A,V)}),Je&&Ms(A,I),G}function k(A,P,N,j){var G=$l(N);if(typeof G!="function")throw Error(X(150));if(N=G.call(N),N==null)throw Error(X(151));for(var Z=G=null,x=P,I=P=0,R=null,O=N.next();x!==null&&!O.done;I++,O=N.next()){x.index>I?(R=x,x=null):R=x.sibling;var V=w(A,x,O.value,j);if(V===null){x===null&&(x=R);break}t&&x&&V.alternate===null&&e(A,x),P=s(V,P,I),Z===null?G=V:Z.sibling=V,Z=V,x=R}if(O.done)return n(A,x),Je&&Ms(A,I),G;if(x===null){for(;!O.done;I++,O=N.next())O=g(A,O.value,j),O!==null&&(P=s(O,P,I),Z===null?G=O:Z.sibling=O,Z=O);return Je&&Ms(A,I),G}for(x=i(A,x);!O.done;I++,O=N.next())O=C(x,A,I,O.value,j),O!==null&&(t&&O.alternate!==null&&x.delete(O.key===null?I:O.key),P=s(O,P,I),Z===null?G=O:Z.sibling=O,Z=O);return t&&x.forEach(function(U){return e(A,U)}),Je&&Ms(A,I),G}function D(A,P,N,j){if(typeof N=="object"&&N!==null&&N.type===ia&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Ih:e:{for(var G=N.key,Z=P;Z!==null;){if(Z.key===G){if(G=N.type,G===ia){if(Z.tag===7){n(A,Z.sibling),P=r(Z,N.props.children),P.return=A,A=P;break e}}else if(Z.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Dr&&jw(G)===Z.type){n(A,Z.sibling),P=r(Z,N.props),P.ref=Ql(A,Z,N),P.return=A,A=P;break e}n(A,Z);break}else e(A,Z);Z=Z.sibling}N.type===ia?(P=Ks(N.props.children,A.mode,j,N.key),P.return=A,A=P):(j=sd(N.type,N.key,N.props,null,A.mode,j),j.ref=Ql(A,P,N),j.return=A,A=j)}return a(A);case na:e:{for(Z=N.key;P!==null;){if(P.key===Z)if(P.tag===4&&P.stateNode.containerInfo===N.containerInfo&&P.stateNode.implementation===N.implementation){n(A,P.sibling),P=r(P,N.children||[]),P.return=A,A=P;break e}else{n(A,P);break}else e(A,P);P=P.sibling}P=nm(N,A.mode,j),P.return=A,A=P}return a(A);case Dr:return Z=N._init,D(A,P,Z(N._payload),j)}if(au(N))return b(A,P,N,j);if($l(N))return k(A,P,N,j);Oh(A,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,P!==null&&P.tag===6?(n(A,P.sibling),P=r(P,N),P.return=A,A=P):(n(A,P),P=tm(N,A.mode,j),P.return=A,A=P),a(A)):n(A,P)}return D}var La=VI(!0),UI=VI(!1),kd=ms(null),bd=null,ha=null,Ag=null;function Rg(){Ag=ha=bd=null}function kg(t){var e=kd.current;Qe(kd),t._currentValue=e}function Xm(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function wa(t,e){bd=t,Ag=ha=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(pn=!0),t.firstContext=null)}function Zn(t){var e=t._currentValue;if(Ag!==t)if(t={context:t,memoizedValue:e,next:null},ha===null){if(bd===null)throw Error(X(308));ha=t,bd.dependencies={lanes:0,firstContext:t}}else ha=ha.next=t;return e}var Bs=null;function bg(t){Bs===null?Bs=[t]:Bs.push(t)}function jI(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,bg(e)):(n.next=r.next,r.next=n),e.interleaved=n,ur(t,i)}function ur(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Mr=!1;function Ng(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ir(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Oe&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ur(t,n)}return r=i.interleaved,r===null?(e.next=e,bg(i)):(e.next=r.next,r.next=e),i.interleaved=e,ur(t,n)}function Jh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,gg(t,n)}}function zw(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nd(t,e,n,i){var r=t.updateQueue;Mr=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var h=u,f=h.next;h.next=null,a===null?s=f:a.next=f,a=h;var _=t.alternate;_!==null&&(_=_.updateQueue,u=_.lastBaseUpdate,u!==a&&(u===null?_.firstBaseUpdate=f:u.next=f,_.lastBaseUpdate=h))}if(s!==null){var g=r.baseState;a=0,_=f=h=null,u=s;do{var w=u.lane,C=u.eventTime;if((i&w)===w){_!==null&&(_=_.next={eventTime:C,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var b=t,k=u;switch(w=e,C=n,k.tag){case 1:if(b=k.payload,typeof b=="function"){g=b.call(C,g,w);break e}g=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=k.payload,w=typeof b=="function"?b.call(C,g,w):b,w==null)break e;g=st({},g,w);break e;case 2:Mr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,w=r.effects,w===null?r.effects=[u]:w.push(u))}else C={eventTime:C,lane:w,tag:u.tag,payload:u.payload,callback:u.callback,next:null},_===null?(f=_=C,h=g):_=_.next=C,a|=w;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;w=u,u=w.next,w.next=null,r.lastBaseUpdate=w,r.shared.pending=null}}while(!0);if(_===null&&(h=g),r.baseState=h,r.firstBaseUpdate=f,r.lastBaseUpdate=_,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);eo|=a,t.lanes=a,t.memoizedState=g}}function Bw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(X(191,r));r.call(i)}}}var Tc={},xi=ms(Tc),Gu=ms(Tc),Ku=ms(Tc);function Ws(t){if(t===Tc)throw Error(X(174));return t}function Lg(t,e){switch(qe(Ku,e),qe(Gu,t),qe(xi,Tc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Nm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Nm(e,t)}Qe(xi),qe(xi,e)}function Oa(){Qe(xi),Qe(Gu),Qe(Ku)}function BI(t){Ws(Ku.current);var e=Ws(xi.current),n=Nm(e,t.type);e!==n&&(qe(Gu,t),qe(xi,n))}function Og(t){Gu.current===t&&(Qe(xi),Qe(Gu))}var it=ms(0);function Ld(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zp=[];function Dg(){for(var t=0;t<Zp.length;t++)Zp[t]._workInProgressVersionPrimary=null;Zp.length=0}var ed=wr.ReactCurrentDispatcher,Qp=wr.ReactCurrentBatchConfig,Js=0,rt=null,St=null,Ot=null,Od=!1,Eu=!1,Zu=0,Ek=0;function Gt(){throw Error(X(321))}function Mg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fi(t[n],e[n]))return!1;return!0}function Fg(t,e,n,i,r,s){if(Js=s,rt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ed.current=t===null||t.memoizedState===null?Ck:xk,t=n(i,r),Eu){s=0;do{if(Eu=!1,Zu=0,25<=s)throw Error(X(301));s+=1,Ot=St=null,e.updateQueue=null,ed.current=Pk,t=n(i,r)}while(Eu)}if(ed.current=Dd,e=St!==null&&St.next!==null,Js=0,Ot=St=rt=null,Od=!1,e)throw Error(X(300));return t}function Vg(){var t=Zu!==0;return Zu=0,t}function Ei(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?rt.memoizedState=Ot=t:Ot=Ot.next=t,Ot}function Qn(){if(St===null){var t=rt.alternate;t=t!==null?t.memoizedState:null}else t=St.next;var e=Ot===null?rt.memoizedState:Ot.next;if(e!==null)Ot=e,St=t;else{if(t===null)throw Error(X(310));St=t,t={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Ot===null?rt.memoizedState=Ot=t:Ot=Ot.next=t}return Ot}function Qu(t,e){return typeof e=="function"?e(t):e}function Yp(t){var e=Qn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=St,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var u=a=null,h=null,f=s;do{var _=f.lane;if((Js&_)===_)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var g={lane:_,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(u=h=g,a=i):h=h.next=g,rt.lanes|=_,eo|=_}f=f.next}while(f!==null&&f!==s);h===null?a=i:h.next=u,fi(i,e.memoizedState)||(pn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,rt.lanes|=s,eo|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Xp(t){var e=Qn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=t(s,a.action),a=a.next;while(a!==r);fi(s,e.memoizedState)||(pn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function WI(){}function HI(t,e){var n=rt,i=Qn(),r=e(),s=!fi(i.memoizedState,r);if(s&&(i.memoizedState=r,pn=!0),i=i.queue,Ug(GI.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Ot!==null&&Ot.memoizedState.tag&1){if(n.flags|=2048,Yu(9,qI.bind(null,n,i,r,e),void 0,null),Ft===null)throw Error(X(349));Js&30||$I(n,e,r)}return r}function $I(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function qI(t,e,n,i){e.value=n,e.getSnapshot=i,KI(e)&&ZI(t)}function GI(t,e,n){return n(function(){KI(e)&&ZI(t)})}function KI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fi(t,n)}catch{return!0}}function ZI(t){var e=ur(t,1);e!==null&&ci(e,t,1,-1)}function Ww(t){var e=Ei();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qu,lastRenderedState:t},e.queue=t,t=t.dispatch=Sk.bind(null,rt,t),[e.memoizedState,t]}function Yu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function QI(){return Qn().memoizedState}function td(t,e,n,i){var r=Ei();rt.flags|=t,r.memoizedState=Yu(1|e,n,void 0,i===void 0?null:i)}function bf(t,e,n,i){var r=Qn();i=i===void 0?null:i;var s=void 0;if(St!==null){var a=St.memoizedState;if(s=a.destroy,i!==null&&Mg(i,a.deps)){r.memoizedState=Yu(e,n,s,i);return}}rt.flags|=t,r.memoizedState=Yu(1|e,n,s,i)}function Hw(t,e){return td(8390656,8,t,e)}function Ug(t,e){return bf(2048,8,t,e)}function YI(t,e){return bf(4,2,t,e)}function XI(t,e){return bf(4,4,t,e)}function JI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function eS(t,e,n){return n=n!=null?n.concat([t]):null,bf(4,4,JI.bind(null,e,t),n)}function jg(){}function tS(t,e){var n=Qn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Mg(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function nS(t,e){var n=Qn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Mg(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function iS(t,e,n){return Js&21?(fi(n,e)||(n=lI(),rt.lanes|=n,eo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,pn=!0),t.memoizedState=n)}function Tk(t,e){var n=Ue;Ue=n!==0&&4>n?n:4,t(!0);var i=Qp.transition;Qp.transition={};try{t(!1),e()}finally{Ue=n,Qp.transition=i}}function rS(){return Qn().memoizedState}function Ik(t,e,n){var i=Jr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},sS(t))oS(e,n);else if(n=jI(t,e,n,i),n!==null){var r=an();ci(n,t,i,r),aS(n,e,i)}}function Sk(t,e,n){var i=Jr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(sS(t))oS(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,u=s(a,n);if(r.hasEagerState=!0,r.eagerState=u,fi(u,a)){var h=e.interleaved;h===null?(r.next=r,bg(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=jI(t,e,r,i),n!==null&&(r=an(),ci(n,t,i,r),aS(n,e,i))}}function sS(t){var e=t.alternate;return t===rt||e!==null&&e===rt}function oS(t,e){Eu=Od=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function aS(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,gg(t,n)}}var Dd={readContext:Zn,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},Ck={readContext:Zn,useCallback:function(t,e){return Ei().memoizedState=[t,e===void 0?null:e],t},useContext:Zn,useEffect:Hw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,td(4194308,4,JI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return td(4194308,4,t,e)},useInsertionEffect:function(t,e){return td(4,2,t,e)},useMemo:function(t,e){var n=Ei();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ei();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Ik.bind(null,rt,t),[i.memoizedState,t]},useRef:function(t){var e=Ei();return t={current:t},e.memoizedState=t},useState:Ww,useDebugValue:jg,useDeferredValue:function(t){return Ei().memoizedState=t},useTransition:function(){var t=Ww(!1),e=t[0];return t=Tk.bind(null,t[1]),Ei().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=rt,r=Ei();if(Je){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),Ft===null)throw Error(X(349));Js&30||$I(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,Hw(GI.bind(null,i,s,t),[t]),i.flags|=2048,Yu(9,qI.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Ei(),e=Ft.identifierPrefix;if(Je){var n=Xi,i=Yi;n=(i&~(1<<32-ui(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Zu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Ek++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xk={readContext:Zn,useCallback:tS,useContext:Zn,useEffect:Ug,useImperativeHandle:eS,useInsertionEffect:YI,useLayoutEffect:XI,useMemo:nS,useReducer:Yp,useRef:QI,useState:function(){return Yp(Qu)},useDebugValue:jg,useDeferredValue:function(t){var e=Qn();return iS(e,St.memoizedState,t)},useTransition:function(){var t=Yp(Qu)[0],e=Qn().memoizedState;return[t,e]},useMutableSource:WI,useSyncExternalStore:HI,useId:rS,unstable_isNewReconciler:!1},Pk={readContext:Zn,useCallback:tS,useContext:Zn,useEffect:Ug,useImperativeHandle:eS,useInsertionEffect:YI,useLayoutEffect:XI,useMemo:nS,useReducer:Xp,useRef:QI,useState:function(){return Xp(Qu)},useDebugValue:jg,useDeferredValue:function(t){var e=Qn();return St===null?e.memoizedState=t:iS(e,St.memoizedState,t)},useTransition:function(){var t=Xp(Qu)[0],e=Qn().memoizedState;return[t,e]},useMutableSource:WI,useSyncExternalStore:HI,useId:rS,unstable_isNewReconciler:!1};function ii(t,e){if(t&&t.defaultProps){e=st({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Jm(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:st({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Nf={isMounted:function(t){return(t=t._reactInternals)?mo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=an(),r=Jr(t),s=ir(i,r);s.payload=e,n!=null&&(s.callback=n),e=Yr(t,s,r),e!==null&&(ci(e,t,r,i),Jh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=an(),r=Jr(t),s=ir(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Yr(t,s,r),e!==null&&(ci(e,t,r,i),Jh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=an(),i=Jr(t),r=ir(n,i);r.tag=2,e!=null&&(r.callback=e),e=Yr(t,r,i),e!==null&&(ci(e,t,i,n),Jh(e,t,i))}};function $w(t,e,n,i,r,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!Wu(n,i)||!Wu(r,s):!0}function lS(t,e,n){var i=!1,r=as,s=e.contextType;return typeof s=="object"&&s!==null?s=Zn(s):(r=vn(e)?Ys:en.current,i=e.contextTypes,s=(i=i!=null)?ba(t,r):as),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Nf,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function qw(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Nf.enqueueReplaceState(e,e.state,null)}function e_(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Ng(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Zn(s):(s=vn(e)?Ys:en.current,r.context=ba(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Jm(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Nf.enqueueReplaceState(r,r.state,null),Nd(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Da(t,e){try{var n="",i=e;do n+=tR(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Jp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function t_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ak=typeof WeakMap=="function"?WeakMap:Map;function uS(t,e,n){n=ir(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Fd||(Fd=!0,h_=i),t_(t,e)},n}function cS(t,e,n){n=ir(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){t_(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){t_(t,e),typeof i!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Gw(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Ak;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Bk.bind(null,t,e,n),e.then(t,t))}function Kw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Zw(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ir(-1,1),e.tag=2,Yr(n,e,1))),n.lanes|=1),t)}var Rk=wr.ReactCurrentOwner,pn=!1;function on(t,e,n,i){e.child=t===null?UI(e,null,n,i):La(e,t.child,n,i)}function Qw(t,e,n,i,r){n=n.render;var s=e.ref;return wa(e,r),i=Fg(t,e,n,i,s,r),n=Vg(),t!==null&&!pn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,cr(t,e,r)):(Je&&n&&Cg(e),e.flags|=1,on(t,e,i,r),e.child)}function Yw(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Kg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,hS(t,e,s,i,r)):(t=sd(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Wu,n(a,i)&&t.ref===e.ref)return cr(t,e,r)}return e.flags|=1,t=es(s,i),t.ref=e.ref,t.return=e,e.child=t}function hS(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Wu(s,i)&&t.ref===e.ref)if(pn=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(pn=!0);else return e.lanes=t.lanes,cr(t,e,r)}return n_(t,e,n,i,r)}function dS(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(fa,Pn),Pn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,qe(fa,Pn),Pn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,qe(fa,Pn),Pn|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,qe(fa,Pn),Pn|=i;return on(t,e,r,n),e.child}function fS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function n_(t,e,n,i,r){var s=vn(n)?Ys:en.current;return s=ba(e,s),wa(e,r),n=Fg(t,e,n,i,s,r),i=Vg(),t!==null&&!pn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,cr(t,e,r)):(Je&&i&&Cg(e),e.flags|=1,on(t,e,n,r),e.child)}function Xw(t,e,n,i,r){if(vn(n)){var s=!0;Pd(e)}else s=!1;if(wa(e,r),e.stateNode===null)nd(t,e),lS(e,n,i),e_(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var h=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=Zn(f):(f=vn(n)?Ys:en.current,f=ba(e,f));var _=n.getDerivedStateFromProps,g=typeof _=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||h!==f)&&qw(e,a,i,f),Mr=!1;var w=e.memoizedState;a.state=w,Nd(e,i,a,r),h=e.memoizedState,u!==i||w!==h||gn.current||Mr?(typeof _=="function"&&(Jm(e,n,_,i),h=e.memoizedState),(u=Mr||$w(e,n,u,i,w,h,f))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),a.props=i,a.state=h,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,zI(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:ii(e.type,u),a.props=f,g=e.pendingProps,w=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=Zn(h):(h=vn(n)?Ys:en.current,h=ba(e,h));var C=n.getDerivedStateFromProps;(_=typeof C=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||w!==h)&&qw(e,a,i,h),Mr=!1,w=e.memoizedState,a.state=w,Nd(e,i,a,r);var b=e.memoizedState;u!==g||w!==b||gn.current||Mr?(typeof C=="function"&&(Jm(e,n,C,i),b=e.memoizedState),(f=Mr||$w(e,n,f,i,w,b,h)||!1)?(_||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,b,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,b,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=b),a.props=i,a.state=b,a.context=h,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),i=!1)}return i_(t,e,n,i,s,r)}function i_(t,e,n,i,r,s){fS(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&Fw(e,n,!1),cr(t,e,s);i=e.stateNode,Rk.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=La(e,t.child,null,s),e.child=La(e,null,u,s)):on(t,e,u,s),e.memoizedState=i.state,r&&Fw(e,n,!0),e.child}function pS(t){var e=t.stateNode;e.pendingContext?Mw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Mw(t,e.context,!1),Lg(t,e.containerInfo)}function Jw(t,e,n,i,r){return Na(),Pg(r),e.flags|=256,on(t,e,n,i),e.child}var r_={dehydrated:null,treeContext:null,retryLane:0};function s_(t){return{baseLanes:t,cachePool:null,transitions:null}}function mS(t,e,n){var i=e.pendingProps,r=it.current,s=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),qe(it,r&1),t===null)return Ym(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,s?(i=e.mode,s=e.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Df(a,i,0,null),t=Ks(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=s_(n),e.memoizedState=r_,t):zg(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return kk(t,e,a,i,u,r,n);if(s){s=i.fallback,a=e.mode,r=t.child,u=r.sibling;var h={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=es(r,h),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?s=es(u,s):(s=Ks(s,a,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,a=t.child.memoizedState,a=a===null?s_(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=r_,i}return s=t.child,t=s.sibling,i=es(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function zg(t,e){return e=Df({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Dh(t,e,n,i){return i!==null&&Pg(i),La(e,t.child,null,n),t=zg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kk(t,e,n,i,r,s,a){if(n)return e.flags&256?(e.flags&=-257,i=Jp(Error(X(422))),Dh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Df({mode:"visible",children:i.children},r,0,null),s=Ks(s,r,a,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&La(e,t.child,null,a),e.child.memoizedState=s_(a),e.memoizedState=r_,s);if(!(e.mode&1))return Dh(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,s=Error(X(419)),i=Jp(s,i,void 0),Dh(t,e,a,i)}if(u=(a&t.childLanes)!==0,pn||u){if(i=Ft,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,ur(t,r),ci(i,t,r,-1))}return Gg(),i=Jp(Error(X(421))),Dh(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Wk.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,An=Qr(r.nextSibling),bn=e,Je=!0,si=null,t!==null&&(Hn[$n++]=Yi,Hn[$n++]=Xi,Hn[$n++]=Xs,Yi=t.id,Xi=t.overflow,Xs=e),e=zg(e,i.children),e.flags|=4096,e)}function e0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Xm(t.return,e,n)}function em(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function _S(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(on(t,e,i.children,n),i=it.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&e0(t,n,e);else if(t.tag===19)e0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(qe(it,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Ld(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),em(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Ld(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}em(e,!0,n,null,s);break;case"together":em(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function cr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),eo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=es(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=es(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function bk(t,e,n){switch(e.tag){case 3:pS(e),Na();break;case 5:BI(e);break;case 1:vn(e.type)&&Pd(e);break;case 4:Lg(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;qe(kd,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(qe(it,it.current&1),e.flags|=128,null):n&e.child.childLanes?mS(t,e,n):(qe(it,it.current&1),t=cr(t,e,n),t!==null?t.sibling:null);qe(it,it.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return _S(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),qe(it,it.current),i)break;return null;case 22:case 23:return e.lanes=0,dS(t,e,n)}return cr(t,e,n)}var gS,o_,vS,yS;gS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};o_=function(){};vS=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Ws(xi.current);var s=null;switch(n){case"input":r=Am(t,r),i=Am(t,i),s=[];break;case"select":r=st({},r,{value:void 0}),i=st({},i,{value:void 0}),s=[];break;case"textarea":r=bm(t,r),i=bm(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Cd)}Lm(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Mu.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in i){var h=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&h!==u&&(h!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&u[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(s||(s=[]),s.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(s=s||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(s=s||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Mu.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&Ke("scroll",t),s||u===h||(s=[])):(s=s||[]).push(f,h))}n&&(s=s||[]).push("style",n);var f=s;(e.updateQueue=f)&&(e.flags|=4)}};yS=function(t,e,n,i){n!==i&&(e.flags|=4)};function Yl(t,e){if(!Je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Nk(t,e,n){var i=e.pendingProps;switch(xg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(e),null;case 1:return vn(e.type)&&xd(),Kt(e),null;case 3:return i=e.stateNode,Oa(),Qe(gn),Qe(en),Dg(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Lh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,si!==null&&(p_(si),si=null))),o_(t,e),Kt(e),null;case 5:Og(e);var r=Ws(Ku.current);if(n=e.type,t!==null&&e.stateNode!=null)vS(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(X(166));return Kt(e),null}if(t=Ws(xi.current),Lh(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Ti]=e,i[qu]=s,t=(e.mode&1)!==0,n){case"dialog":Ke("cancel",i),Ke("close",i);break;case"iframe":case"object":case"embed":Ke("load",i);break;case"video":case"audio":for(r=0;r<uu.length;r++)Ke(uu[r],i);break;case"source":Ke("error",i);break;case"img":case"image":case"link":Ke("error",i),Ke("load",i);break;case"details":Ke("toggle",i);break;case"input":uw(i,s),Ke("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ke("invalid",i);break;case"textarea":hw(i,s),Ke("invalid",i)}Lm(n,s),r=null;for(var a in s)if(s.hasOwnProperty(a)){var u=s[a];a==="children"?typeof u=="string"?i.textContent!==u&&(s.suppressHydrationWarning!==!0&&Nh(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&Nh(i.textContent,u,t),r=["children",""+u]):Mu.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Ke("scroll",i)}switch(n){case"input":Sh(i),cw(i,s,!0);break;case"textarea":Sh(i),dw(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Cd)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=GT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[Ti]=e,t[qu]=i,gS(t,e,!1,!1),e.stateNode=t;e:{switch(a=Om(n,i),n){case"dialog":Ke("cancel",t),Ke("close",t),r=i;break;case"iframe":case"object":case"embed":Ke("load",t),r=i;break;case"video":case"audio":for(r=0;r<uu.length;r++)Ke(uu[r],t);r=i;break;case"source":Ke("error",t),r=i;break;case"img":case"image":case"link":Ke("error",t),Ke("load",t),r=i;break;case"details":Ke("toggle",t),r=i;break;case"input":uw(t,i),r=Am(t,i),Ke("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=st({},i,{value:void 0}),Ke("invalid",t);break;case"textarea":hw(t,i),r=bm(t,i),Ke("invalid",t);break;default:r=i}Lm(n,r),u=r;for(s in u)if(u.hasOwnProperty(s)){var h=u[s];s==="style"?QT(t,h):s==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&KT(t,h)):s==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Fu(t,h):typeof h=="number"&&Fu(t,""+h):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Mu.hasOwnProperty(s)?h!=null&&s==="onScroll"&&Ke("scroll",t):h!=null&&hg(t,s,h,a))}switch(n){case"input":Sh(t),cw(t,i,!1);break;case"textarea":Sh(t),dw(t);break;case"option":i.value!=null&&t.setAttribute("value",""+os(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?_a(t,!!i.multiple,s,!1):i.defaultValue!=null&&_a(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Cd)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Kt(e),null;case 6:if(t&&e.stateNode!=null)yS(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(X(166));if(n=Ws(Ku.current),Ws(xi.current),Lh(e)){if(i=e.stateNode,n=e.memoizedProps,i[Ti]=e,(s=i.nodeValue!==n)&&(t=bn,t!==null))switch(t.tag){case 3:Nh(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nh(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ti]=e,e.stateNode=i}return Kt(e),null;case 13:if(Qe(it),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Je&&An!==null&&e.mode&1&&!(e.flags&128))FI(),Na(),e.flags|=98560,s=!1;else if(s=Lh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(X(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(X(317));s[Ti]=e}else Na(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Kt(e),s=!1}else si!==null&&(p_(si),si=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||it.current&1?Pt===0&&(Pt=3):Gg())),e.updateQueue!==null&&(e.flags|=4),Kt(e),null);case 4:return Oa(),o_(t,e),t===null&&Hu(e.stateNode.containerInfo),Kt(e),null;case 10:return kg(e.type._context),Kt(e),null;case 17:return vn(e.type)&&xd(),Kt(e),null;case 19:if(Qe(it),s=e.memoizedState,s===null)return Kt(e),null;if(i=(e.flags&128)!==0,a=s.rendering,a===null)if(i)Yl(s,!1);else{if(Pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ld(t),a!==null){for(e.flags|=128,Yl(s,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return qe(it,it.current&1|2),e.child}t=t.sibling}s.tail!==null&&ft()>Ma&&(e.flags|=128,i=!0,Yl(s,!1),e.lanes=4194304)}else{if(!i)if(t=Ld(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Yl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Je)return Kt(e),null}else 2*ft()-s.renderingStartTime>Ma&&n!==1073741824&&(e.flags|=128,i=!0,Yl(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ft(),e.sibling=null,n=it.current,qe(it,i?n&1|2:n&1),e):(Kt(e),null);case 22:case 23:return qg(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Pn&1073741824&&(Kt(e),e.subtreeFlags&6&&(e.flags|=8192)):Kt(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function Lk(t,e){switch(xg(e),e.tag){case 1:return vn(e.type)&&xd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Oa(),Qe(gn),Qe(en),Dg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Og(e),null;case 13:if(Qe(it),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Na()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qe(it),null;case 4:return Oa(),null;case 10:return kg(e.type._context),null;case 22:case 23:return qg(),null;case 24:return null;default:return null}}var Mh=!1,Yt=!1,Ok=typeof WeakSet=="function"?WeakSet:Set,ie=null;function da(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){lt(t,e,i)}else n.current=null}function a_(t,e,n){try{n()}catch(i){lt(t,e,i)}}var t0=!1;function Dk(t,e){if(Hm=Td,t=SI(),Sg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,u=-1,h=-1,f=0,_=0,g=t,w=null;t:for(;;){for(var C;g!==n||r!==0&&g.nodeType!==3||(u=a+r),g!==s||i!==0&&g.nodeType!==3||(h=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(C=g.firstChild)!==null;)w=g,g=C;for(;;){if(g===t)break t;if(w===n&&++f===r&&(u=a),w===s&&++_===i&&(h=a),(C=g.nextSibling)!==null)break;g=w,w=g.parentNode}g=C}n=u===-1||h===-1?null:{start:u,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for($m={focusedElem:t,selectionRange:n},Td=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var k=b.memoizedProps,D=b.memoizedState,A=e.stateNode,P=A.getSnapshotBeforeUpdate(e.elementType===e.type?k:ii(e.type,k),D);A.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(j){lt(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return b=t0,t0=!1,b}function Tu(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&a_(e,n,s)}r=r.next}while(r!==i)}}function Lf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function l_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function wS(t){var e=t.alternate;e!==null&&(t.alternate=null,wS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ti],delete e[qu],delete e[Km],delete e[gk],delete e[vk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ES(t){return t.tag===5||t.tag===3||t.tag===4}function n0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ES(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function u_(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cd));else if(i!==4&&(t=t.child,t!==null))for(u_(t,e,n),t=t.sibling;t!==null;)u_(t,e,n),t=t.sibling}function c_(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(c_(t,e,n),t=t.sibling;t!==null;)c_(t,e,n),t=t.sibling}var Ut=null,ri=!1;function Lr(t,e,n){for(n=n.child;n!==null;)TS(t,e,n),n=n.sibling}function TS(t,e,n){if(Ci&&typeof Ci.onCommitFiberUnmount=="function")try{Ci.onCommitFiberUnmount(Cf,n)}catch{}switch(n.tag){case 5:Yt||da(n,e);case 6:var i=Ut,r=ri;Ut=null,Lr(t,e,n),Ut=i,ri=r,Ut!==null&&(ri?(t=Ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ut.removeChild(n.stateNode));break;case 18:Ut!==null&&(ri?(t=Ut,n=n.stateNode,t.nodeType===8?Gp(t.parentNode,n):t.nodeType===1&&Gp(t,n),zu(t)):Gp(Ut,n.stateNode));break;case 4:i=Ut,r=ri,Ut=n.stateNode.containerInfo,ri=!0,Lr(t,e,n),Ut=i,ri=r;break;case 0:case 11:case 14:case 15:if(!Yt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&a_(n,e,a),r=r.next}while(r!==i)}Lr(t,e,n);break;case 1:if(!Yt&&(da(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){lt(n,e,u)}Lr(t,e,n);break;case 21:Lr(t,e,n);break;case 22:n.mode&1?(Yt=(i=Yt)||n.memoizedState!==null,Lr(t,e,n),Yt=i):Lr(t,e,n);break;default:Lr(t,e,n)}}function i0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ok),e.forEach(function(i){var r=Hk.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function ni(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Ut=u.stateNode,ri=!1;break e;case 3:Ut=u.stateNode.containerInfo,ri=!0;break e;case 4:Ut=u.stateNode.containerInfo,ri=!0;break e}u=u.return}if(Ut===null)throw Error(X(160));TS(s,a,r),Ut=null,ri=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(f){lt(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)IS(e,t),e=e.sibling}function IS(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ni(e,t),wi(t),i&4){try{Tu(3,t,t.return),Lf(3,t)}catch(k){lt(t,t.return,k)}try{Tu(5,t,t.return)}catch(k){lt(t,t.return,k)}}break;case 1:ni(e,t),wi(t),i&512&&n!==null&&da(n,n.return);break;case 5:if(ni(e,t),wi(t),i&512&&n!==null&&da(n,n.return),t.flags&32){var r=t.stateNode;try{Fu(r,"")}catch(k){lt(t,t.return,k)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,u=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&$T(r,s),Om(u,a);var f=Om(u,s);for(a=0;a<h.length;a+=2){var _=h[a],g=h[a+1];_==="style"?QT(r,g):_==="dangerouslySetInnerHTML"?KT(r,g):_==="children"?Fu(r,g):hg(r,_,g,f)}switch(u){case"input":Rm(r,s);break;case"textarea":qT(r,s);break;case"select":var w=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var C=s.value;C!=null?_a(r,!!s.multiple,C,!1):w!==!!s.multiple&&(s.defaultValue!=null?_a(r,!!s.multiple,s.defaultValue,!0):_a(r,!!s.multiple,s.multiple?[]:"",!1))}r[qu]=s}catch(k){lt(t,t.return,k)}}break;case 6:if(ni(e,t),wi(t),i&4){if(t.stateNode===null)throw Error(X(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(k){lt(t,t.return,k)}}break;case 3:if(ni(e,t),wi(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{zu(e.containerInfo)}catch(k){lt(t,t.return,k)}break;case 4:ni(e,t),wi(t);break;case 13:ni(e,t),wi(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Hg=ft())),i&4&&i0(t);break;case 22:if(_=n!==null&&n.memoizedState!==null,t.mode&1?(Yt=(f=Yt)||_,ni(e,t),Yt=f):ni(e,t),wi(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!_&&t.mode&1)for(ie=t,_=t.child;_!==null;){for(g=ie=_;ie!==null;){switch(w=ie,C=w.child,w.tag){case 0:case 11:case 14:case 15:Tu(4,w,w.return);break;case 1:da(w,w.return);var b=w.stateNode;if(typeof b.componentWillUnmount=="function"){i=w,n=w.return;try{e=i,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(k){lt(i,n,k)}}break;case 5:da(w,w.return);break;case 22:if(w.memoizedState!==null){s0(g);continue}}C!==null?(C.return=w,ie=C):s0(g)}_=_.sibling}e:for(_=null,g=t;;){if(g.tag===5){if(_===null){_=g;try{r=g.stateNode,f?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=g.stateNode,h=g.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=ZT("display",a))}catch(k){lt(t,t.return,k)}}}else if(g.tag===6){if(_===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(k){lt(t,t.return,k)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;_===g&&(_=null),g=g.return}_===g&&(_=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:ni(e,t),wi(t),i&4&&i0(t);break;case 21:break;default:ni(e,t),wi(t)}}function wi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ES(n)){var i=n;break e}n=n.return}throw Error(X(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Fu(r,""),i.flags&=-33);var s=n0(t);c_(t,s,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=n0(t);u_(t,u,a);break;default:throw Error(X(161))}}catch(h){lt(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Mk(t,e,n){ie=t,SS(t)}function SS(t,e,n){for(var i=(t.mode&1)!==0;ie!==null;){var r=ie,s=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||Mh;if(!a){var u=r.alternate,h=u!==null&&u.memoizedState!==null||Yt;u=Mh;var f=Yt;if(Mh=a,(Yt=h)&&!f)for(ie=r;ie!==null;)a=ie,h=a.child,a.tag===22&&a.memoizedState!==null?o0(r):h!==null?(h.return=a,ie=h):o0(r);for(;s!==null;)ie=s,SS(s),s=s.sibling;ie=r,Mh=u,Yt=f}r0(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,ie=s):r0(t)}}function r0(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yt||Lf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Yt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ii(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Bw(e,s,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Bw(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var _=f.memoizedState;if(_!==null){var g=_.dehydrated;g!==null&&zu(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Yt||e.flags&512&&l_(e)}catch(w){lt(e,e.return,w)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function s0(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function o0(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Lf(4,e)}catch(h){lt(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){lt(e,r,h)}}var s=e.return;try{l_(e)}catch(h){lt(e,s,h)}break;case 5:var a=e.return;try{l_(e)}catch(h){lt(e,a,h)}}}catch(h){lt(e,e.return,h)}if(e===t){ie=null;break}var u=e.sibling;if(u!==null){u.return=e.return,ie=u;break}ie=e.return}}var Fk=Math.ceil,Md=wr.ReactCurrentDispatcher,Bg=wr.ReactCurrentOwner,Gn=wr.ReactCurrentBatchConfig,Oe=0,Ft=null,wt=null,Bt=0,Pn=0,fa=ms(0),Pt=0,Xu=null,eo=0,Of=0,Wg=0,Iu=null,dn=null,Hg=0,Ma=1/0,Ki=null,Fd=!1,h_=null,Xr=null,Fh=!1,Hr=null,Vd=0,Su=0,d_=null,id=-1,rd=0;function an(){return Oe&6?ft():id!==-1?id:id=ft()}function Jr(t){return t.mode&1?Oe&2&&Bt!==0?Bt&-Bt:wk.transition!==null?(rd===0&&(rd=lI()),rd):(t=Ue,t!==0||(t=window.event,t=t===void 0?16:mI(t.type)),t):1}function ci(t,e,n,i){if(50<Su)throw Su=0,d_=null,Error(X(185));yc(t,n,i),(!(Oe&2)||t!==Ft)&&(t===Ft&&(!(Oe&2)&&(Of|=n),Pt===4&&Vr(t,Bt)),yn(t,i),n===1&&Oe===0&&!(e.mode&1)&&(Ma=ft()+500,kf&&_s()))}function yn(t,e){var n=t.callbackNode;wR(t,e);var i=Ed(t,t===Ft?Bt:0);if(i===0)n!==null&&mw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&mw(n),e===1)t.tag===0?yk(a0.bind(null,t)):OI(a0.bind(null,t)),mk(function(){!(Oe&6)&&_s()}),n=null;else{switch(uI(i)){case 1:n=_g;break;case 4:n=oI;break;case 16:n=wd;break;case 536870912:n=aI;break;default:n=wd}n=NS(n,CS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function CS(t,e){if(id=-1,rd=0,Oe&6)throw Error(X(327));var n=t.callbackNode;if(Ea()&&t.callbackNode!==n)return null;var i=Ed(t,t===Ft?Bt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Ud(t,i);else{e=i;var r=Oe;Oe|=2;var s=PS();(Ft!==t||Bt!==e)&&(Ki=null,Ma=ft()+500,Gs(t,e));do try{jk();break}catch(u){xS(t,u)}while(!0);Rg(),Md.current=s,Oe=r,wt!==null?e=0:(Ft=null,Bt=0,e=Pt)}if(e!==0){if(e===2&&(r=Um(t),r!==0&&(i=r,e=f_(t,r))),e===1)throw n=Xu,Gs(t,0),Vr(t,i),yn(t,ft()),n;if(e===6)Vr(t,i);else{if(r=t.current.alternate,!(i&30)&&!Vk(r)&&(e=Ud(t,i),e===2&&(s=Um(t),s!==0&&(i=s,e=f_(t,s))),e===1))throw n=Xu,Gs(t,0),Vr(t,i),yn(t,ft()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(X(345));case 2:Fs(t,dn,Ki);break;case 3:if(Vr(t,i),(i&130023424)===i&&(e=Hg+500-ft(),10<e)){if(Ed(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){an(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Gm(Fs.bind(null,t,dn,Ki),e);break}Fs(t,dn,Ki);break;case 4:if(Vr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-ui(i);s=1<<a,a=e[a],a>r&&(r=a),i&=~s}if(i=r,i=ft()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Fk(i/1960))-i,10<i){t.timeoutHandle=Gm(Fs.bind(null,t,dn,Ki),i);break}Fs(t,dn,Ki);break;case 5:Fs(t,dn,Ki);break;default:throw Error(X(329))}}}return yn(t,ft()),t.callbackNode===n?CS.bind(null,t):null}function f_(t,e){var n=Iu;return t.current.memoizedState.isDehydrated&&(Gs(t,e).flags|=256),t=Ud(t,e),t!==2&&(e=dn,dn=n,e!==null&&p_(e)),t}function p_(t){dn===null?dn=t:dn.push.apply(dn,t)}function Vk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!fi(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vr(t,e){for(e&=~Wg,e&=~Of,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ui(e),i=1<<n;t[n]=-1,e&=~i}}function a0(t){if(Oe&6)throw Error(X(327));Ea();var e=Ed(t,0);if(!(e&1))return yn(t,ft()),null;var n=Ud(t,e);if(t.tag!==0&&n===2){var i=Um(t);i!==0&&(e=i,n=f_(t,i))}if(n===1)throw n=Xu,Gs(t,0),Vr(t,e),yn(t,ft()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Fs(t,dn,Ki),yn(t,ft()),null}function $g(t,e){var n=Oe;Oe|=1;try{return t(e)}finally{Oe=n,Oe===0&&(Ma=ft()+500,kf&&_s())}}function to(t){Hr!==null&&Hr.tag===0&&!(Oe&6)&&Ea();var e=Oe;Oe|=1;var n=Gn.transition,i=Ue;try{if(Gn.transition=null,Ue=1,t)return t()}finally{Ue=i,Gn.transition=n,Oe=e,!(Oe&6)&&_s()}}function qg(){Pn=fa.current,Qe(fa)}function Gs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,pk(n)),wt!==null)for(n=wt.return;n!==null;){var i=n;switch(xg(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&xd();break;case 3:Oa(),Qe(gn),Qe(en),Dg();break;case 5:Og(i);break;case 4:Oa();break;case 13:Qe(it);break;case 19:Qe(it);break;case 10:kg(i.type._context);break;case 22:case 23:qg()}n=n.return}if(Ft=t,wt=t=es(t.current,null),Bt=Pn=e,Pt=0,Xu=null,Wg=Of=eo=0,dn=Iu=null,Bs!==null){for(e=0;e<Bs.length;e++)if(n=Bs[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var a=s.next;s.next=r,i.next=a}n.pending=i}Bs=null}return t}function xS(t,e){do{var n=wt;try{if(Rg(),ed.current=Dd,Od){for(var i=rt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Od=!1}if(Js=0,Ot=St=rt=null,Eu=!1,Zu=0,Bg.current=null,n===null||n.return===null){Pt=1,Xu=e,wt=null;break}e:{var s=t,a=n.return,u=n,h=e;if(e=Bt,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,_=u,g=_.tag;if(!(_.mode&1)&&(g===0||g===11||g===15)){var w=_.alternate;w?(_.updateQueue=w.updateQueue,_.memoizedState=w.memoizedState,_.lanes=w.lanes):(_.updateQueue=null,_.memoizedState=null)}var C=Kw(a);if(C!==null){C.flags&=-257,Zw(C,a,u,s,e),C.mode&1&&Gw(s,f,e),e=C,h=f;var b=e.updateQueue;if(b===null){var k=new Set;k.add(h),e.updateQueue=k}else b.add(h);break e}else{if(!(e&1)){Gw(s,f,e),Gg();break e}h=Error(X(426))}}else if(Je&&u.mode&1){var D=Kw(a);if(D!==null){!(D.flags&65536)&&(D.flags|=256),Zw(D,a,u,s,e),Pg(Da(h,u));break e}}s=h=Da(h,u),Pt!==4&&(Pt=2),Iu===null?Iu=[s]:Iu.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var A=uS(s,h,e);zw(s,A);break e;case 1:u=h;var P=s.type,N=s.stateNode;if(!(s.flags&128)&&(typeof P.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Xr===null||!Xr.has(N)))){s.flags|=65536,e&=-e,s.lanes|=e;var j=cS(s,u,e);zw(s,j);break e}}s=s.return}while(s!==null)}RS(n)}catch(G){e=G,wt===n&&n!==null&&(wt=n=n.return);continue}break}while(!0)}function PS(){var t=Md.current;return Md.current=Dd,t===null?Dd:t}function Gg(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Ft===null||!(eo&268435455)&&!(Of&268435455)||Vr(Ft,Bt)}function Ud(t,e){var n=Oe;Oe|=2;var i=PS();(Ft!==t||Bt!==e)&&(Ki=null,Gs(t,e));do try{Uk();break}catch(r){xS(t,r)}while(!0);if(Rg(),Oe=n,Md.current=i,wt!==null)throw Error(X(261));return Ft=null,Bt=0,Pt}function Uk(){for(;wt!==null;)AS(wt)}function jk(){for(;wt!==null&&!hR();)AS(wt)}function AS(t){var e=bS(t.alternate,t,Pn);t.memoizedProps=t.pendingProps,e===null?RS(t):wt=e,Bg.current=null}function RS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Lk(n,e),n!==null){n.flags&=32767,wt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pt=6,wt=null;return}}else if(n=Nk(n,e,Pn),n!==null){wt=n;return}if(e=e.sibling,e!==null){wt=e;return}wt=e=t}while(e!==null);Pt===0&&(Pt=5)}function Fs(t,e,n){var i=Ue,r=Gn.transition;try{Gn.transition=null,Ue=1,zk(t,e,n,i)}finally{Gn.transition=r,Ue=i}return null}function zk(t,e,n,i){do Ea();while(Hr!==null);if(Oe&6)throw Error(X(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(ER(t,s),t===Ft&&(wt=Ft=null,Bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fh||(Fh=!0,NS(wd,function(){return Ea(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Gn.transition,Gn.transition=null;var a=Ue;Ue=1;var u=Oe;Oe|=4,Bg.current=null,Dk(t,n),IS(n,t),ak($m),Td=!!Hm,$m=Hm=null,t.current=n,Mk(n),dR(),Oe=u,Ue=a,Gn.transition=s}else t.current=n;if(Fh&&(Fh=!1,Hr=t,Vd=r),s=t.pendingLanes,s===0&&(Xr=null),mR(n.stateNode),yn(t,ft()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Fd)throw Fd=!1,t=h_,h_=null,t;return Vd&1&&t.tag!==0&&Ea(),s=t.pendingLanes,s&1?t===d_?Su++:(Su=0,d_=t):Su=0,_s(),null}function Ea(){if(Hr!==null){var t=uI(Vd),e=Gn.transition,n=Ue;try{if(Gn.transition=null,Ue=16>t?16:t,Hr===null)var i=!1;else{if(t=Hr,Hr=null,Vd=0,Oe&6)throw Error(X(331));var r=Oe;for(Oe|=4,ie=t.current;ie!==null;){var s=ie,a=s.child;if(ie.flags&16){var u=s.deletions;if(u!==null){for(var h=0;h<u.length;h++){var f=u[h];for(ie=f;ie!==null;){var _=ie;switch(_.tag){case 0:case 11:case 15:Tu(8,_,s)}var g=_.child;if(g!==null)g.return=_,ie=g;else for(;ie!==null;){_=ie;var w=_.sibling,C=_.return;if(wS(_),_===f){ie=null;break}if(w!==null){w.return=C,ie=w;break}ie=C}}}var b=s.alternate;if(b!==null){var k=b.child;if(k!==null){b.child=null;do{var D=k.sibling;k.sibling=null,k=D}while(k!==null)}}ie=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,ie=a;else e:for(;ie!==null;){if(s=ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Tu(9,s,s.return)}var A=s.sibling;if(A!==null){A.return=s.return,ie=A;break e}ie=s.return}}var P=t.current;for(ie=P;ie!==null;){a=ie;var N=a.child;if(a.subtreeFlags&2064&&N!==null)N.return=a,ie=N;else e:for(a=P;ie!==null;){if(u=ie,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Lf(9,u)}}catch(G){lt(u,u.return,G)}if(u===a){ie=null;break e}var j=u.sibling;if(j!==null){j.return=u.return,ie=j;break e}ie=u.return}}if(Oe=r,_s(),Ci&&typeof Ci.onPostCommitFiberRoot=="function")try{Ci.onPostCommitFiberRoot(Cf,t)}catch{}i=!0}return i}finally{Ue=n,Gn.transition=e}}return!1}function l0(t,e,n){e=Da(n,e),e=uS(t,e,1),t=Yr(t,e,1),e=an(),t!==null&&(yc(t,1,e),yn(t,e))}function lt(t,e,n){if(t.tag===3)l0(t,t,n);else for(;e!==null;){if(e.tag===3){l0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Xr===null||!Xr.has(i))){t=Da(n,t),t=cS(e,t,1),e=Yr(e,t,1),t=an(),e!==null&&(yc(e,1,t),yn(e,t));break}}e=e.return}}function Bk(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=an(),t.pingedLanes|=t.suspendedLanes&n,Ft===t&&(Bt&n)===n&&(Pt===4||Pt===3&&(Bt&130023424)===Bt&&500>ft()-Hg?Gs(t,0):Wg|=n),yn(t,e)}function kS(t,e){e===0&&(t.mode&1?(e=Ph,Ph<<=1,!(Ph&130023424)&&(Ph=4194304)):e=1);var n=an();t=ur(t,e),t!==null&&(yc(t,e,n),yn(t,n))}function Wk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),kS(t,n)}function Hk(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(X(314))}i!==null&&i.delete(e),kS(t,n)}var bS;bS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||gn.current)pn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return pn=!1,bk(t,e,n);pn=!!(t.flags&131072)}else pn=!1,Je&&e.flags&1048576&&DI(e,Rd,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;nd(t,e),t=e.pendingProps;var r=ba(e,en.current);wa(e,n),r=Fg(null,e,i,t,r,n);var s=Vg();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vn(i)?(s=!0,Pd(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Ng(e),r.updater=Nf,e.stateNode=r,r._reactInternals=e,e_(e,i,t,n),e=i_(null,e,i,!0,s,n)):(e.tag=0,Je&&s&&Cg(e),on(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(nd(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=qk(i),t=ii(i,t),r){case 0:e=n_(null,e,i,t,n);break e;case 1:e=Xw(null,e,i,t,n);break e;case 11:e=Qw(null,e,i,t,n);break e;case 14:e=Yw(null,e,i,ii(i.type,t),n);break e}throw Error(X(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ii(i,r),n_(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ii(i,r),Xw(t,e,i,r,n);case 3:e:{if(pS(e),t===null)throw Error(X(387));i=e.pendingProps,s=e.memoizedState,r=s.element,zI(t,e),Nd(e,i,null,n);var a=e.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Da(Error(X(423)),e),e=Jw(t,e,i,n,r);break e}else if(i!==r){r=Da(Error(X(424)),e),e=Jw(t,e,i,n,r);break e}else for(An=Qr(e.stateNode.containerInfo.firstChild),bn=e,Je=!0,si=null,n=UI(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Na(),i===r){e=cr(t,e,n);break e}on(t,e,i,n)}e=e.child}return e;case 5:return BI(e),t===null&&Ym(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,a=r.children,qm(i,r)?a=null:s!==null&&qm(i,s)&&(e.flags|=32),fS(t,e),on(t,e,a,n),e.child;case 6:return t===null&&Ym(e),null;case 13:return mS(t,e,n);case 4:return Lg(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=La(e,null,i,n):on(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ii(i,r),Qw(t,e,i,r,n);case 7:return on(t,e,e.pendingProps,n),e.child;case 8:return on(t,e,e.pendingProps.children,n),e.child;case 12:return on(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,a=r.value,qe(kd,i._currentValue),i._currentValue=a,s!==null)if(fi(s.value,a)){if(s.children===r.children&&!gn.current){e=cr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var u=s.dependencies;if(u!==null){a=s.child;for(var h=u.firstContext;h!==null;){if(h.context===i){if(s.tag===1){h=ir(-1,n&-n),h.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var _=f.pending;_===null?h.next=h:(h.next=_.next,_.next=h),f.pending=h}}s.lanes|=n,h=s.alternate,h!==null&&(h.lanes|=n),Xm(s.return,n,e),u.lanes|=n;break}h=h.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(X(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Xm(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}on(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,wa(e,n),r=Zn(r),i=i(r),e.flags|=1,on(t,e,i,n),e.child;case 14:return i=e.type,r=ii(i,e.pendingProps),r=ii(i.type,r),Yw(t,e,i,r,n);case 15:return hS(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ii(i,r),nd(t,e),e.tag=1,vn(i)?(t=!0,Pd(e)):t=!1,wa(e,n),lS(e,i,r),e_(e,i,r,n),i_(null,e,i,!0,t,n);case 19:return _S(t,e,n);case 22:return dS(t,e,n)}throw Error(X(156,e.tag))};function NS(t,e){return sI(t,e)}function $k(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(t,e,n,i){return new $k(t,e,n,i)}function Kg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qk(t){if(typeof t=="function")return Kg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fg)return 11;if(t===pg)return 14}return 2}function es(t,e){var n=t.alternate;return n===null?(n=qn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function sd(t,e,n,i,r,s){var a=2;if(i=t,typeof t=="function")Kg(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ia:return Ks(n.children,r,s,e);case dg:a=8,r|=8;break;case Sm:return t=qn(12,n,e,r|2),t.elementType=Sm,t.lanes=s,t;case Cm:return t=qn(13,n,e,r),t.elementType=Cm,t.lanes=s,t;case xm:return t=qn(19,n,e,r),t.elementType=xm,t.lanes=s,t;case BT:return Df(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case jT:a=10;break e;case zT:a=9;break e;case fg:a=11;break e;case pg:a=14;break e;case Dr:a=16,i=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=qn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Ks(t,e,n,i){return t=qn(7,t,i,e),t.lanes=n,t}function Df(t,e,n,i){return t=qn(22,t,i,e),t.elementType=BT,t.lanes=n,t.stateNode={isHidden:!1},t}function tm(t,e,n){return t=qn(6,t,null,e),t.lanes=n,t}function nm(t,e,n){return e=qn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Gk(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mp(0),this.expirationTimes=Mp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mp(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Zg(t,e,n,i,r,s,a,u,h){return t=new Gk(t,e,n,u,h),e===1?(e=1,s===!0&&(e|=8)):e=0,s=qn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ng(s),t}function Kk(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:na,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function LS(t){if(!t)return as;t=t._reactInternals;e:{if(mo(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(vn(n))return LI(t,n,e)}return e}function OS(t,e,n,i,r,s,a,u,h){return t=Zg(n,i,!0,t,r,s,a,u,h),t.context=LS(null),n=t.current,i=an(),r=Jr(n),s=ir(i,r),s.callback=e??null,Yr(n,s,r),t.current.lanes=r,yc(t,r,i),yn(t,i),t}function Mf(t,e,n,i){var r=e.current,s=an(),a=Jr(r);return n=LS(n),e.context===null?e.context=n:e.pendingContext=n,e=ir(s,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Yr(r,e,a),t!==null&&(ci(t,r,a,s),Jh(t,r,a)),a}function jd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function u0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Qg(t,e){u0(t,e),(t=t.alternate)&&u0(t,e)}function Zk(){return null}var DS=typeof reportError=="function"?reportError:function(t){console.error(t)};function Yg(t){this._internalRoot=t}Ff.prototype.render=Yg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));Mf(t,e,null,null)};Ff.prototype.unmount=Yg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;to(function(){Mf(null,t,null,null)}),e[lr]=null}};function Ff(t){this._internalRoot=t}Ff.prototype.unstable_scheduleHydration=function(t){if(t){var e=dI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fr.length&&e!==0&&e<Fr[n].priority;n++);Fr.splice(n,0,t),n===0&&pI(t)}};function Xg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function c0(){}function Qk(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var f=jd(a);s.call(f)}}var a=OS(e,i,t,0,null,!1,!1,"",c0);return t._reactRootContainer=a,t[lr]=a.current,Hu(t.nodeType===8?t.parentNode:t),to(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=jd(h);u.call(f)}}var h=Zg(t,0,!1,null,null,!1,!1,"",c0);return t._reactRootContainer=h,t[lr]=h.current,Hu(t.nodeType===8?t.parentNode:t),to(function(){Mf(e,h,n,i)}),h}function Uf(t,e,n,i,r){var s=n._reactRootContainer;if(s){var a=s;if(typeof r=="function"){var u=r;r=function(){var h=jd(a);u.call(h)}}Mf(e,a,t,r)}else a=Qk(n,e,t,r,i);return jd(a)}cI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=lu(e.pendingLanes);n!==0&&(gg(e,n|1),yn(e,ft()),!(Oe&6)&&(Ma=ft()+500,_s()))}break;case 13:to(function(){var i=ur(t,1);if(i!==null){var r=an();ci(i,t,1,r)}}),Qg(t,1)}};vg=function(t){if(t.tag===13){var e=ur(t,134217728);if(e!==null){var n=an();ci(e,t,134217728,n)}Qg(t,134217728)}};hI=function(t){if(t.tag===13){var e=Jr(t),n=ur(t,e);if(n!==null){var i=an();ci(n,t,e,i)}Qg(t,e)}};dI=function(){return Ue};fI=function(t,e){var n=Ue;try{return Ue=t,e()}finally{Ue=n}};Mm=function(t,e,n){switch(e){case"input":if(Rm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Rf(i);if(!r)throw Error(X(90));HT(i),Rm(i,r)}}}break;case"textarea":qT(t,n);break;case"select":e=n.value,e!=null&&_a(t,!!n.multiple,e,!1)}};JT=$g;eI=to;var Yk={usingClientEntryPoint:!1,Events:[Ec,aa,Rf,YT,XT,$g]},Xl={findFiberByHostInstance:zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xk={bundleType:Xl.bundleType,version:Xl.version,rendererPackageName:Xl.rendererPackageName,rendererConfig:Xl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=iI(t),t===null?null:t.stateNode},findFiberByHostInstance:Xl.findFiberByHostInstance||Zk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vh.isDisabled&&Vh.supportsFiber)try{Cf=Vh.inject(Xk),Ci=Vh}catch{}}Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yk;Dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xg(e))throw Error(X(200));return Kk(t,e,null,n)};Dn.createRoot=function(t,e){if(!Xg(t))throw Error(X(299));var n=!1,i="",r=DS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Zg(t,1,!1,null,null,n,!1,i,r),t[lr]=e.current,Hu(t.nodeType===8?t.parentNode:t),new Yg(e)};Dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=iI(e),t=t===null?null:t.stateNode,t};Dn.flushSync=function(t){return to(t)};Dn.hydrate=function(t,e,n){if(!Vf(e))throw Error(X(200));return Uf(null,t,e,!0,n)};Dn.hydrateRoot=function(t,e,n){if(!Xg(t))throw Error(X(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",a=DS;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=OS(e,null,t,1,n??null,r,!1,s,a),t[lr]=e.current,Hu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Ff(e)};Dn.render=function(t,e,n){if(!Vf(e))throw Error(X(200));return Uf(null,t,e,!1,n)};Dn.unmountComponentAtNode=function(t){if(!Vf(t))throw Error(X(40));return t._reactRootContainer?(to(function(){Uf(null,null,t,!1,function(){t._reactRootContainer=null,t[lr]=null})}),!0):!1};Dn.unstable_batchedUpdates=$g;Dn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Vf(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return Uf(t,e,n,!1,i)};Dn.version="18.3.1-next-f1338f8080-20240426";function MS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(MS)}catch(t){console.error(t)}}MS(),MT.exports=Dn;var FS=MT.exports,VS,h0=FS;VS=h0.createRoot,h0.hydrateRoot;/**
 * @remix-run/router v1.19.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zd(){return zd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},zd.apply(this,arguments)}var $r;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})($r||($r={}));const d0="popstate";function Jk(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:a,hash:u}=i.location;return m_("",{pathname:s,search:a,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:jS(r)}return tb(e,n,null,t)}function En(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function US(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function eb(){return Math.random().toString(36).substr(2,8)}function f0(t,e){return{usr:t.state,key:t.key,idx:e}}function m_(t,e,n,i){return n===void 0&&(n=null),zd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?jf(e):e,{state:n,key:e&&e.key||i||eb()})}function jS(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function jf(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function tb(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,u=$r.Pop,h=null,f=_();f==null&&(f=0,a.replaceState(zd({},a.state,{idx:f}),""));function _(){return(a.state||{idx:null}).idx}function g(){u=$r.Pop;let D=_(),A=D==null?null:D-f;f=D,h&&h({action:u,location:k.location,delta:A})}function w(D,A){u=$r.Push;let P=m_(k.location,D,A);f=_()+1;let N=f0(P,f),j=k.createHref(P);try{a.pushState(N,"",j)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;r.location.assign(j)}s&&h&&h({action:u,location:k.location,delta:1})}function C(D,A){u=$r.Replace;let P=m_(k.location,D,A);f=_();let N=f0(P,f),j=k.createHref(P);a.replaceState(N,"",j),s&&h&&h({action:u,location:k.location,delta:0})}function b(D){let A=r.location.origin!=="null"?r.location.origin:r.location.href,P=typeof D=="string"?D:jS(D);return P=P.replace(/ $/,"%20"),En(A,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,A)}let k={get action(){return u},get location(){return t(r,a)},listen(D){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(d0,g),h=D,()=>{r.removeEventListener(d0,g),h=null}},createHref(D){return e(r,D)},createURL:b,encodeLocation(D){let A=b(D);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:w,replace:C,go(D){return a.go(D)}};return k}var p0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(p0||(p0={}));function nb(t,e,n){return n===void 0&&(n="/"),ib(t,e,n,!1)}function ib(t,e,n,i){let r=typeof e=="string"?jf(e):e,s=WS(r.pathname||"/",n);if(s==null)return null;let a=zS(t);rb(a);let u=null;for(let h=0;u==null&&h<a.length;++h){let f=mb(s);u=fb(a[h],f,i)}return u}function zS(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,a,u)=>{let h={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};h.relativePath.startsWith("/")&&(En(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let f=Ta([i,h.relativePath]),_=n.concat(h);s.children&&s.children.length>0&&(En(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),zS(s.children,e,_,f)),!(s.path==null&&!s.index)&&e.push({path:f,score:hb(f,s.index),routesMeta:_})};return t.forEach((s,a)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))r(s,a);else for(let h of BS(s.path))r(s,a,h)}),e}function BS(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=BS(i.join("/")),u=[];return u.push(...a.map(h=>h===""?s:[s,h].join("/"))),r&&u.push(...a),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function rb(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:db(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const sb=/^:[\w-]+$/,ob=3,ab=2,lb=1,ub=10,cb=-2,m0=t=>t==="*";function hb(t,e){let n=t.split("/"),i=n.length;return n.some(m0)&&(i+=cb),e&&(i+=ab),n.filter(r=>!m0(r)).reduce((r,s)=>r+(sb.test(s)?ob:s===""?lb:ub),i)}function db(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function fb(t,e,n){let{routesMeta:i}=t,r={},s="/",a=[];for(let u=0;u<i.length;++u){let h=i[u],f=u===i.length-1,_=s==="/"?e:e.slice(s.length)||"/",g=_0({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},_),w=h.route;if(!g&&f&&n&&!i[i.length-1].route.index&&(g=_0({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},_)),!g)return null;Object.assign(r,g.params),a.push({params:r,pathname:Ta([s,g.pathname]),pathnameBase:_b(Ta([s,g.pathnameBase])),route:w}),g.pathnameBase!=="/"&&(s=Ta([s,g.pathnameBase]))}return a}function _0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=pb(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((f,_,g)=>{let{paramName:w,isOptional:C}=_;if(w==="*"){let k=u[g]||"";a=s.slice(0,s.length-k.length).replace(/(.)\/+$/,"$1")}const b=u[g];return C&&!b?f[w]=void 0:f[w]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:a,pattern:t}}function pb(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),US(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,h)=>(i.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function mb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return US(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function WS(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const Ta=t=>t.join("/").replace(/\/\/+/g,"/"),_b=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function gb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const HS=["post","put","patch","delete"];new Set(HS);const vb=["get",...HS];new Set(vb);/**
 * React Router v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bd(){return Bd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Bd.apply(this,arguments)}const yb=$.createContext(null),wb=$.createContext(null),$S=$.createContext(null),zf=$.createContext(null),Bf=$.createContext({outlet:null,matches:[],isDataRoute:!1}),qS=$.createContext(null);function Jg(){return $.useContext(zf)!=null}function Eb(){return Jg()||En(!1),$.useContext(zf).location}function Tb(t,e){return Ib(t,e)}function Ib(t,e,n,i){Jg()||En(!1);let{navigator:r}=$.useContext($S),{matches:s}=$.useContext(Bf),a=s[s.length-1],u=a?a.params:{};a&&a.pathname;let h=a?a.pathnameBase:"/";a&&a.route;let f=Eb(),_;if(e){var g;let D=typeof e=="string"?jf(e):e;h==="/"||(g=D.pathname)!=null&&g.startsWith(h)||En(!1),_=D}else _=f;let w=_.pathname||"/",C=w;if(h!=="/"){let D=h.replace(/^\//,"").split("/");C="/"+w.replace(/^\//,"").split("/").slice(D.length).join("/")}let b=nb(t,{pathname:C}),k=Ab(b&&b.map(D=>Object.assign({},D,{params:Object.assign({},u,D.params),pathname:Ta([h,r.encodeLocation?r.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?h:Ta([h,r.encodeLocation?r.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),s,n,i);return e&&k?$.createElement(zf.Provider,{value:{location:Bd({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:$r.Pop}},k):k}function Sb(){let t=Nb(),e=gb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return $.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),n?$.createElement("pre",{style:r},n):null,null)}const Cb=$.createElement(Sb,null);class xb extends $.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?$.createElement(Bf.Provider,{value:this.props.routeContext},$.createElement(qS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Pb(t){let{routeContext:e,match:n,children:i}=t,r=$.useContext(yb);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),$.createElement(Bf.Provider,{value:e},i)}function Ab(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=(r=n)==null?void 0:r.errors;if(u!=null){let _=a.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);_>=0||En(!1),a=a.slice(0,Math.min(a.length,_+1))}let h=!1,f=-1;if(n&&i&&i.v7_partialHydration)for(let _=0;_<a.length;_++){let g=a[_];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=_),g.route.id){let{loaderData:w,errors:C}=n,b=g.route.loader&&w[g.route.id]===void 0&&(!C||C[g.route.id]===void 0);if(g.route.lazy||b){h=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((_,g,w)=>{let C,b=!1,k=null,D=null;n&&(C=u&&g.route.id?u[g.route.id]:void 0,k=g.route.errorElement||Cb,h&&(f<0&&w===0?(b=!0,D=null):f===w&&(b=!0,D=g.route.hydrateFallbackElement||null)));let A=e.concat(a.slice(0,w+1)),P=()=>{let N;return C?N=k:b?N=D:g.route.Component?N=$.createElement(g.route.Component,null):g.route.element?N=g.route.element:N=_,$.createElement(Pb,{match:g,routeContext:{outlet:_,matches:A,isDataRoute:n!=null},children:N})};return n&&(g.route.ErrorBoundary||g.route.errorElement||w===0)?$.createElement(xb,{location:n.location,revalidation:n.revalidation,component:k,error:C,children:P(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):P()},null)}var __=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(__||{});function Rb(t){let e=$.useContext(wb);return e||En(!1),e}function kb(t){let e=$.useContext(Bf);return e||En(!1),e}function bb(t){let e=kb(),n=e.matches[e.matches.length-1];return n.route.id||En(!1),n.route.id}function Nb(){var t;let e=$.useContext(qS),n=Rb(__.UseRouteError),i=bb(__.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function Vs(t){En(!1)}function Lb(t){let{basename:e="/",children:n=null,location:i,navigationType:r=$r.Pop,navigator:s,static:a=!1,future:u}=t;Jg()&&En(!1);let h=e.replace(/^\/*/,"/"),f=$.useMemo(()=>({basename:h,navigator:s,static:a,future:Bd({v7_relativeSplatPath:!1},u)}),[h,u,s,a]);typeof i=="string"&&(i=jf(i));let{pathname:_="/",search:g="",hash:w="",state:C=null,key:b="default"}=i,k=$.useMemo(()=>{let D=WS(_,h);return D==null?null:{location:{pathname:D,search:g,hash:w,state:C,key:b},navigationType:r}},[h,_,g,w,C,b,r]);return k==null?null:$.createElement($S.Provider,{value:f},$.createElement(zf.Provider,{children:n,value:k}))}function Ob(t){let{children:e,location:n}=t;return Tb(g_(e),n)}new Promise(()=>{});function g_(t,e){e===void 0&&(e=[]);let n=[];return $.Children.forEach(t,(i,r)=>{if(!$.isValidElement(i))return;let s=[...e,r];if(i.type===$.Fragment){n.push.apply(n,g_(i.props.children,s));return}i.type!==Vs&&En(!1),!i.props.index||!i.props.children||En(!1);let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=g_(i.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Db="6";try{window.__reactRouterVersion=Db}catch{}const Mb="startTransition",g0=BA[Mb];function Fb(t){let{basename:e,children:n,future:i,window:r}=t,s=$.useRef();s.current==null&&(s.current=Jk({window:r,v5Compat:!0}));let a=s.current,[u,h]=$.useState({action:a.action,location:a.location}),{v7_startTransition:f}=i||{},_=$.useCallback(g=>{f&&g0?g0(()=>h(g)):h(g)},[h,f]);return $.useLayoutEffect(()=>a.listen(_),[a,_]),$.createElement(Lb,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a,future:i})}var v0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(v0||(v0={}));var y0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(y0||(y0={}));const w0=[{name:"About Us",id:"AboutUs"},{name:"Service",id:"service"},{name:"Newsletter",id:"newsletter"},{name:"Events",id:"events"}];var E0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee=function(t,e){if(!t)throw Xa(e)},Xa=function(t){return new Error("Firebase Database ("+GS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Vb=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],a=t[n++],u=t[n++],h=((r&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},ev={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],a=r+1<t.length,u=a?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,_=s>>2,g=(s&3)<<4|u>>4;let w=(u&15)<<2|f>>6,C=f&63;h||(C=64,a||(w=64)),i.push(n[_],n[g],n[w],n[C])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(KS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Vb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||u==null||f==null||g==null)throw new Ub;const w=s<<2|u>>4;if(i.push(w),f!==64){const C=u<<4&240|f>>2;if(i.push(C),g!==64){const b=f<<6&192|g;i.push(b)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Ub extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZS=function(t){const e=KS(t);return ev.encodeByteArray(e,!0)},Wd=function(t){return ZS(t).replace(/\./g,"")},Hd=function(t){try{return ev.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(t){return QS(void 0,t)}function QS(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!zb(n)||(t[n]=QS(t[n],e[n]));return t}function zb(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=()=>Bb().__FIREBASE_DEFAULTS__,Hb=()=>{if(typeof process>"u"||typeof E0>"u")return;const t=E0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$b=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Hd(t[1]);return e&&JSON.parse(e)},Wf=()=>{try{return Wb()||Hb()||$b()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},YS=t=>{var e,n;return(n=(e=Wf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},tv=t=>{const e=YS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},XS=()=>{var t;return(t=Wf())===null||t===void 0?void 0:t.config},JS=t=>{var e;return(e=Wf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Wd(JSON.stringify(n)),Wd(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function qb(){var t;const e=(t=Wf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Gb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function eC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Kb(){const t=$t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function tC(){return GS.NODE_ADMIN===!0}function Zb(){return!qb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qb(){try{return typeof indexedDB=="object"}catch{return!1}}function Yb(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="FirebaseError";class Li extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Xb,Object.setPrototypeOf(this,Li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ic.prototype.create)}}class Ic{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?Jb(s,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new Li(r,u,i)}}function Jb(t,e){return t.replace(eN,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const eN=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(t){return JSON.parse(t)}function Mt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=function(t){let e={},n={},i={},r="";try{const s=t.split(".");e=Ju(Hd(s[0])||""),n=Ju(Hd(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}},tN=function(t){const e=nC(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},nN=function(t){const e=nC(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Fa(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function v_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $d(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function qd(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],a=e[r];if(T0(s)&&T0(a)){if(!qd(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function T0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function cu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function hu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let g=0;g<16;g++)i[g]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let g=0;g<16;g++)i[g]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let g=16;g<80;g++){const w=i[g-3]^i[g-8]^i[g-14]^i[g-16];i[g]=(w<<1|w>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],a=this.chain_[2],u=this.chain_[3],h=this.chain_[4],f,_;for(let g=0;g<80;g++){g<40?g<20?(f=u^s&(a^u),_=1518500249):(f=s^a^u,_=1859775393):g<60?(f=s&a|u&(s|a),_=2400959708):(f=s^a^u,_=3395469782);const w=(r<<5|r>>>27)+f+h+_+i[g]&4294967295;h=u,u=a,a=(s<<30|s>>>2)&4294967295,s=r,r=w}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let r=0;const s=this.buf_;let a=this.inbuf_;for(;r<n;){if(a===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(s[a]=e.charCodeAt(r),++a,++r,a===this.blockSize){this.compress_(s),a=0;break}}else for(;r<n;)if(s[a]=e[r],++a,++r,a===this.blockSize){this.compress_(s),a=0;break}}this.inbuf_=a,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}}function rN(t,e){const n=new sN(t,e);return n.subscribe.bind(n)}class sN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");oN(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=im),r.error===void 0&&(r.error=im),r.complete===void 0&&(r.complete=im);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function im(){}function rv(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const s=r-55296;i++,ee(i<t.length,"Surrogate pair missing trail surrogate.");const a=t.charCodeAt(i)-56320;r=65536+(s<<10)+a}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},$f=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t){return t&&t._delegate?t._delegate:t}class hr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Hf;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cN(e))try{this.getOrInitializeService({instanceIdentifier:Us})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Us){return this.instances.has(e)}getOptions(e=Us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);i===u&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:uN(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Us){return this.component?this.component.multipleInstances?e:Us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uN(t){return t===Us?void 0:t}function cN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new lN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const dN={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},fN=ke.INFO,pN={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},mN=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=pN[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qf{constructor(e){this.name=e,this._logLevel=fN,this._logHandler=mN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const _N=(t,e)=>e.some(n=>t instanceof n);let I0,S0;function gN(){return I0||(I0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vN(){return S0||(S0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iC=new WeakMap,y_=new WeakMap,rC=new WeakMap,rm=new WeakMap,sv=new WeakMap;function yN(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(ts(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&iC.set(n,t)}).catch(()=>{}),sv.set(e,t),e}function wN(t){if(y_.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});y_.set(t,e)}let w_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return y_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ts(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EN(t){w_=t(w_)}function TN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(sm(this),e,...n);return rC.set(i,e.sort?e.sort():[e]),ts(i)}:vN().includes(t)?function(...e){return t.apply(sm(this),e),ts(iC.get(this))}:function(...e){return ts(t.apply(sm(this),e))}}function IN(t){return typeof t=="function"?TN(t):(t instanceof IDBTransaction&&wN(t),_N(t,gN())?new Proxy(t,w_):t)}function ts(t){if(t instanceof IDBRequest)return yN(t);if(rm.has(t))return rm.get(t);const e=IN(t);return e!==t&&(rm.set(t,e),sv.set(e,t)),e}const sm=t=>sv.get(t);function SN(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),u=ts(a);return i&&a.addEventListener("upgradeneeded",h=>{i(ts(a.result),h.oldVersion,h.newVersion,ts(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{s&&h.addEventListener("close",()=>s()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const CN=["get","getKey","getAll","getAllKeys","count"],xN=["put","add","delete","clear"],om=new Map;function C0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(om.get(e))return om.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=xN.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||CN.includes(n)))return;const s=async function(a,...u){const h=this.transaction(a,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&h.done]))[0]};return om.set(e,s),s}EN(t=>({...t,get:(e,n,i)=>C0(e,n)||t.get(e,n,i),has:(e,n)=>!!C0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AN(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function AN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const E_="@firebase/app",x0="0.10.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new qf("@firebase/app"),RN="@firebase/app-compat",kN="@firebase/analytics-compat",bN="@firebase/analytics",NN="@firebase/app-check-compat",LN="@firebase/app-check",ON="@firebase/auth",DN="@firebase/auth-compat",MN="@firebase/database",FN="@firebase/database-compat",VN="@firebase/functions",UN="@firebase/functions-compat",jN="@firebase/installations",zN="@firebase/installations-compat",BN="@firebase/messaging",WN="@firebase/messaging-compat",HN="@firebase/performance",$N="@firebase/performance-compat",qN="@firebase/remote-config",GN="@firebase/remote-config-compat",KN="@firebase/storage",ZN="@firebase/storage-compat",QN="@firebase/firestore",YN="@firebase/vertexai-preview",XN="@firebase/firestore-compat",JN="firebase",eL="10.12.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="[DEFAULT]",tL={[E_]:"fire-core",[RN]:"fire-core-compat",[bN]:"fire-analytics",[kN]:"fire-analytics-compat",[LN]:"fire-app-check",[NN]:"fire-app-check-compat",[ON]:"fire-auth",[DN]:"fire-auth-compat",[MN]:"fire-rtdb",[FN]:"fire-rtdb-compat",[VN]:"fire-fn",[UN]:"fire-fn-compat",[jN]:"fire-iid",[zN]:"fire-iid-compat",[BN]:"fire-fcm",[WN]:"fire-fcm-compat",[HN]:"fire-perf",[$N]:"fire-perf-compat",[qN]:"fire-rc",[GN]:"fire-rc-compat",[KN]:"fire-gcs",[ZN]:"fire-gcs-compat",[QN]:"fire-fst",[XN]:"fire-fst-compat",[YN]:"fire-vertex","fire-js":"fire-js",[JN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd=new Map,nL=new Map,I_=new Map;function P0(t,e){try{t.container.addComponent(e)}catch(n){no.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ls(t){const e=t.name;if(I_.has(e))return no.debug(`There were multiple attempts to register component ${e}.`),!1;I_.set(e,t);for(const n of Gd.values())P0(n,t);for(const n of nL.values())P0(n,t);return!0}function Sc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ii(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ns=new Ic("app","Firebase",iL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=eL;function sC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:T_,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw ns.create("bad-app-name",{appName:String(r)});if(n||(n=XS()),!n)throw ns.create("no-options");const s=Gd.get(r);if(s){if(qd(n,s.options)&&qd(i,s.config))return s;throw ns.create("duplicate-app",{appName:r})}const a=new hN(r);for(const h of I_.values())a.addComponent(h);const u=new rL(n,i,a);return Gd.set(r,u),u}function Gf(t=T_){const e=Gd.get(t);if(!e&&t===T_&&XS())return sC();if(!e)throw ns.create("no-app",{appName:t});return e}function Kn(t,e,n){var i;let r=(i=tL[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const u=[`Unable to register library "${r}" with version "${e}":`];s&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),no.warn(u.join(" "));return}ls(new hr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL="firebase-heartbeat-database",oL=1,ec="firebase-heartbeat-store";let am=null;function oC(){return am||(am=SN(sL,oL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ec)}catch(n){console.warn(n)}}}}).catch(t=>{throw ns.create("idb-open",{originalErrorMessage:t.message})})),am}async function aL(t){try{const n=(await oC()).transaction(ec),i=await n.objectStore(ec).get(aC(t));return await n.done,i}catch(e){if(e instanceof Li)no.warn(e.message);else{const n=ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});no.warn(n.message)}}}async function A0(t,e){try{const i=(await oC()).transaction(ec,"readwrite");await i.objectStore(ec).put(e,aC(t)),await i.done}catch(n){if(n instanceof Li)no.warn(n.message);else{const i=ns.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});no.warn(i.message)}}}function aC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=1024,uL=30*24*60*60*1e3;class cL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dL(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=R0();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=uL}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=R0(),{heartbeatsToSend:i,unsentEntries:r}=hL(this._heartbeatsCache.heartbeats),s=Wd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function R0(){return new Date().toISOString().substring(0,10)}function hL(t,e=lL){const n=[];let i=t.slice();for(const r of t){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),k0(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),k0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class dL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Qb()?Yb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await aL(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return A0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return A0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function k0(t){return Wd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(t){ls(new hr("platform-logger",e=>new PN(e),"PRIVATE")),ls(new hr("heartbeat",e=>new cL(e),"PRIVATE")),Kn(E_,x0,t),Kn(E_,x0,"esm2017"),Kn("fire-js","")}fL("");var pL="firebase",mL="10.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kn(pL,mL,"app");function ov(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function lC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _L=lC,uC=new Ic("auth","Firebase",lC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd=new qf("@firebase/auth");function gL(t,...e){Kd.logLevel<=ke.WARN&&Kd.warn(`Auth (${gs}): ${t}`,...e)}function od(t,...e){Kd.logLevel<=ke.ERROR&&Kd.error(`Auth (${gs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t,...e){throw av(t,...e)}function Pi(t,...e){return av(t,...e)}function cC(t,e,n){const i=Object.assign(Object.assign({},_L()),{[e]:n});return new Ic("auth","Firebase",i).create(e,{appName:t.name})}function rr(t){return cC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function av(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return uC.create(t,...e)}function he(t,e,...n){if(!t)throw av(e,...n)}function Ji(t){const e="INTERNAL ASSERTION FAILED: "+t;throw od(e),new Error(e)}function dr(t,e){t||Ji(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function vL(){return b0()==="http:"||b0()==="https:"}function b0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vL()||Gb()||"connection"in navigator)?navigator.onLine:!0}function wL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,n){this.shortDelay=e,this.longDelay=n,dr(n>e,"Short delay should be less than long delay!"),this.isMobile=iv()||eC()}get(){return yL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(t,e){dr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=new Cc(3e4,6e4);function vs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ys(t,e,n,i,r={}){return dC(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const u=Ja(Object.assign({key:t.config.apiKey},a)).slice(1),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),hC.fetch()(fC(t,t.config.apiHost,n,u),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},s))})}async function dC(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},EL),e);try{const r=new SL(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Uh(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const u=s.ok?a.errorMessage:a.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Uh(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw Uh(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw Uh(t,"user-disabled",a);const _=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw cC(t,_,f);pi(t,_)}}catch(r){if(r instanceof Li)throw r;pi(t,"network-request-failed",{message:String(r)})}}async function xc(t,e,n,i,r={}){const s=await ys(t,e,n,i,r);return"mfaPendingCredential"in s&&pi(t,"multi-factor-auth-required",{_serverResponse:s}),s}function fC(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?lv(t.config,r):`${t.config.apiScheme}://${r}`}function IL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SL{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Pi(this.auth,"network-request-failed")),TL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Uh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Pi(t,e,i);return r.customData._tokenResponse=n,r}function N0(t){return t!==void 0&&t.enterprise!==void 0}class CL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return IL(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function xL(t,e){return ys(t,"GET","/v2/recaptchaConfig",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PL(t,e){return ys(t,"POST","/v1/accounts:delete",e)}async function pC(t,e){return ys(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AL(t,e=!1){const n=Ge(t),i=await n.getIdToken(e),r=uv(i);he(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Cu(lm(r.auth_time)),issuedAtTime:Cu(lm(r.iat)),expirationTime:Cu(lm(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function lm(t){return Number(t)*1e3}function uv(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return od("JWT malformed, contained fewer than 3 sections"),null;try{const r=Hd(n);return r?JSON.parse(r):(od("Failed to decode base64 JWT payload"),null)}catch(r){return od("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function L0(t){const e=uv(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tc(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Li&&RL(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function RL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cu(this.lastLoginAt),this.creationTime=Cu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zd(t){var e;const n=t.auth,i=await t.getIdToken(),r=await tc(t,pC(n,{idToken:i}));he(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?mC(s.providerUserInfo):[],u=NL(t.providerData,a),h=t.isAnonymous,f=!(t.email&&s.passwordHash)&&!(u!=null&&u.length),_=h?f:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new C_(s.createdAt,s.lastLoginAt),isAnonymous:_};Object.assign(t,g)}async function bL(t){const e=Ge(t);await Zd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NL(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function mC(t){return t.map(e=>{var{providerId:n}=e,i=ov(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LL(t,e){const n=await dC(t,{},async()=>{const i=Ja({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=fC(t,r,"/v1/token",`key=${s}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",hC.fetch()(a,{method:"POST",headers:u,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function OL(t,e){return ys(t,"POST","/v2/accounts:revokeToken",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):L0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){he(e.length!==0,"internal-error");const n=L0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await LL(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new Ia;return i&&(he(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(he(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(he(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ia,this.toJSON())}_performRefresh(){return Ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class er{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=ov(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new C_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await tc(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return AL(this,e)}reload(){return bL(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new er(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Zd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ii(this.auth.app))return Promise.reject(rr(this.auth));const e=await this.getIdToken();return await tc(this,PL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,a,u,h,f,_;const g=(i=n.displayName)!==null&&i!==void 0?i:void 0,w=(r=n.email)!==null&&r!==void 0?r:void 0,C=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,b=(a=n.photoURL)!==null&&a!==void 0?a:void 0,k=(u=n.tenantId)!==null&&u!==void 0?u:void 0,D=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,A=(f=n.createdAt)!==null&&f!==void 0?f:void 0,P=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:N,emailVerified:j,isAnonymous:G,providerData:Z,stsTokenManager:x}=n;he(N&&x,e,"internal-error");const I=Ia.fromJSON(this.name,x);he(typeof N=="string",e,"internal-error"),Or(g,e.name),Or(w,e.name),he(typeof j=="boolean",e,"internal-error"),he(typeof G=="boolean",e,"internal-error"),Or(C,e.name),Or(b,e.name),Or(k,e.name),Or(D,e.name),Or(A,e.name),Or(P,e.name);const R=new er({uid:N,auth:e,email:w,emailVerified:j,displayName:g,isAnonymous:G,photoURL:b,phoneNumber:C,tenantId:k,stsTokenManager:I,createdAt:A,lastLoginAt:P});return Z&&Array.isArray(Z)&&(R.providerData=Z.map(O=>Object.assign({},O))),D&&(R._redirectEventId=D),R}static async _fromIdTokenResponse(e,n,i=!1){const r=new Ia;r.updateFromServerResponse(n);const s=new er({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Zd(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];he(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?mC(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),u=new Ia;u.updateFromIdToken(i);const h=new er({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new C_(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=new Map;function tr(t){dr(t instanceof Function,"Expected a class definition");let e=O0.get(t);return e?(dr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,O0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_C.type="NONE";const D0=_C;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(t,e,n){return`firebase:${t}:${e}:${n}`}class Sa{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=ad(this.userKey,r.apiKey,s),this.fullPersistenceKey=ad("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?er._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Sa(tr(D0),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let s=r[0]||tr(D0);const a=ad(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const _=await f._get(a);if(_){const g=er._fromJSON(e,_);f!==s&&(u=g),s=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!s._shouldAllowMigration||!h.length?new Sa(s,e,i):(s=h[0],u&&await s._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==s)try{await f._remove(a)}catch{}})),new Sa(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(EC(e))return"Blackberry";if(TC(e))return"Webos";if(cv(e))return"Safari";if((e.includes("chrome/")||vC(e))&&!e.includes("edge/"))return"Chrome";if(wC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function gC(t=$t()){return/firefox\//i.test(t)}function cv(t=$t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vC(t=$t()){return/crios\//i.test(t)}function yC(t=$t()){return/iemobile/i.test(t)}function wC(t=$t()){return/android/i.test(t)}function EC(t=$t()){return/blackberry/i.test(t)}function TC(t=$t()){return/webos/i.test(t)}function Kf(t=$t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function DL(t=$t()){var e;return Kf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ML(){return Kb()&&document.documentMode===10}function IC(t=$t()){return Kf(t)||wC(t)||TC(t)||EC(t)||/windows phone/i.test(t)||yC(t)}function FL(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(t,e=[]){let n;switch(t){case"Browser":n=M0($t());break;case"Worker":n=`${M0($t())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gs}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,u)=>{try{const h=e(s);a(h)}catch(h){u(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UL(t,e={}){return ys(t,"GET","/v2/passwordPolicy",vs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL=6;class zL{constructor(e){var n,i,r,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:jL,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,a,u;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(i=h.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(r=h.containsLowercaseLetter)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(s=h.containsUppercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsNumericCharacter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(u=h.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),h}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new F0(this),this.idTokenSubscription=new F0(this),this.beforeStateQueue=new VL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=tr(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Sa.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await pC(this,{idToken:e}),i=await er._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ii(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===u)&&(h!=null&&h.user)&&(r=h.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Zd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ii(this.app))return Promise.reject(rr(this));const n=e?Ge(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ii(this.app)?Promise.reject(rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ii(this.app)?Promise.reject(rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(tr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UL(this),n=new zL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ic("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await OL(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&tr(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await Sa.create(this,[tr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(u,this,"internal-error"),u.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,r);return()=>{a=!0,h()}}else{const h=e.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&gL(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function _o(t){return Ge(t)}class F0{constructor(e){this.auth=e,this.observer=null,this.addObserver=rN(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WL(t){Zf=t}function CC(t){return Zf.loadJS(t)}function HL(){return Zf.recaptchaEnterpriseScript}function $L(){return Zf.gapiScript}function qL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const GL="recaptcha-enterprise",KL="NO_RECAPTCHA";class ZL{constructor(e){this.type=GL,this.auth=_o(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,u)=>{xL(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new CL(h);return s.tenantId==null?s._agentRecaptchaConfig=f:s._tenantRecaptchaConfigs[s.tenantId]=f,a(f.siteKey)}}).catch(h=>{u(h)})})}function r(s,a,u){const h=window.grecaptcha;N0(h)?h.enterprise.ready(()=>{h.enterprise.execute(s,{action:e}).then(f=>{a(f)}).catch(()=>{a(KL)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{i(this.auth).then(u=>{if(!n&&N0(window.grecaptcha))r(u,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let h=HL();h.length!==0&&(h+=u),CC(h).then(()=>{r(u,s,a)}).catch(f=>{a(f)})}}).catch(u=>{a(u)})})}}async function V0(t,e,n,i=!1){const r=new ZL(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const a=Object.assign({},e);return i?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function x_(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await V0(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await V0(t,e,n,n==="getOobCode");return i(t,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QL(t,e){const n=Sc(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(qd(s,e??{}))return r;pi(r,"already-initialized")}return n.initialize({options:e})}function YL(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(tr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function XL(t,e,n){const i=_o(t);he(i._canInitEmulator,i,"emulator-config-failed"),he(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=xC(e),{host:a,port:u}=JL(e),h=u===null?"":`:${u}`;i.config.emulator={url:`${s}//${a}${h}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),eO()}function xC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function JL(t){const e=xC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:U0(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:U0(a)}}}function U0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function eO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ji("not implemented")}_getIdTokenResponse(e){return Ji("not implemented")}_linkToIdToken(e,n){return Ji("not implemented")}_getReauthenticationResolver(e){return Ji("not implemented")}}async function tO(t,e){return ys(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nO(t,e){return xc(t,"POST","/v1/accounts:signInWithPassword",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iO(t,e){return xc(t,"POST","/v1/accounts:signInWithEmailLink",vs(t,e))}async function rO(t,e){return xc(t,"POST","/v1/accounts:signInWithEmailLink",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc extends hv{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new nc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new nc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return x_(e,n,"signInWithPassword",nO);case"emailLink":return iO(e,{email:this._email,oobCode:this._password});default:pi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return x_(e,i,"signUpPassword",tO);case"emailLink":return rO(e,{idToken:n,email:this._email,oobCode:this._password});default:pi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ca(t,e){return xc(t,"POST","/v1/accounts:signInWithIdp",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO="http://localhost";class io extends hv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new io(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):pi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=ov(n,["providerId","signInMethod"]);if(!i||!r)return null;const a=new io(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Ca(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ca(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ca(e,n)}buildRequest(){const e={requestUri:sO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ja(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aO(t){const e=cu(hu(t)).link,n=e?cu(hu(e)).deep_link_id:null,i=cu(hu(t)).deep_link_id;return(i?cu(hu(i)).link:null)||i||n||e||t}class dv{constructor(e){var n,i,r,s,a,u;const h=cu(hu(e)),f=(n=h.apiKey)!==null&&n!==void 0?n:null,_=(i=h.oobCode)!==null&&i!==void 0?i:null,g=oO((r=h.mode)!==null&&r!==void 0?r:null);he(f&&_&&g,"argument-error"),this.apiKey=f,this.operation=g,this.code=_,this.continueUrl=(s=h.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=h.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(u=h.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=aO(e);try{return new dv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(){this.providerId=el.PROVIDER_ID}static credential(e,n){return nc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=dv.parseLink(n);return he(i,"argument-error"),nc._fromEmailAndCode(e,i.code,i.tenantId)}}el.PROVIDER_ID="password";el.EMAIL_PASSWORD_SIGN_IN_METHOD="password";el.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends PC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends Pc{constructor(){super("facebook.com")}static credential(e){return io._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ur.credential(e.oauthAccessToken)}catch{return null}}}Ur.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ur.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends Pc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return io._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Qi.credential(n,i)}catch{return null}}}Qi.GOOGLE_SIGN_IN_METHOD="google.com";Qi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends Pc{constructor(){super("github.com")}static credential(e){return io._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jr.credential(e.oauthAccessToken)}catch{return null}}}jr.GITHUB_SIGN_IN_METHOD="github.com";jr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends Pc{constructor(){super("twitter.com")}static credential(e,n){return io._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return zr.credential(n,i)}catch{return null}}}zr.TWITTER_SIGN_IN_METHOD="twitter.com";zr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lO(t,e){return xc(t,"POST","/v1/accounts:signUp",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await er._fromIdTokenResponse(e,i,r),a=j0(i);return new ro({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=j0(i);return new ro({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function j0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd extends Li{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Qd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Qd(e,n,i,r)}}function AC(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Qd._fromErrorAndOperation(t,s,e,i):s})}async function uO(t,e,n=!1){const i=await tc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ro._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cO(t,e,n=!1){const{auth:i}=t;if(Ii(i.app))return Promise.reject(rr(i));const r="reauthenticate";try{const s=await tc(t,AC(i,r,e,t),n);he(s.idToken,i,"internal-error");const a=uv(s.idToken);he(a,i,"internal-error");const{sub:u}=a;return he(t.uid===u,i,"user-mismatch"),ro._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&pi(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RC(t,e,n=!1){if(Ii(t.app))return Promise.reject(rr(t));const i="signIn",r=await AC(t,i,e),s=await ro._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function hO(t,e){return RC(_o(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kC(t){const e=_o(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dO(t,e,n){if(Ii(t.app))return Promise.reject(rr(t));const i=_o(t),a=await x_(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lO).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&kC(t),h}),u=await ro._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(u.user),u}function fO(t,e,n){return Ii(t.app)?Promise.reject(rr(t)):hO(Ge(t),el.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&kC(t),i})}function pO(t,e,n,i){return Ge(t).onIdTokenChanged(e,n,i)}function mO(t,e,n){return Ge(t).beforeAuthStateChanged(e,n)}function _O(t,e,n,i){return Ge(t).onAuthStateChanged(e,n,i)}function gO(t){return Ge(t).signOut()}const Yd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Yd,"1"),this.storage.removeItem(Yd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(){const t=$t();return cv(t)||Kf(t)}const yO=1e3,wO=10;class NC extends bC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=vO()&&FL(),this.fallbackToPolling=IC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,h)=>{this.notifyListeners(a,h)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);ML()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,wO):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},yO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}NC.type="LOCAL";const EO=NC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC extends bC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}LC.type="SESSION";const OC=LC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Qf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,s)),h=await TO(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((u,h)=>{const f=fv("",20);r.port1.start();const _=setTimeout(()=>{h(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const w=g;if(w.data.eventId===f)switch(w.data.status){case"ack":clearTimeout(_),s=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(w.data.response);break;default:clearTimeout(_),clearTimeout(s),h(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(){return window}function SO(t){Ai().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(){return typeof Ai().WorkerGlobalScope<"u"&&typeof Ai().importScripts=="function"}async function CO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function PO(){return DC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="firebaseLocalStorageDb",AO=1,Xd="firebaseLocalStorage",FC="fbase_key";class Ac{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yf(t,e){return t.transaction([Xd],e?"readwrite":"readonly").objectStore(Xd)}function RO(){const t=indexedDB.deleteDatabase(MC);return new Ac(t).toPromise()}function P_(){const t=indexedDB.open(MC,AO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Xd,{keyPath:FC})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Xd)?e(i):(i.close(),await RO(),e(await P_()))})})}async function z0(t,e,n){const i=Yf(t,!0).put({[FC]:e,value:n});return new Ac(i).toPromise()}async function kO(t,e){const n=Yf(t,!1).get(e),i=await new Ac(n).toPromise();return i===void 0?null:i.value}function B0(t,e){const n=Yf(t,!0).delete(e);return new Ac(n).toPromise()}const bO=800,NO=3;class VC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await P_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>NO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qf._getInstance(PO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await CO(),!this.activeServiceWorker)return;this.sender=new IO(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await P_();return await z0(e,Yd,"1"),await B0(e,Yd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>z0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>kO(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>B0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Yf(r,!1).getAll();return new Ac(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VC.type="LOCAL";const LO=VC;new Cc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(t,e){return e?tr(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv extends hv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ca(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ca(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ca(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function DO(t){return RC(t.auth,new pv(t),t.bypassAuthState)}function MO(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),cO(n,new pv(t),t.bypassAuthState)}async function FO(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),uO(n,new pv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:u}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DO;case"linkViaPopup":case"linkViaRedirect":return FO;case"reauthViaPopup":case"reauthViaRedirect":return MO;default:pi(this.auth,"internal-error")}}resolve(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=new Cc(2e3,1e4);class pa extends UC{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,pa.currentPopupAction&&pa.currentPopupAction.cancel(),pa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){dr(this.filter.length===1,"Popup operations only handle one event");const e=fv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VO.get())};e()}}pa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO="pendingRedirect",ld=new Map;class jO extends UC{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=ld.get(this.auth._key());if(!e){try{const i=await zO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}ld.set(this.auth._key(),e)}return this.bypassAuthState||ld.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zO(t,e){const n=HO(e),i=WO(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function BO(t,e){ld.set(t._key(),e)}function WO(t){return tr(t._redirectPersistence)}function HO(t){return ad(UO,t.config.apiKey,t.name)}async function $O(t,e,n=!1){if(Ii(t.app))return Promise.reject(rr(t));const i=_o(t),r=OO(i,e),a=await new jO(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO=10*60*1e3;class GO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!jC(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Pi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qO&&this.cachedEventUids.clear(),this.cachedEventUids.has(W0(e))}saveEventToCache(e){this.cachedEventUids.add(W0(e)),this.lastProcessedEventTime=Date.now()}}function W0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function jC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function KO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZO(t,e={}){return ys(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YO=/^https?/;async function XO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ZO(t);for(const n of e)try{if(JO(n))return}catch{}pi(t,"unauthorized-domain")}function JO(t){const e=S_(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!YO.test(n))return!1;if(QO.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=new Cc(3e4,6e4);function H0(){const t=Ai().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function tD(t){return new Promise((e,n)=>{var i,r,s;function a(){H0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{H0(),n(Pi(t,"network-request-failed"))},timeout:eD.get()})}if(!((r=(i=Ai().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Ai().gapi)===null||s===void 0)&&s.load)a();else{const u=qL("iframefcb");return Ai()[u]=()=>{gapi.load?a():n(Pi(t,"network-request-failed"))},CC(`${$L()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw ud=null,e})}let ud=null;function nD(t){return ud=ud||tD(t),ud}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=new Cc(5e3,15e3),rD="__/auth/iframe",sD="emulator/auth/iframe",oD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lD(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?lv(e,sD):`https://${t.config.authDomain}/${rD}`,i={apiKey:e.apiKey,appName:t.name,v:gs},r=aD.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Ja(i).slice(1)}`}async function uD(t){const e=await nD(t),n=Ai().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:lD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oD,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=Pi(t,"network-request-failed"),u=Ai().setTimeout(()=>{s(a)},iD.get());function h(){Ai().clearTimeout(u),r(i)}i.ping(h).then(h,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hD=500,dD=600,fD="_blank",pD="http://localhost";class $0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mD(t,e,n,i=hD,r=dD){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const h=Object.assign(Object.assign({},cD),{width:i.toString(),height:r.toString(),top:s,left:a}),f=$t().toLowerCase();n&&(u=vC(f)?fD:n),gC(f)&&(e=e||pD,h.scrollbars="yes");const _=Object.entries(h).reduce((w,[C,b])=>`${w}${C}=${b},`,"");if(DL(f)&&u!=="_self")return _D(e||"",u),new $0(null);const g=window.open(e||"",u,_);he(g,t,"popup-blocked");try{g.focus()}catch{}return new $0(g)}function _D(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD="__/auth/handler",vD="emulator/auth/handler",yD=encodeURIComponent("fac");async function q0(t,e,n,i,r,s){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:gs,eventId:r};if(e instanceof PC){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",v_(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,g]of Object.entries({}))a[_]=g}if(e instanceof Pc){const _=e.getScopes().filter(g=>g!=="");_.length>0&&(a.scopes=_.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const _ of Object.keys(u))u[_]===void 0&&delete u[_];const h=await t._getAppCheckToken(),f=h?`#${yD}=${encodeURIComponent(h)}`:"";return`${wD(t)}?${Ja(u).slice(1)}${f}`}function wD({config:t}){return t.emulator?lv(t,vD):`https://${t.authDomain}/${gD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="webStorageSupport";class ED{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OC,this._completeRedirectFn=$O,this._overrideRedirectResult=BO}async _openPopup(e,n,i,r){var s;dr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await q0(e,n,i,S_(),r);return mD(e,a,fv())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await q0(e,n,i,S_(),r);return SO(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(dr(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await uD(e),i=new GO(e);return n.register("authEvent",r=>(he(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(um,{type:um},r=>{var s;const a=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[um];a!==void 0&&n(!!a),pi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=XO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return IC()||cv()||Kf()}}const TD=ED;var G0="@firebase/auth",K0="1.7.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CD(t){ls(new hr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;he(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SC(t)},f=new BL(i,r,s,h);return YL(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ls(new hr("auth-internal",e=>{const n=_o(e.getProvider("auth").getImmediate());return(i=>new ID(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kn(G0,K0,SD(t)),Kn(G0,K0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=5*60,PD=JS("authIdTokenMaxAge")||xD;let Z0=null;const AD=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>PD)return;const r=n==null?void 0:n.token;Z0!==r&&(Z0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function zC(t=Gf()){const e=Sc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=QL(t,{popupRedirectResolver:TD,persistence:[LO,EO,OC]}),i=JS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=AD(s.toString());mO(n,a,()=>a(n.currentUser)),pO(n,u=>a(u))}}const r=YS("auth");return r&&XL(n,`http://${r}`),n}function RD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}WL({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Pi("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",RD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CD("Browser");var Q0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zs,BC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,I){function R(){}R.prototype=I.prototype,x.D=I.prototype,x.prototype=new R,x.prototype.constructor=x,x.C=function(O,V,U){for(var F=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)F[ot-2]=arguments[ot];return I.prototype[V].apply(O,F)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(x,I,R){R||(R=0);var O=Array(16);if(typeof I=="string")for(var V=0;16>V;++V)O[V]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(V=0;16>V;++V)O[V]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=x.g[0],R=x.g[1],V=x.g[2];var U=x.g[3],F=I+(U^R&(V^U))+O[0]+3614090360&4294967295;I=R+(F<<7&4294967295|F>>>25),F=U+(V^I&(R^V))+O[1]+3905402710&4294967295,U=I+(F<<12&4294967295|F>>>20),F=V+(R^U&(I^R))+O[2]+606105819&4294967295,V=U+(F<<17&4294967295|F>>>15),F=R+(I^V&(U^I))+O[3]+3250441966&4294967295,R=V+(F<<22&4294967295|F>>>10),F=I+(U^R&(V^U))+O[4]+4118548399&4294967295,I=R+(F<<7&4294967295|F>>>25),F=U+(V^I&(R^V))+O[5]+1200080426&4294967295,U=I+(F<<12&4294967295|F>>>20),F=V+(R^U&(I^R))+O[6]+2821735955&4294967295,V=U+(F<<17&4294967295|F>>>15),F=R+(I^V&(U^I))+O[7]+4249261313&4294967295,R=V+(F<<22&4294967295|F>>>10),F=I+(U^R&(V^U))+O[8]+1770035416&4294967295,I=R+(F<<7&4294967295|F>>>25),F=U+(V^I&(R^V))+O[9]+2336552879&4294967295,U=I+(F<<12&4294967295|F>>>20),F=V+(R^U&(I^R))+O[10]+4294925233&4294967295,V=U+(F<<17&4294967295|F>>>15),F=R+(I^V&(U^I))+O[11]+2304563134&4294967295,R=V+(F<<22&4294967295|F>>>10),F=I+(U^R&(V^U))+O[12]+1804603682&4294967295,I=R+(F<<7&4294967295|F>>>25),F=U+(V^I&(R^V))+O[13]+4254626195&4294967295,U=I+(F<<12&4294967295|F>>>20),F=V+(R^U&(I^R))+O[14]+2792965006&4294967295,V=U+(F<<17&4294967295|F>>>15),F=R+(I^V&(U^I))+O[15]+1236535329&4294967295,R=V+(F<<22&4294967295|F>>>10),F=I+(V^U&(R^V))+O[1]+4129170786&4294967295,I=R+(F<<5&4294967295|F>>>27),F=U+(R^V&(I^R))+O[6]+3225465664&4294967295,U=I+(F<<9&4294967295|F>>>23),F=V+(I^R&(U^I))+O[11]+643717713&4294967295,V=U+(F<<14&4294967295|F>>>18),F=R+(U^I&(V^U))+O[0]+3921069994&4294967295,R=V+(F<<20&4294967295|F>>>12),F=I+(V^U&(R^V))+O[5]+3593408605&4294967295,I=R+(F<<5&4294967295|F>>>27),F=U+(R^V&(I^R))+O[10]+38016083&4294967295,U=I+(F<<9&4294967295|F>>>23),F=V+(I^R&(U^I))+O[15]+3634488961&4294967295,V=U+(F<<14&4294967295|F>>>18),F=R+(U^I&(V^U))+O[4]+3889429448&4294967295,R=V+(F<<20&4294967295|F>>>12),F=I+(V^U&(R^V))+O[9]+568446438&4294967295,I=R+(F<<5&4294967295|F>>>27),F=U+(R^V&(I^R))+O[14]+3275163606&4294967295,U=I+(F<<9&4294967295|F>>>23),F=V+(I^R&(U^I))+O[3]+4107603335&4294967295,V=U+(F<<14&4294967295|F>>>18),F=R+(U^I&(V^U))+O[8]+1163531501&4294967295,R=V+(F<<20&4294967295|F>>>12),F=I+(V^U&(R^V))+O[13]+2850285829&4294967295,I=R+(F<<5&4294967295|F>>>27),F=U+(R^V&(I^R))+O[2]+4243563512&4294967295,U=I+(F<<9&4294967295|F>>>23),F=V+(I^R&(U^I))+O[7]+1735328473&4294967295,V=U+(F<<14&4294967295|F>>>18),F=R+(U^I&(V^U))+O[12]+2368359562&4294967295,R=V+(F<<20&4294967295|F>>>12),F=I+(R^V^U)+O[5]+4294588738&4294967295,I=R+(F<<4&4294967295|F>>>28),F=U+(I^R^V)+O[8]+2272392833&4294967295,U=I+(F<<11&4294967295|F>>>21),F=V+(U^I^R)+O[11]+1839030562&4294967295,V=U+(F<<16&4294967295|F>>>16),F=R+(V^U^I)+O[14]+4259657740&4294967295,R=V+(F<<23&4294967295|F>>>9),F=I+(R^V^U)+O[1]+2763975236&4294967295,I=R+(F<<4&4294967295|F>>>28),F=U+(I^R^V)+O[4]+1272893353&4294967295,U=I+(F<<11&4294967295|F>>>21),F=V+(U^I^R)+O[7]+4139469664&4294967295,V=U+(F<<16&4294967295|F>>>16),F=R+(V^U^I)+O[10]+3200236656&4294967295,R=V+(F<<23&4294967295|F>>>9),F=I+(R^V^U)+O[13]+681279174&4294967295,I=R+(F<<4&4294967295|F>>>28),F=U+(I^R^V)+O[0]+3936430074&4294967295,U=I+(F<<11&4294967295|F>>>21),F=V+(U^I^R)+O[3]+3572445317&4294967295,V=U+(F<<16&4294967295|F>>>16),F=R+(V^U^I)+O[6]+76029189&4294967295,R=V+(F<<23&4294967295|F>>>9),F=I+(R^V^U)+O[9]+3654602809&4294967295,I=R+(F<<4&4294967295|F>>>28),F=U+(I^R^V)+O[12]+3873151461&4294967295,U=I+(F<<11&4294967295|F>>>21),F=V+(U^I^R)+O[15]+530742520&4294967295,V=U+(F<<16&4294967295|F>>>16),F=R+(V^U^I)+O[2]+3299628645&4294967295,R=V+(F<<23&4294967295|F>>>9),F=I+(V^(R|~U))+O[0]+4096336452&4294967295,I=R+(F<<6&4294967295|F>>>26),F=U+(R^(I|~V))+O[7]+1126891415&4294967295,U=I+(F<<10&4294967295|F>>>22),F=V+(I^(U|~R))+O[14]+2878612391&4294967295,V=U+(F<<15&4294967295|F>>>17),F=R+(U^(V|~I))+O[5]+4237533241&4294967295,R=V+(F<<21&4294967295|F>>>11),F=I+(V^(R|~U))+O[12]+1700485571&4294967295,I=R+(F<<6&4294967295|F>>>26),F=U+(R^(I|~V))+O[3]+2399980690&4294967295,U=I+(F<<10&4294967295|F>>>22),F=V+(I^(U|~R))+O[10]+4293915773&4294967295,V=U+(F<<15&4294967295|F>>>17),F=R+(U^(V|~I))+O[1]+2240044497&4294967295,R=V+(F<<21&4294967295|F>>>11),F=I+(V^(R|~U))+O[8]+1873313359&4294967295,I=R+(F<<6&4294967295|F>>>26),F=U+(R^(I|~V))+O[15]+4264355552&4294967295,U=I+(F<<10&4294967295|F>>>22),F=V+(I^(U|~R))+O[6]+2734768916&4294967295,V=U+(F<<15&4294967295|F>>>17),F=R+(U^(V|~I))+O[13]+1309151649&4294967295,R=V+(F<<21&4294967295|F>>>11),F=I+(V^(R|~U))+O[4]+4149444226&4294967295,I=R+(F<<6&4294967295|F>>>26),F=U+(R^(I|~V))+O[11]+3174756917&4294967295,U=I+(F<<10&4294967295|F>>>22),F=V+(I^(U|~R))+O[2]+718787259&4294967295,V=U+(F<<15&4294967295|F>>>17),F=R+(U^(V|~I))+O[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(V+(F<<21&4294967295|F>>>11))&4294967295,x.g[2]=x.g[2]+V&4294967295,x.g[3]=x.g[3]+U&4294967295}i.prototype.u=function(x,I){I===void 0&&(I=x.length);for(var R=I-this.blockSize,O=this.B,V=this.h,U=0;U<I;){if(V==0)for(;U<=R;)r(this,x,U),U+=this.blockSize;if(typeof x=="string"){for(;U<I;)if(O[V++]=x.charCodeAt(U++),V==this.blockSize){r(this,O),V=0;break}}else for(;U<I;)if(O[V++]=x[U++],V==this.blockSize){r(this,O),V=0;break}}this.h=V,this.o+=I},i.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;var R=8*this.o;for(I=x.length-8;I<x.length;++I)x[I]=R&255,R/=256;for(this.u(x),x=Array(16),I=R=0;4>I;++I)for(var O=0;32>O;O+=8)x[R++]=this.g[I]>>>O&255;return x};function s(x,I){var R=u;return Object.prototype.hasOwnProperty.call(R,x)?R[x]:R[x]=I(x)}function a(x,I){this.h=I;for(var R=[],O=!0,V=x.length-1;0<=V;V--){var U=x[V]|0;O&&U==I||(R[V]=U,O=!1)}this.g=R}var u={};function h(x){return-128<=x&&128>x?s(x,function(I){return new a([I|0],0>I?-1:0)}):new a([x|0],0>x?-1:0)}function f(x){if(isNaN(x)||!isFinite(x))return g;if(0>x)return D(f(-x));for(var I=[],R=1,O=0;x>=R;O++)I[O]=x/R|0,R*=4294967296;return new a(I,0)}function _(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return D(_(x.substring(1),I));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=f(Math.pow(I,8)),O=g,V=0;V<x.length;V+=8){var U=Math.min(8,x.length-V),F=parseInt(x.substring(V,V+U),I);8>U?(U=f(Math.pow(I,U)),O=O.j(U).add(f(F))):(O=O.j(R),O=O.add(f(F)))}return O}var g=h(0),w=h(1),C=h(16777216);t=a.prototype,t.m=function(){if(k(this))return-D(this).m();for(var x=0,I=1,R=0;R<this.g.length;R++){var O=this.i(R);x+=(0<=O?O:4294967296+O)*I,I*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(b(this))return"0";if(k(this))return"-"+D(this).toString(x);for(var I=f(Math.pow(x,6)),R=this,O="";;){var V=j(R,I).g;R=A(R,V.j(I));var U=((0<R.g.length?R.g[0]:R.h)>>>0).toString(x);if(R=V,b(R))return U+O;for(;6>U.length;)U="0"+U;O=U+O}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function b(x){if(x.h!=0)return!1;for(var I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function k(x){return x.h==-1}t.l=function(x){return x=A(this,x),k(x)?-1:b(x)?0:1};function D(x){for(var I=x.g.length,R=[],O=0;O<I;O++)R[O]=~x.g[O];return new a(R,~x.h).add(w)}t.abs=function(){return k(this)?D(this):this},t.add=function(x){for(var I=Math.max(this.g.length,x.g.length),R=[],O=0,V=0;V<=I;V++){var U=O+(this.i(V)&65535)+(x.i(V)&65535),F=(U>>>16)+(this.i(V)>>>16)+(x.i(V)>>>16);O=F>>>16,U&=65535,F&=65535,R[V]=F<<16|U}return new a(R,R[R.length-1]&-2147483648?-1:0)};function A(x,I){return x.add(D(I))}t.j=function(x){if(b(this)||b(x))return g;if(k(this))return k(x)?D(this).j(D(x)):D(D(this).j(x));if(k(x))return D(this.j(D(x)));if(0>this.l(C)&&0>x.l(C))return f(this.m()*x.m());for(var I=this.g.length+x.g.length,R=[],O=0;O<2*I;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<x.g.length;V++){var U=this.i(O)>>>16,F=this.i(O)&65535,ot=x.i(V)>>>16,Oi=x.i(V)&65535;R[2*O+2*V]+=F*Oi,P(R,2*O+2*V),R[2*O+2*V+1]+=U*Oi,P(R,2*O+2*V+1),R[2*O+2*V+1]+=F*ot,P(R,2*O+2*V+1),R[2*O+2*V+2]+=U*ot,P(R,2*O+2*V+2)}for(O=0;O<I;O++)R[O]=R[2*O+1]<<16|R[2*O];for(O=I;O<2*I;O++)R[O]=0;return new a(R,0)};function P(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function N(x,I){this.g=x,this.h=I}function j(x,I){if(b(I))throw Error("division by zero");if(b(x))return new N(g,g);if(k(x))return I=j(D(x),I),new N(D(I.g),D(I.h));if(k(I))return I=j(x,D(I)),new N(D(I.g),I.h);if(30<x.g.length){if(k(x)||k(I))throw Error("slowDivide_ only works with positive integers.");for(var R=w,O=I;0>=O.l(x);)R=G(R),O=G(O);var V=Z(R,1),U=Z(O,1);for(O=Z(O,2),R=Z(R,2);!b(O);){var F=U.add(O);0>=F.l(x)&&(V=V.add(R),U=F),O=Z(O,1),R=Z(R,1)}return I=A(x,V.j(I)),new N(V,I)}for(V=g;0<=x.l(I);){for(R=Math.max(1,Math.floor(x.m()/I.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),U=f(R),F=U.j(I);k(F)||0<F.l(x);)R-=O,U=f(R),F=U.j(I);b(U)&&(U=w),V=V.add(U),x=A(x,F)}return new N(V,x)}t.A=function(x){return j(this,x).h},t.and=function(x){for(var I=Math.max(this.g.length,x.g.length),R=[],O=0;O<I;O++)R[O]=this.i(O)&x.i(O);return new a(R,this.h&x.h)},t.or=function(x){for(var I=Math.max(this.g.length,x.g.length),R=[],O=0;O<I;O++)R[O]=this.i(O)|x.i(O);return new a(R,this.h|x.h)},t.xor=function(x){for(var I=Math.max(this.g.length,x.g.length),R=[],O=0;O<I;O++)R[O]=this.i(O)^x.i(O);return new a(R,this.h^x.h)};function G(x){for(var I=x.g.length+1,R=[],O=0;O<I;O++)R[O]=x.i(O)<<1|x.i(O-1)>>>31;return new a(R,x.h)}function Z(x,I){var R=I>>5;I%=32;for(var O=x.g.length-R,V=[],U=0;U<O;U++)V[U]=0<I?x.i(U+R)>>>I|x.i(U+R+1)<<32-I:x.i(U+R);return new a(V,x.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,BC=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=_,Zs=a}).apply(typeof Q0<"u"?Q0:typeof self<"u"?self:typeof window<"u"?window:{});var jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WC,HC,du,$C,cd,A_,qC,GC,KC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,y){return c==Array.prototype||c==Object.prototype||(c[m]=y.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof jh=="object"&&jh];for(var m=0;m<c.length;++m){var y=c[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function r(c,m){if(m)e:{var y=i;c=c.split(".");for(var S=0;S<c.length-1;S++){var z=c[S];if(!(z in y))break e;y=y[z]}c=c[c.length-1],S=y[c],m=m(S),m!=S&&m!=null&&e(y,c,{configurable:!0,writable:!0,value:m})}}function s(c,m){c instanceof String&&(c+="");var y=0,S=!1,z={next:function(){if(!S&&y<c.length){var H=y++;return{value:m(H,c[H]),done:!1}}return S=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}r("Array.prototype.values",function(c){return c||function(){return s(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function h(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function f(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function _(c,m,y){return c.call.apply(c.bind,arguments)}function g(c,m,y){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,S),c.apply(m,z)}}return function(){return c.apply(m,arguments)}}function w(c,m,y){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:g,w.apply(null,arguments)}function C(c,m){var y=Array.prototype.slice.call(arguments,1);return function(){var S=y.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function b(c,m){function y(){}y.prototype=m.prototype,c.aa=m.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(S,z,H){for(var te=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)te[Ve-2]=arguments[Ve];return m.prototype[z].apply(S,te)}}function k(c){const m=c.length;if(0<m){const y=Array(m);for(let S=0;S<m;S++)y[S]=c[S];return y}return[]}function D(c,m){for(let y=1;y<arguments.length;y++){const S=arguments[y];if(h(S)){const z=c.length||0,H=S.length||0;c.length=z+H;for(let te=0;te<H;te++)c[z+te]=S[te]}else c.push(S)}}class A{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function P(c){return/^[\s\xa0]*$/.test(c)}function N(){var c=u.navigator;return c&&(c=c.userAgent)?c:""}function j(c){return j[" "](c),c}j[" "]=function(){};var G=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function Z(c,m,y){for(const S in c)m.call(y,c[S],S,c)}function x(c,m){for(const y in c)m.call(void 0,c[y],y,c)}function I(c){const m={};for(const y in c)m[y]=c[y];return m}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(c,m){let y,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(y in S)c[y]=S[y];for(let H=0;H<R.length;H++)y=R[H],Object.prototype.hasOwnProperty.call(S,y)&&(c[y]=S[y])}}function V(c){var m=1;c=c.split(":");const y=[];for(;0<m&&c.length;)y.push(c.shift()),m--;return c.length&&y.push(c.join(":")),y}function U(c){u.setTimeout(()=>{throw c},0)}function F(){var c=ce;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class ot{constructor(){this.h=this.g=null}add(m,y){const S=Oi.get();S.set(m,y),this.h?this.h.next=S:this.g=S,this.h=S}}var Oi=new A(()=>new Tt,c=>c.reset());class Tt{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let tn,q=!1,ce=new ot,J=()=>{const c=u.Promise.resolve(void 0);tn=()=>{c.then(fe)}};var fe=()=>{for(var c;c=F();){try{c.h.call(c.g)}catch(y){U(y)}var m=Oi;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}q=!1};function we(){this.s=this.s,this.C=this.C}we.prototype.s=!1,we.prototype.ma=function(){this.s||(this.s=!0,this.N())},we.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ae(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}Ae.prototype.h=function(){this.defaultPrevented=!0};var Fe=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};u.addEventListener("test",y,m),u.removeEventListener("test",y,m)}catch{}return c}();function Ee(c,m){if(Ae.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(G){e:{try{j(m.nodeName);var z=!0;break e}catch{}z=!1}z||(m=null)}}else y=="mouseover"?m=c.fromElement:y=="mouseout"&&(m=c.toElement);this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:_e[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ee.aa.h.call(this)}}b(Ee,Ae);var _e={2:"touch",3:"pen",4:"mouse"};Ee.prototype.h=function(){Ee.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var It="closure_listenable_"+(1e6*Math.random()|0),mi=0;function jc(c,m,y,S,z){this.listener=c,this.proxy=null,this.src=m,this.type=y,this.capture=!!S,this.ha=z,this.key=++mi,this.da=this.fa=!1}function Tr(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ir(c){this.src=c,this.g={},this.h=0}Ir.prototype.add=function(c,m,y,S,z){var H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);var te=Ts(c,m,S,z);return-1<te?(m=c[te],y||(m.fa=!1)):(m=new jc(m,this.src,H,!!S,z),m.fa=y,c.push(m)),m};function Di(c,m){var y=m.type;if(y in c.g){var S=c.g[y],z=Array.prototype.indexOf.call(S,m,void 0),H;(H=0<=z)&&Array.prototype.splice.call(S,z,1),H&&(Tr(m),c.g[y].length==0&&(delete c.g[y],c.h--))}}function Ts(c,m,y,S){for(var z=0;z<c.length;++z){var H=c[z];if(!H.da&&H.listener==m&&H.capture==!!y&&H.ha==S)return z}return-1}var ul="closure_lm_"+(1e6*Math.random()|0),wo={};function cl(c,m,y,S,z){if(Array.isArray(m)){for(var H=0;H<m.length;H++)cl(c,m[H],y,S,z);return null}return y=Wc(y),c&&c[It]?c.K(m,y,f(S)?!!S.capture:!!S,z):hl(c,m,y,!1,S,z)}function hl(c,m,y,S,z,H){if(!m)throw Error("Invalid event type");var te=f(z)?!!z.capture:!!z,Ve=So(c);if(Ve||(c[ul]=Ve=new Ir(c)),y=Ve.add(m,y,S,te,H),y.proxy)return y;if(S=Eo(),y.proxy=S,S.src=c,S.listener=y,c.addEventListener)Fe||(z=te),z===void 0&&(z=!1),c.addEventListener(m.toString(),S,z);else if(c.attachEvent)c.attachEvent(Io(m.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Eo(){function c(y){return m.call(c.src,c.listener,y)}const m=Bc;return c}function zc(c,m,y,S,z){if(Array.isArray(m))for(var H=0;H<m.length;H++)zc(c,m[H],y,S,z);else S=f(S)?!!S.capture:!!S,y=Wc(y),c&&c[It]?(c=c.i,m=String(m).toString(),m in c.g&&(H=c.g[m],y=Ts(H,y,S,z),-1<y&&(Tr(H[y]),Array.prototype.splice.call(H,y,1),H.length==0&&(delete c.g[m],c.h--)))):c&&(c=So(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Ts(m,y,S,z)),(y=-1<c?m[c]:null)&&To(y))}function To(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[It])Di(m.i,c);else{var y=c.type,S=c.proxy;m.removeEventListener?m.removeEventListener(y,S,c.capture):m.detachEvent?m.detachEvent(Io(y),S):m.addListener&&m.removeListener&&m.removeListener(S),(y=So(m))?(Di(y,c),y.h==0&&(y.src=null,m[ul]=null)):Tr(c)}}}function Io(c){return c in wo?wo[c]:wo[c]="on"+c}function Bc(c,m){if(c.da)c=!0;else{m=new Ee(m,this);var y=c.listener,S=c.ha||c.src;c.fa&&To(c),c=y.call(S,m)}return c}function So(c){return c=c[ul],c instanceof Ir?c:null}var dl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wc(c){return typeof c=="function"?c:(c[dl]||(c[dl]=function(m){return c.handleEvent(m)}),c[dl])}function mt(){we.call(this),this.i=new Ir(this),this.M=this,this.F=null}b(mt,we),mt.prototype[It]=!0,mt.prototype.removeEventListener=function(c,m,y,S){zc(this,c,m,y,S)};function Rt(c,m){var y,S=c.F;if(S)for(y=[];S;S=S.F)y.push(S);if(c=c.M,S=m.type||m,typeof m=="string")m=new Ae(m,c);else if(m instanceof Ae)m.target=m.target||c;else{var z=m;m=new Ae(S,c),O(m,z)}if(z=!0,y)for(var H=y.length-1;0<=H;H--){var te=m.g=y[H];z=Is(te,S,!0,m)&&z}if(te=m.g=c,z=Is(te,S,!0,m)&&z,z=Is(te,S,!1,m)&&z,y)for(H=0;H<y.length;H++)te=m.g=y[H],z=Is(te,S,!1,m)&&z}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var y=c.g[m],S=0;S<y.length;S++)Tr(y[S]);delete c.g[m],c.h--}}this.F=null},mt.prototype.K=function(c,m,y,S){return this.i.add(String(c),m,!1,y,S)},mt.prototype.L=function(c,m,y,S){return this.i.add(String(c),m,!0,y,S)};function Is(c,m,y,S){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var z=!0,H=0;H<m.length;++H){var te=m[H];if(te&&!te.da&&te.capture==y){var Ve=te.listener,_t=te.ha||te.src;te.fa&&Di(c.i,te),z=Ve.call(_t,S)!==!1&&z}}return z&&!S.defaultPrevented}function Hc(c,m,y){if(typeof c=="function")y&&(c=w(c,y));else if(c&&typeof c.handleEvent=="function")c=w(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:u.setTimeout(c,m||0)}function fl(c){c.g=Hc(()=>{c.g=null,c.i&&(c.i=!1,fl(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class $c extends we{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:fl(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ss(c){we.call(this),this.h=c,this.g={}}b(Ss,we);var pl=[];function Co(c){Z(c.g,function(m,y){this.g.hasOwnProperty(y)&&To(m)},c),c.g={}}Ss.prototype.N=function(){Ss.aa.N.call(this),Co(this)},Ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xo=u.JSON.stringify,Ip=u.JSON.parse,Cs=class{stringify(c){return u.JSON.stringify(c,void 0)}parse(c){return u.JSON.parse(c,void 0)}};function ml(){}ml.prototype.h=null;function qc(c){return c.h||(c.h=c.i())}function _l(){}var Sr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Po(){Ae.call(this,"d")}b(Po,Ae);function gl(){Ae.call(this,"c")}b(gl,Ae);var Mi={},Gc=null;function Ao(){return Gc=Gc||new mt}Mi.La="serverreachability";function Kc(c){Ae.call(this,Mi.La,c)}b(Kc,Ae);function xs(c){const m=Ao();Rt(m,new Kc(m))}Mi.STAT_EVENT="statevent";function Ro(c,m){Ae.call(this,Mi.STAT_EVENT,c),this.stat=m}b(Ro,Ae);function Vt(c){const m=Ao();Rt(m,new Ro(m,c))}Mi.Ma="timingevent";function Zc(c,m){Ae.call(this,Mi.Ma,c),this.size=m}b(Zc,Ae);function Ps(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){c()},m)}function As(){this.g=!0}As.prototype.xa=function(){this.g=!1};function Fn(c,m,y,S,z,H){c.info(function(){if(c.g)if(H)for(var te="",Ve=H.split("&"),_t=0;_t<Ve.length;_t++){var Ne=Ve[_t].split("=");if(1<Ne.length){var ze=Ne[0];Ne=Ne[1];var nt=ze.split("_");te=2<=nt.length&&nt[1]=="type"?te+(ze+"="+Ne+"&"):te+(ze+"=redacted&")}}else te=null;else te=H;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+m+`
`+y+`
`+te})}function se(c,m,y,S,z,H,te){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+m+`
`+y+`
`+H+" "+te})}function Fi(c,m,y,S){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Yc(c,y)+(S?" "+S:"")})}function Qc(c,m){c.info(function(){return"TIMEOUT: "+m})}As.prototype.info=function(){};function Yc(c,m){if(!c.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var S=y[c];if(!(2>S.length)){var z=S[1];if(Array.isArray(z)&&!(1>z.length)){var H=z[0];if(H!="noop"&&H!="stop"&&H!="close")for(var te=1;te<z.length;te++)z[te]=""}}}}return xo(y)}catch{return m}}var Rs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ko={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bo;function Yn(){}b(Yn,ml),Yn.prototype.g=function(){return new XMLHttpRequest},Yn.prototype.i=function(){return{}},bo=new Yn;function Xn(c,m,y,S){this.j=c,this.i=m,this.l=y,this.R=S||1,this.U=new Ss(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xc}function Xc(){this.i=null,this.g="",this.h=!1}var Jc={},vl={};function yl(c,m,y){c.L=1,c.v=Un(at(m)),c.m=y,c.P=!0,wl(c,null)}function wl(c,m){c.F=Date.now(),Lo(c),c.A=at(c.v);var y=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),nh(y.i,"t",S),c.C=0,y=c.j.J,c.h=new Xc,c.g=uh(c.j,y?m:null,!c.m),0<c.O&&(c.M=new $c(w(c.Y,c,c.g),c.O)),m=c.U,y=c.g,S=c.ca;var z="readystatechange";Array.isArray(z)||(z&&(pl[0]=z.toString()),z=pl);for(var H=0;H<z.length;H++){var te=cl(y,z[H],S||m.handleEvent,!1,m.h||m);if(!te)break;m.g[te.key]=te}m=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),xs(),Fn(c.i,c.u,c.A,c.l,c.R,c.m)}Xn.prototype.ca=function(c){c=c.target;const m=this.M;m&&nn(c)==3?m.j():this.Y(c)},Xn.prototype.Y=function(c){try{if(c==this.g)e:{const nt=nn(this.g);var m=this.g.Ba();const br=this.g.Z();if(!(3>nt)&&(nt!=3||this.g&&(this.h.h||this.g.oa()||Ml(this.g)))){this.J||nt!=4||m==7||(m==8||0>=br?xs(3):xs(2)),El(this);var y=this.g.Z();this.X=y;t:if(eh(this)){var S=Ml(this.g);c="";var z=S.length,H=nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vi(this),ks(this);var te="";break t}this.h.i=new u.TextDecoder}for(m=0;m<z;m++)this.h.h=!0,c+=this.h.i.decode(S[m],{stream:!(H&&m==z-1)});S.length=0,this.h.g+=c,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=y==200,se(this.i,this.u,this.A,this.l,this.R,nt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,_t=this.g;if((Ve=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Ve)){var Ne=Ve;break t}}Ne=null}if(y=Ne)Fi(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bs(this,y);else{this.o=!1,this.s=3,Vt(12),Vi(this),ks(this);break e}}if(this.P){y=!0;let dt;for(;!this.J&&this.C<te.length;)if(dt=No(this,te),dt==vl){nt==4&&(this.s=4,Vt(14),y=!1),Fi(this.i,this.l,null,"[Incomplete Response]");break}else if(dt==Jc){this.s=4,Vt(15),Fi(this.i,this.l,te,"[Invalid Chunk]"),y=!1;break}else Fi(this.i,this.l,dt,null),bs(this,dt);if(eh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||te.length!=0||this.h.h||(this.s=1,Vt(16),y=!1),this.o=this.o&&y,!y)Fi(this.i,this.l,te,"[Invalid Chunked Response]"),Vi(this),ks(this);else if(0<te.length&&!this.W){this.W=!0;var ze=this.j;ze.g==this&&ze.ba&&!ze.M&&(ze.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),Bo(ze),ze.M=!0,Vt(11))}}else Fi(this.i,this.l,te,null),bs(this,te);nt==4&&Vi(this),this.o&&!this.J&&(nt==4?Vl(this.j,this):(this.o=!1,Lo(this)))}else Sp(this.g),y==400&&0<te.indexOf("Unknown SID")?(this.s=3,Vt(12)):(this.s=0,Vt(13)),Vi(this),ks(this)}}}catch{}finally{}};function eh(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function No(c,m){var y=c.C,S=m.indexOf(`
`,y);return S==-1?vl:(y=Number(m.substring(y,S)),isNaN(y)?Jc:(S+=1,S+y>m.length?vl:(m=m.slice(S,S+y),c.C=S+y,m)))}Xn.prototype.cancel=function(){this.J=!0,Vi(this)};function Lo(c){c.S=Date.now()+c.I,th(c,c.I)}function th(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ps(w(c.ba,c),m)}function El(c){c.B&&(u.clearTimeout(c.B),c.B=null)}Xn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Qc(this.i,this.A),this.L!=2&&(xs(),Vt(17)),Vi(this),this.s=2,ks(this)):th(this,this.S-c)};function ks(c){c.j.G==0||c.J||Vl(c.j,c)}function Vi(c){El(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,Co(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function bs(c,m){try{var y=c.j;if(y.G!=0&&(y.g==c||Re(y.h,c))){if(!c.K&&Re(y.h,c)&&y.G==3){try{var S=y.Da.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)Ho(y),jo(y);else break e;zo(y),Vt(18)}}else y.za=z[1],0<y.za-y.T&&37500>z[2]&&y.F&&y.v==0&&!y.C&&(y.C=Ps(w(y.Za,y),6e3));if(1>=Cr(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Wi(y,11)}else if((c.K||y.g==c)&&Ho(y),!P(m))for(z=y.Da.g.parse(m),m=0;m<z.length;m++){let Ne=z[m];if(y.T=Ne[0],Ne=Ne[1],y.G==2)if(Ne[0]=="c"){y.K=Ne[1],y.ia=Ne[2];const ze=Ne[3];ze!=null&&(y.la=ze,y.j.info("VER="+y.la));const nt=Ne[4];nt!=null&&(y.Aa=nt,y.j.info("SVER="+y.Aa));const br=Ne[5];br!=null&&typeof br=="number"&&0<br&&(S=1.5*br,y.L=S,y.j.info("backChannelRequestTimeoutMs_="+S)),S=y;const dt=c.g;if(dt){const qo=dt.g?dt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qo){var H=S.h;H.g||qo.indexOf("spdy")==-1&&qo.indexOf("quic")==-1&&qo.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Be(H,H.h),H.h=null))}if(S.D){const vi=dt.g?dt.g.getResponseHeader("X-HTTP-Session-Id"):null;vi&&(S.ya=vi,pe(S.I,S.D,vi))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),S=y;var te=c;if(S.qa=$o(S,S.J?S.ia:null,S.W),te.K){Ls(S.h,te);var Ve=te,_t=S.L;_t&&(Ve.I=_t),Ve.B&&(El(Ve),Lo(Ve)),S.g=te}else ti(S);0<y.i.length&&kr(y)}else Ne[0]!="stop"&&Ne[0]!="close"||Wi(y,7);else y.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?Wi(y,7):Uo(y):Ne[0]!="noop"&&y.l&&y.l.ta(Ne),y.v=0)}}xs(4)}catch{}}var Ns=class{constructor(c,m){this.g=c,this.map=m}};function Tl(c){this.l=c||10,u.PerformanceNavigationTiming?(c=u.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Il(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Cr(c){return c.h?1:c.g?c.g.size:0}function Re(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function Be(c,m){c.g?c.g.add(m):c.h=m}function Ls(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}Tl.prototype.cancel=function(){if(this.i=Ui(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Ui(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const y of c.g.values())m=m.concat(y.D);return m}return k(c.i)}function xr(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(h(c)){for(var m=[],y=c.length,S=0;S<y;S++)m.push(c[S]);return m}m=[],y=0;for(S in c)m[y++]=c[S];return m}function Sl(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(h(c)||typeof c=="string"){var m=[];c=c.length;for(var y=0;y<c;y++)m.push(y);return m}m=[],y=0;for(const S in c)m[y++]=S;return m}}}function ye(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(h(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var y=Sl(c),S=xr(c),z=S.length,H=0;H<z;H++)m.call(void 0,S[H],y&&y[H],c)}var Ye=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cl(c,m){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var S=c[y].indexOf("="),z=null;if(0<=S){var H=c[y].substring(0,S);z=c[y].substring(S+1)}else H=c[y];m(H,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Vn(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Vn){this.h=c.h,Oo(this,c.j),this.o=c.o,this.g=c.g,ji(this,c.s),this.l=c.l;var m=c.i,y=new zi;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),_i(this,y),this.m=c.m}else c&&(m=String(c).match(Ye))?(this.h=!1,Oo(this,m[1]||"",!0),this.o=Jn(m[2]||""),this.g=Jn(m[3]||"",!0),ji(this,m[4]),this.l=Jn(m[5]||"",!0),_i(this,m[6]||"",!0),this.m=Jn(m[7]||"")):(this.h=!1,this.i=new zi(null,this.h))}Vn.prototype.toString=function(){var c=[],m=this.j;m&&c.push(ei(m,Pr,!0),":");var y=this.g;return(y||m=="file")&&(c.push("//"),(m=this.o)&&c.push(ei(m,Pr,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(ei(y,y.charAt(0)=="/"?Al:Pl,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",ei(y,Rl)),c.join("")};function at(c){return new Vn(c)}function Oo(c,m,y){c.j=y?Jn(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function ji(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function _i(c,m,y){m instanceof zi?(c.i=m,jn(c.i,c.h)):(y||(m=ei(m,Do)),c.i=new zi(m,c.h))}function pe(c,m,y){c.i.set(m,y)}function Un(c){return pe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Jn(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ei(c,m,y){return typeof c=="string"?(c=encodeURI(c).replace(m,xl),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function xl(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Pr=/[#\/\?@]/g,Pl=/[#\?:]/g,Al=/[#\?]/g,Do=/[#\?@]/g,Rl=/#/g;function zi(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function In(c){c.g||(c.g=new Map,c.h=0,c.i&&Cl(c.i,function(m,y){c.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=zi.prototype,t.add=function(c,m){In(this),this.i=null,c=le(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(m),this.h+=1,this};function kl(c,m){In(c),m=le(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Mo(c,m){return In(c),m=le(c,m),c.g.has(m)}t.forEach=function(c,m){In(this),this.g.forEach(function(y,S){y.forEach(function(z){c.call(m,z,S,this)},this)},this)},t.na=function(){In(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let S=0;S<m.length;S++){const z=c[S];for(let H=0;H<z.length;H++)y.push(m[S])}return y},t.V=function(c){In(this);let m=[];if(typeof c=="string")Mo(this,c)&&(m=m.concat(this.g.get(le(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)m=m.concat(c[y])}return m},t.set=function(c,m){return In(this),this.i=null,c=le(this,c),Mo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},t.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function nh(c,m,y){kl(c,m),0<y.length&&(c.i=null,c.g.set(le(c,m),k(y)),c.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var S=m[y];const H=encodeURIComponent(String(S)),te=this.V(S);for(S=0;S<te.length;S++){var z=H;te[S]!==""&&(z+="="+encodeURIComponent(String(te[S]))),c.push(z)}}return this.i=c.join("&")};function le(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function jn(c,m){m&&!c.j&&(In(c),c.i=null,c.g.forEach(function(y,S){var z=S.toLowerCase();S!=z&&(kl(this,S),nh(this,z,y))},c)),c.j=m}function je(c,m){const y=new As;if(u.Image){const S=new Image;S.onload=C(zn,y,"TestLoadImage: loaded",!0,m,S),S.onerror=C(zn,y,"TestLoadImage: error",!1,m,S),S.onabort=C(zn,y,"TestLoadImage: abort",!1,m,S),S.ontimeout=C(zn,y,"TestLoadImage: timeout",!1,m,S),u.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else m(!1)}function ih(c,m){const y=new As,S=new AbortController,z=setTimeout(()=>{S.abort(),zn(y,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:S.signal}).then(H=>{clearTimeout(z),H.ok?zn(y,"TestPingServer: ok",!0,m):zn(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(z),zn(y,"TestPingServer: error",!1,m)})}function zn(c,m,y,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(y)}catch{}}function bl(){this.g=new Cs}function Nl(c,m,y){const S=y||"";try{ye(c,function(z,H){let te=z;f(z)&&(te=xo(z)),m.push(S+H+"="+encodeURIComponent(te))})}catch(z){throw m.push(S+"type="+encodeURIComponent("_badmap")),z}}function Sn(c){this.l=c.Ub||null,this.j=c.eb||!1}b(Sn,ml),Sn.prototype.g=function(){return new Ar(this.l,this.j)},Sn.prototype.i=function(c){return function(){return c}}({});function Ar(c,m){mt.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Ar,mt),t=Ar.prototype,t.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,Cn(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||u).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,tt(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Cn(this)),this.g&&(this.readyState=3,Cn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rr(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Rr(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?tt(this):Cn(this),this.readyState==3&&Rr(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,tt(this))},t.Qa=function(c){this.g&&(this.response=c,tt(this))},t.ga=function(){this.g&&tt(this)};function tt(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Cn(c)}t.setRequestHeader=function(c,m){this.u.append(c,m)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=m.next();return c.join(`\r
`)};function Cn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ar.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ll(c){let m="";return Z(c,function(y,S){m+=S,m+=":",m+=y,m+=`\r
`}),m}function Fo(c,m,y){e:{for(S in y){var S=!1;break e}S=!0}S||(y=Ll(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):pe(c,m,y))}function Xe(c){mt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Xe,mt);var rh=/^https?$/i,Ol=["POST","PUT"];t=Xe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,m,y,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bo.g(),this.v=this.o?qc(this.o):qc(bo),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(H){sh(this,H);return}if(c=y||"",y=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)y.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const H of S.keys())y.set(H,S.get(H));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(y.keys()).find(H=>H.toLowerCase()=="content-type"),z=u.FormData&&c instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Ol,m,void 0))||S||z||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,te]of y)this.g.setRequestHeader(H,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cn(this),this.u=!0,this.g.send(c),this.u=!1}catch(H){sh(this,H)}};function sh(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,Dl(c),Vo(c)}function Dl(c){c.A||(c.A=!0,Rt(c,"complete"),Rt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Rt(this,"complete"),Rt(this,"abort"),Vo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vo(this,!0)),Xe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ce(this):this.bb())},t.bb=function(){Ce(this)};function Ce(c){if(c.h&&typeof a<"u"&&(!c.v[1]||nn(c)!=4||c.Z()!=2)){if(c.u&&nn(c)==4)Hc(c.Ea,0,c);else if(Rt(c,"readystatechange"),nn(c)==4){c.h=!1;try{const te=c.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var S;if(S=te===0){var z=String(c.D).match(Ye)[1]||null;!z&&u.self&&u.self.location&&(z=u.self.location.protocol.slice(0,-1)),S=!rh.test(z?z.toLowerCase():"")}y=S}if(y)Rt(c,"complete"),Rt(c,"success");else{c.m=6;try{var H=2<nn(c)?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.Z()+"]",Dl(c)}}finally{Vo(c)}}}}function Vo(c,m){if(c.g){cn(c);const y=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||Rt(c,"ready");try{y.onreadystatechange=S}catch{}}}function cn(c){c.I&&(u.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function nn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<nn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),Ip(m)}};function Ml(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Sp(c){const m={};c=(c.g&&2<=nn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(P(c[S]))continue;var y=V(c[S]);const z=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const H=m[z]||[];m[z]=H,H.push(y)}x(m,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bi(c,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||m}function oh(c){this.Aa=0,this.i=[],this.j=new As,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bi("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bi("baseRetryDelayMs",5e3,c),this.cb=Bi("retryDelaySeedMs",1e4,c),this.Wa=Bi("forwardChannelMaxRetries",2,c),this.wa=Bi("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Tl(c&&c.concurrentRequestLimit),this.Da=new bl,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=oh.prototype,t.la=8,t.G=1,t.connect=function(c,m,y,S){Vt(0),this.W=c,this.H=m||{},y&&S!==void 0&&(this.H.OSID=y,this.H.OAID=S),this.F=this.X,this.I=$o(this,null,this.W),kr(this)};function Uo(c){if(ah(c),c.G==3){var m=c.U++,y=at(c.I);if(pe(y,"SID",c.K),pe(y,"RID",m),pe(y,"TYPE","terminate"),Os(c,y),m=new Xn(c,c.j,m),m.L=2,m.v=Un(at(y)),y=!1,u.navigator&&u.navigator.sendBeacon)try{y=u.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&u.Image&&(new Image().src=m.v,y=!0),y||(m.g=uh(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Lo(m)}lh(c)}function jo(c){c.g&&(Bo(c),c.g.cancel(),c.g=null)}function ah(c){jo(c),c.u&&(u.clearTimeout(c.u),c.u=null),Ho(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&u.clearTimeout(c.s),c.s=null)}function kr(c){if(!Il(c.h)&&!c.s){c.s=!0;var m=c.Ga;tn||J(),q||(tn(),q=!0),ce.add(m,c),c.B=0}}function Cp(c,m){return Cr(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ps(w(c.Ga,c,m),Ul(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const z=new Xn(this,this.j,c);let H=this.o;if(this.S&&(H?(H=I(H),O(H,this.S)):H=this.S),this.m!==null||this.O||(z.H=H,H=null),this.P)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var S=this.i[y];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(m+=S,4096<m){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=Fl(this,z,m),y=at(this.I),pe(y,"RID",c),pe(y,"CVER",22),this.D&&pe(y,"X-HTTP-Session-Id",this.D),Os(this,y),H&&(this.O?m="headers="+encodeURIComponent(String(Ll(H)))+"&"+m:this.m&&Fo(y,this.m,H)),Be(this.h,z),this.Ua&&pe(y,"TYPE","init"),this.P?(pe(y,"$req",m),pe(y,"SID","null"),z.T=!0,yl(z,y,null)):yl(z,y,m),this.G=2}}else this.G==3&&(c?xn(this,c):this.i.length==0||Il(this.h)||xn(this))};function xn(c,m){var y;m?y=m.l:y=c.U++;const S=at(c.I);pe(S,"SID",c.K),pe(S,"RID",y),pe(S,"AID",c.T),Os(c,S),c.m&&c.o&&Fo(S,c.m,c.o),y=new Xn(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),m&&(c.i=m.D.concat(c.i)),m=Fl(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Be(c.h,y),yl(y,S,m)}function Os(c,m){c.H&&Z(c.H,function(y,S){pe(m,S,y)}),c.l&&ye({},function(y,S){pe(m,S,y)})}function Fl(c,m,y){y=Math.min(c.i.length,y);var S=c.l?w(c.l.Na,c.l,c):null;e:{var z=c.i;let H=-1;for(;;){const te=["count="+y];H==-1?0<y?(H=z[0].g,te.push("ofs="+H)):H=0:te.push("ofs="+H);let Ve=!0;for(let _t=0;_t<y;_t++){let Ne=z[_t].g;const ze=z[_t].map;if(Ne-=H,0>Ne)H=Math.max(0,z[_t].g-100),Ve=!1;else try{Nl(ze,te,"req"+Ne+"_")}catch{S&&S(ze)}}if(Ve){S=te.join("&");break e}}}return c=c.i.splice(0,y),m.D=c,S}function ti(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;tn||J(),q||(tn(),q=!0),ce.add(m,c),c.v=0}}function zo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ps(w(c.Fa,c),Ul(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Wo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ps(w(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Vt(10),jo(this),Wo(this))};function Bo(c){c.A!=null&&(u.clearTimeout(c.A),c.A=null)}function Wo(c){c.g=new Xn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=at(c.qa);pe(m,"RID","rpc"),pe(m,"SID",c.K),pe(m,"AID",c.T),pe(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&pe(m,"TO",c.ja),pe(m,"TYPE","xmlhttp"),Os(c,m),c.m&&c.o&&Fo(m,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=Un(at(m)),y.m=null,y.P=!0,wl(y,c)}t.Za=function(){this.C!=null&&(this.C=null,jo(this),zo(this),Vt(19))};function Ho(c){c.C!=null&&(u.clearTimeout(c.C),c.C=null)}function Vl(c,m){var y=null;if(c.g==m){Ho(c),Bo(c),c.g=null;var S=2}else if(Re(c.h,m))y=m.D,Ls(c.h,m),S=1;else return;if(c.G!=0){if(m.o)if(S==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var z=c.B;S=Ao(),Rt(S,new Zc(S,y)),kr(c)}else ti(c);else if(z=m.s,z==3||z==0&&0<m.X||!(S==1&&Cp(c,m)||S==2&&zo(c)))switch(y&&0<y.length&&(m=c.h,m.i=m.i.concat(y)),z){case 1:Wi(c,5);break;case 4:Wi(c,10);break;case 3:Wi(c,6);break;default:Wi(c,2)}}}function Ul(c,m){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*m}function Wi(c,m){if(c.j.info("Error code "+m),m==2){var y=w(c.fb,c),S=c.Xa;const z=!S;S=new Vn(S||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Oo(S,"https"),Un(S),z?je(S.toString(),y):ih(S.toString(),y)}else Vt(2);c.G=0,c.l&&c.l.sa(m),lh(c),ah(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function lh(c){if(c.G=0,c.ka=[],c.l){const m=Ui(c.h);(m.length!=0||c.i.length!=0)&&(D(c.ka,m),D(c.ka,c.i),c.h.i.length=0,k(c.i),c.i.length=0),c.l.ra()}}function $o(c,m,y){var S=y instanceof Vn?at(y):new Vn(y);if(S.g!="")m&&(S.g=m+"."+S.g),ji(S,S.s);else{var z=u.location;S=z.protocol,m=m?m+"."+z.hostname:z.hostname,z=+z.port;var H=new Vn(null);S&&Oo(H,S),m&&(H.g=m),z&&ji(H,z),y&&(H.l=y),S=H}return y=c.D,m=c.ya,y&&m&&pe(S,y,m),pe(S,"VER",c.la),Os(c,S),S}function uh(c,m,y){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new Xe(new Sn({eb:y})):new Xe(c.pa),m.Ha(c.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jl(){}t=jl.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ds(){}Ds.prototype.g=function(c,m){return new kt(c,m)};function kt(c,m){mt.call(this),this.g=new oh(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!P(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!P(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Bn(this)}b(kt,mt),kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kt.prototype.close=function(){Uo(this.g)},kt.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=xo(c),c=y);m.i.push(new Ns(m.Ya++,c)),m.G==3&&kr(m)},kt.prototype.N=function(){this.g.l=null,delete this.j,Uo(this.g),delete this.g,kt.aa.N.call(this)};function gi(c){Po.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const y in m){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}b(gi,Po);function ch(){gl.call(this),this.status=1}b(ch,gl);function Bn(c){this.g=c}b(Bn,jl),Bn.prototype.ua=function(){Rt(this.g,"a")},Bn.prototype.ta=function(c){Rt(this.g,new gi(c))},Bn.prototype.sa=function(c){Rt(this.g,new ch)},Bn.prototype.ra=function(){Rt(this.g,"b")},Ds.prototype.createWebChannel=Ds.prototype.g,kt.prototype.send=kt.prototype.o,kt.prototype.open=kt.prototype.m,kt.prototype.close=kt.prototype.close,KC=function(){return new Ds},GC=function(){return Ao()},qC=Mi,A_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Rs.NO_ERROR=0,Rs.TIMEOUT=8,Rs.HTTP_ERROR=6,cd=Rs,ko.COMPLETE="complete",$C=ko,_l.EventType=Sr,Sr.OPEN="a",Sr.CLOSE="b",Sr.ERROR="c",Sr.MESSAGE="d",mt.prototype.listen=mt.prototype.K,du=_l,HC=Sn,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,WC=Xe}).apply(typeof jh<"u"?jh:typeof self<"u"?self:typeof window<"u"?window:{});const Y0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl="10.12.5";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=new qf("@firebase/firestore");function Jl(){return so.logLevel}function re(t,...e){if(so.logLevel<=ke.DEBUG){const n=e.map(mv);so.debug(`Firestore (${tl}): ${t}`,...n)}}function fr(t,...e){if(so.logLevel<=ke.ERROR){const n=e.map(mv);so.error(`Firestore (${tl}): ${t}`,...n)}}function Va(t,...e){if(so.logLevel<=ke.WARN){const n=e.map(mv);so.warn(`Firestore (${tl}): ${t}`,...n)}}function mv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t="Unexpected state"){const e=`FIRESTORE (${tl}) INTERNAL ASSERTION FAILED: `+t;throw fr(e),new Error(e)}function We(t,e){t||me()}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Li{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qt.UNAUTHENTICATED))}shutdown(){}}class bD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ND{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let s=new sr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new sr,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const h=s;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},u=h=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new sr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(We(typeof i.accessToken=="string"),new ZC(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string"),new Qt(e)}}class LD{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class OD{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new LD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class DD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const i=s=>{s.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,re("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(We(typeof n.token=="string"),this.R=n.token,new DD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=FD(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function De(t,e){return t<e?-1:t>e?1:0}function Ua(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new oe(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new oe(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new oe(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return At.fromMillis(Date.now())}static fromDate(e){return At.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new At(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ge(e)}static min(){return new ge(new At(0,0))}static max(){return new ge(new At(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n,i){n===void 0?n=0:n>e.length&&me(),i===void 0?i=e.length-n:i>e.length-n&&me(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ic.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ic?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),a=n.get(r);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class et extends ic{construct(e,n,i){return new et(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new oe(Q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new et(n)}static emptyPath(){return new et([])}}const VD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends ic{construct(e,n,i){return new zt(e,n,i)}static isValidIdentifier(e){return VD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new zt(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new oe(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new oe(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new oe(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(s(),r++)}if(s(),a)throw new oe(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(n)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(et.fromString(e))}static fromName(e){return new ae(et.fromString(e).popFirst(5))}static empty(){return new ae(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new et(e.slice()))}}function UD(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ge.fromTimestamp(i===1e9?new At(n+1,0):new At(n,i));return new us(r,ae.empty(),e)}function jD(t){return new us(t.readTime,t.key,-1)}class us{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new us(ge.min(),ae.empty(),-1)}static max(){return new us(ge.max(),ae.empty(),-1)}}function zD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:De(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rc(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==BD)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Y((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Y?n:Y.resolve(n)}catch(n){return Y.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.reject(n)}static resolve(e){return new Y((n,i)=>{n(e)})}static reject(e){return new Y((n,i)=>{i(e)})}static waitFor(e){return new Y((n,i)=>{let r=0,s=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++s,a&&s===r&&n()},h=>i(h))}),a=!0,s===r&&n()})}static or(e){let n=Y.resolve(!1);for(const i of e)n=n.next(r=>r?Y.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new Y((i,r)=>{const s=e.length,a=new Array(s);let u=0;for(let h=0;h<s;h++){const f=h;n(e[f]).next(_=>{a[f]=_,++u,u===s&&i(a)},_=>r(_))}})}static doWhile(e,n){return new Y((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function HD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function kc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}_v.oe=-1;function Xf(t){return t==null}function Jd(t){return t===0&&1/t==-1/0}function $D(t){return typeof t=="number"&&Number.isInteger(t)&&!Jd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function go(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function YC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Et=class R_{constructor(e,n){this.comparator=e,this.root=n||is.EMPTY}insert(e,n){return new R_(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,is.BLACK,null,null))}remove(e){return new R_(this.comparator,this.root.remove(e,this.comparator).copy(null,null,is.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zh(this.root,e,this.comparator,!0)}},zh=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},is=class Gi{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??Gi.RED,this.left=r??Gi.EMPTY,this.right=s??Gi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new Gi(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Gi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Gi.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw me();const e=this.left.check();if(e!==this.right.check())throw me();return e+(this.isRed()?0:1)}};is.EMPTY=null,is.RED=!0,is.BLACK=!1;is.EMPTY=new class{constructor(){this.size=0}get key(){throw me()}get value(){throw me()}get color(){throw me()}get left(){throw me()}get right(){throw me()}copy(e,n,i,r,s){return this}insert(e,n,i){return new is(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new J0(this.data.getIterator())}getIteratorFrom(e){return new J0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Wt(this.comparator);return n.data=e,n}}class J0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new Rn([])}unionWith(e){let n=new Wt(zt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ua(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new XC("Invalid base64 string: "+s):s}}(e);return new qt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const qD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cs(t){if(We(!!t),typeof t=="string"){let e=0;const n=qD.exec(t);if(We(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:yt(t.seconds),nanos:yt(t.nanos)}}function yt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function oo(t){return typeof t=="string"?qt.fromBase64String(t):qt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function vv(t){const e=t.mapValue.fields.__previous_value__;return gv(e)?vv(e):e}function rc(t){const e=cs(t.mapValue.fields.__local_write_time__.timestampValue);return new At(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,n,i,r,s,a,u,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f}}class sc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new sc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof sc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ao(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gv(t)?4:KD(t)?9007199254740991:10:me()}function bi(t,e){if(t===e)return!0;const n=ao(t);if(n!==ao(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rc(t).isEqual(rc(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=cs(r.timestampValue),u=cs(s.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return oo(r.bytesValue).isEqual(oo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return yt(r.geoPointValue.latitude)===yt(s.geoPointValue.latitude)&&yt(r.geoPointValue.longitude)===yt(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return yt(r.integerValue)===yt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=yt(r.doubleValue),u=yt(s.doubleValue);return a===u?Jd(a)===Jd(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return Ua(t.arrayValue.values||[],e.arrayValue.values||[],bi);case 10:return function(r,s){const a=r.mapValue.fields||{},u=s.mapValue.fields||{};if(X0(a)!==X0(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!bi(a[h],u[h])))return!1;return!0}(t,e);default:return me()}}function oc(t,e){return(t.values||[]).find(n=>bi(n,e))!==void 0}function ja(t,e){if(t===e)return 0;const n=ao(t),i=ao(e);if(n!==i)return De(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return De(t.booleanValue,e.booleanValue);case 2:return function(s,a){const u=yt(s.integerValue||s.doubleValue),h=yt(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return eE(t.timestampValue,e.timestampValue);case 4:return eE(rc(t),rc(e));case 5:return De(t.stringValue,e.stringValue);case 6:return function(s,a){const u=oo(s),h=oo(a);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const u=s.split("/"),h=a.split("/");for(let f=0;f<u.length&&f<h.length;f++){const _=De(u[f],h[f]);if(_!==0)return _}return De(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const u=De(yt(s.latitude),yt(a.latitude));return u!==0?u:De(yt(s.longitude),yt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,a){const u=s.values||[],h=a.values||[];for(let f=0;f<u.length&&f<h.length;++f){const _=ja(u[f],h[f]);if(_)return _}return De(u.length,h.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,a){if(s===Bh.mapValue&&a===Bh.mapValue)return 0;if(s===Bh.mapValue)return 1;if(a===Bh.mapValue)return-1;const u=s.fields||{},h=Object.keys(u),f=a.fields||{},_=Object.keys(f);h.sort(),_.sort();for(let g=0;g<h.length&&g<_.length;++g){const w=De(h[g],_[g]);if(w!==0)return w;const C=ja(u[h[g]],f[_[g]]);if(C!==0)return C}return De(h.length,_.length)}(t.mapValue,e.mapValue);default:throw me()}}function eE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return De(t,e);const n=cs(t),i=cs(e),r=De(n.seconds,i.seconds);return r!==0?r:De(n.nanos,i.nanos)}function za(t){return k_(t)}function k_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=cs(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return oo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=k_(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${k_(n.fields[a])}`;return r+"}"}(t.mapValue):me()}function b_(t){return!!t&&"integerValue"in t}function yv(t){return!!t&&"arrayValue"in t}function tE(t){return!!t&&"nullValue"in t}function nE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hd(t){return!!t&&"mapValue"in t}function xu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return go(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=xu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function KD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!hd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xu(n)}setAll(e){let n=zt.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=xu(a):r.push(u.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());hd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];hd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){go(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new fn(xu(this.value))}}function JC(t){const e=[];return go(t.fields,(n,i)=>{const r=new zt([n]);if(hd(i)){const s=JC(i.mapValue).fields;if(s.length===0)e.push(r);else for(const a of s)e.push(r.child(a))}else e.push(r)}),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n,i,r,s,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Xt(e,0,ge.min(),ge.min(),ge.min(),fn.empty(),0)}static newFoundDocument(e,n,i,r){return new Xt(e,1,n,ge.min(),i,r,0)}static newNoDocument(e,n){return new Xt(e,2,n,ge.min(),ge.min(),fn.empty(),0)}static newUnknownDocument(e,n){return new Xt(e,3,n,ge.min(),ge.min(),fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n){this.position=e,this.inclusive=n}}function iE(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],a=t.position[r];if(s.field.isKeyField()?i=ae.comparator(ae.fromName(a.referenceValue),n.key):i=ja(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function rE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n="asc"){this.field=e,this.dir=n}}function ZD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{}class Ct extends ex{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new YD(e,n,i):n==="array-contains"?new eM(e,i):n==="in"?new tM(e,i):n==="not-in"?new nM(e,i):n==="array-contains-any"?new iM(e,i):new Ct(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new XD(e,i):new JD(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ja(n,this.value)):n!==null&&ao(this.value)===ao(n)&&this.matchesComparison(ja(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ni extends ex{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ni(e,n)}matches(e){return tx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function tx(t){return t.op==="and"}function nx(t){return QD(t)&&tx(t)}function QD(t){for(const e of t.filters)if(e instanceof Ni)return!1;return!0}function N_(t){if(t instanceof Ct)return t.field.canonicalString()+t.op.toString()+za(t.value);if(nx(t))return t.filters.map(e=>N_(e)).join(",");{const e=t.filters.map(n=>N_(n)).join(",");return`${t.op}(${e})`}}function ix(t,e){return t instanceof Ct?function(i,r){return r instanceof Ct&&i.op===r.op&&i.field.isEqual(r.field)&&bi(i.value,r.value)}(t,e):t instanceof Ni?function(i,r){return r instanceof Ni&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,u)=>s&&ix(a,r.filters[u]),!0):!1}(t,e):void me()}function rx(t){return t instanceof Ct?function(n){return`${n.field.canonicalString()} ${n.op} ${za(n.value)}`}(t):t instanceof Ni?function(n){return n.op.toString()+" {"+n.getFilters().map(rx).join(" ,")+"}"}(t):"Filter"}class YD extends Ct{constructor(e,n,i){super(e,n,i),this.key=ae.fromName(i.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class XD extends Ct{constructor(e,n){super(e,"in",n),this.keys=sx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class JD extends Ct{constructor(e,n){super(e,"not-in",n),this.keys=sx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function sx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ae.fromName(i.referenceValue))}class eM extends Ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yv(n)&&oc(n.arrayValue,this.value)}}class tM extends Ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&oc(this.value.arrayValue,n)}}class nM extends Ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!oc(this.value.arrayValue,n)}}class iM extends Ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>oc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,n=null,i=[],r=[],s=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=u,this.ue=null}}function sE(t,e=null,n=[],i=[],r=null,s=null,a=null){return new rM(t,e,n,i,r,s,a)}function wv(t){const e=ve(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>N_(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Xf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>za(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>za(i)).join(",")),e.ue=n}return e.ue}function Ev(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ZD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ix(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rE(t.startAt,e.startAt)&&rE(t.endAt,e.endAt)}function L_(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n=null,i=[],r=[],s=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=u,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function sM(t,e,n,i,r,s,a,u){return new Jf(t,e,n,i,r,s,a,u)}function Tv(t){return new Jf(t)}function oE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function oM(t){return t.collectionGroup!==null}function Pu(t){const e=ve(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Wt(zt.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new tf(s,i))}),n.has(zt.keyField().canonicalString())||e.ce.push(new tf(zt.keyField(),i))}return e.ce}function Ri(t){const e=ve(t);return e.le||(e.le=aM(e,Pu(t))),e.le}function aM(t,e){if(t.limitType==="F")return sE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new tf(r.field,s)});const n=t.endAt?new ef(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ef(t.startAt.position,t.startAt.inclusive):null;return sE(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function O_(t,e,n){return new Jf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ep(t,e){return Ev(Ri(t),Ri(e))&&t.limitType===e.limitType}function ox(t){return`${wv(Ri(t))}|lt:${t.limitType}`}function Jo(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>rx(r)).join(", ")}]`),Xf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>za(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>za(r)).join(",")),`Target(${i})`}(Ri(t))}; limitType=${t.limitType})`}function tp(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):ae.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Pu(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,h){const f=iE(a,u,h);return a.inclusive?f<=0:f<0}(i.startAt,Pu(i),r)||i.endAt&&!function(a,u,h){const f=iE(a,u,h);return a.inclusive?f>=0:f>0}(i.endAt,Pu(i),r))}(t,e)}function lM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ax(t){return(e,n)=>{let i=!1;for(const r of Pu(t)){const s=uM(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function uM(t,e,n){const i=t.field.isKeyField()?ae.comparator(e.key,n.key):function(s,a,u){const h=a.data.field(s),f=u.data.field(s);return h!==null&&f!==null?ja(h,f):me()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return me()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){go(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return YC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM=new Et(ae.comparator);function pr(){return cM}const lx=new Et(ae.comparator);function fu(...t){let e=lx;for(const n of t)e=e.insert(n.key,n);return e}function ux(t){let e=lx;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Hs(){return Au()}function cx(){return Au()}function Au(){return new nl(t=>t.toString(),(t,e)=>t.isEqual(e))}const hM=new Et(ae.comparator),dM=new Wt(ae.comparator);function be(...t){let e=dM;for(const n of t)e=e.add(n);return e}const fM=new Wt(De);function pM(){return fM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jd(e)?"-0":e}}function dx(t){return{integerValue:""+t}}function mM(t,e){return $D(e)?dx(e):hx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(){this._=void 0}}function _M(t,e,n){return t instanceof nf?function(r,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&gv(s)&&(s=vv(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof ac?px(t,e):t instanceof lc?mx(t,e):function(r,s){const a=fx(r,s),u=aE(a)+aE(r.Pe);return b_(a)&&b_(r.Pe)?dx(u):hx(r.serializer,u)}(t,e)}function gM(t,e,n){return t instanceof ac?px(t,e):t instanceof lc?mx(t,e):n}function fx(t,e){return t instanceof rf?function(i){return b_(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class nf extends np{}class ac extends np{constructor(e){super(),this.elements=e}}function px(t,e){const n=_x(e);for(const i of t.elements)n.some(r=>bi(r,i))||n.push(i);return{arrayValue:{values:n}}}class lc extends np{constructor(e){super(),this.elements=e}}function mx(t,e){let n=_x(e);for(const i of t.elements)n=n.filter(r=>!bi(r,i));return{arrayValue:{values:n}}}class rf extends np{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function aE(t){return yt(t.integerValue||t.doubleValue)}function _x(t){return yv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function vM(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof ac&&r instanceof ac||i instanceof lc&&r instanceof lc?Ua(i.elements,r.elements,bi):i instanceof rf&&r instanceof rf?bi(i.Pe,r.Pe):i instanceof nf&&r instanceof nf}(t.transform,e.transform)}class yM{constructor(e,n){this.version=e,this.transformResults=n}}class hi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hi}static exists(e){return new hi(void 0,e)}static updateTime(e){return new hi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ip{}function gx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Iv(t.key,hi.none()):new bc(t.key,t.data,hi.none());{const n=t.data,i=fn.empty();let r=new Wt(zt.comparator);for(let s of e.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new ws(t.key,i,new Rn(r.toArray()),hi.none())}}function wM(t,e,n){t instanceof bc?function(r,s,a){const u=r.value.clone(),h=uE(r.fieldTransforms,s,a.transformResults);u.setAll(h),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof ws?function(r,s,a){if(!dd(r.precondition,s))return void s.convertToUnknownDocument(a.version);const u=uE(r.fieldTransforms,s,a.transformResults),h=s.data;h.setAll(vx(r)),h.setAll(u),s.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(t,e,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Ru(t,e,n,i){return t instanceof bc?function(s,a,u,h){if(!dd(s.precondition,a))return u;const f=s.value.clone(),_=cE(s.fieldTransforms,h,a);return f.setAll(_),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof ws?function(s,a,u,h){if(!dd(s.precondition,a))return u;const f=cE(s.fieldTransforms,h,a),_=a.data;return _.setAll(vx(s)),_.setAll(f),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(s,a,u){return dd(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function EM(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=fx(i.transform,r||null);s!=null&&(n===null&&(n=fn.empty()),n.set(i.field,s))}return n||null}function lE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ua(i,r,(s,a)=>vM(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class bc extends ip{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ws extends ip{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function vx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function uE(t,e,n){const i=new Map;We(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],a=s.transform,u=e.data.field(s.field);i.set(s.field,gM(a,u,n[r]))}return i}function cE(t,e,n){const i=new Map;for(const r of t){const s=r.transform,a=n.data.field(r.field);i.set(r.field,_M(s,a,e))}return i}class Iv extends ip{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TM extends ip{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&wM(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ru(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Ru(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=cx();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let u=this.applyToLocalView(a,s.mutatedFields);u=n.has(r.key)?null:u;const h=gx(a,u);h!==null&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(ge.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),be())}isEqual(e){return this.batchId===e.batchId&&Ua(this.mutations,e.mutations,(n,i)=>lE(n,i))&&Ua(this.baseMutations,e.baseMutations,(n,i)=>lE(n,i))}}class Sv{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){We(e.mutations.length===i.length);let r=function(){return hM}();const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new Sv(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,Le;function xM(t){switch(t){default:return me();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function yx(t){if(t===void 0)return fr("GRPC error has no .code"),Q.UNKNOWN;switch(t){case vt.OK:return Q.OK;case vt.CANCELLED:return Q.CANCELLED;case vt.UNKNOWN:return Q.UNKNOWN;case vt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case vt.INTERNAL:return Q.INTERNAL;case vt.UNAVAILABLE:return Q.UNAVAILABLE;case vt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case vt.NOT_FOUND:return Q.NOT_FOUND;case vt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case vt.ABORTED:return Q.ABORTED;case vt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case vt.DATA_LOSS:return Q.DATA_LOSS;default:return me()}}(Le=vt||(vt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM=new Zs([4294967295,4294967295],0);function hE(t){const e=PM().encode(t),n=new BC;return n.update(e),new Uint8Array(n.digest())}function dE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Zs([n,i],0),new Zs([r,s],0)]}class Cv{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new pu(`Invalid padding: ${n}`);if(i<0)throw new pu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new pu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new pu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Zs.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Zs.fromNumber(i)));return r.compare(AM)===1&&(r=new Zs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=hE(e),[i,r]=dE(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(i,r,s);if(!this.de(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Cv(s,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.Ie===0)return;const n=hE(e),[i,r]=dE(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(i,r,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class pu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Nc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new rp(ge.min(),r,new Et(De),pr(),be())}}class Nc{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Nc(i,n,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class wx{constructor(e,n){this.targetId=e,this.me=n}}class Ex{constructor(e,n,i=qt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class fE{constructor(){this.fe=0,this.ge=mE(),this.pe=qt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=be(),n=be(),i=be();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:me()}}),new Nc(this.pe,this.ye,e,n,i)}ve(){this.we=!1,this.ge=mE()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,We(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class RM{constructor(e){this.Le=e,this.Be=new Map,this.ke=pr(),this.qe=pE(),this.Qe=new Et(De)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:me()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const s=r.target;if(L_(s))if(i===0){const a=new ae(s.path);this.Ue(n,a,Xt.newNoDocument(a,ge.min()))}else We(i===1);else{const a=this.Ye(n);if(a!==i){const u=this.Ze(e),h=u?this.Xe(u,e,a):1;if(h!==0){this.je(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,f)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,u;try{a=oo(i).toUint8Array()}catch(h){if(h instanceof XC)return Va("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new Cv(a,r,s)}catch(h){return Va(h instanceof pu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.Ie===0?null:u}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Le.tt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,s,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((s,a)=>{const u=this.Je(a);if(u){if(s.current&&L_(u.target)){const h=new ae(u.target.path);this.ke.get(h)!==null||this.it(a,h)||this.Ue(a,h,Xt.newNoDocument(h,e))}s.be&&(n.set(a,s.Ce()),s.ve())}});let i=be();this.qe.forEach((s,a)=>{let u=!0;a.forEachWhile(h=>{const f=this.Je(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const r=new rp(e,n,this.Qe,this.ke,i);return this.ke=pr(),this.qe=pE(),this.Qe=new Et(De),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new fE,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Wt(De),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new fE),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function pE(){return new Et(ae.comparator)}function mE(){return new Et(ae.comparator)}const kM={asc:"ASCENDING",desc:"DESCENDING"},bM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NM={and:"AND",or:"OR"};class LM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function D_(t,e){return t.useProto3Json||Xf(e)?e:{value:e}}function sf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Tx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function OM(t,e){return sf(t,e.toTimestamp())}function ki(t){return We(!!t),ge.fromTimestamp(function(n){const i=cs(n);return new At(i.seconds,i.nanos)}(t))}function xv(t,e){return M_(t,e).canonicalString()}function M_(t,e){const n=function(r){return new et(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Ix(t){const e=et.fromString(t);return We(Ax(e)),e}function F_(t,e){return xv(t.databaseId,e.path)}function cm(t,e){const n=Ix(e);if(n.get(1)!==t.databaseId.projectId)throw new oe(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new oe(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(Cx(n))}function Sx(t,e){return xv(t.databaseId,e)}function DM(t){const e=Ix(t);return e.length===4?et.emptyPath():Cx(e)}function V_(t){return new et(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Cx(t){return We(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function _E(t,e,n){return{name:F_(t,e),fields:n.value.mapValue.fields}}function MM(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:me()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(f,_){return f.useProto3Json?(We(_===void 0||typeof _=="string"),qt.fromBase64String(_||"")):(We(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),qt.fromUint8Array(_||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const _=f.code===void 0?Q.UNKNOWN:yx(f.code);return new oe(_,f.message||"")}(a);n=new Ex(i,r,s,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=cm(t,i.document.name),s=ki(i.document.updateTime),a=i.document.createTime?ki(i.document.createTime):ge.min(),u=new fn({mapValue:{fields:i.document.fields}}),h=Xt.newFoundDocument(r,s,a,u),f=i.targetIds||[],_=i.removedTargetIds||[];n=new fd(f,_,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=cm(t,i.document),s=i.readTime?ki(i.readTime):ge.min(),a=Xt.newNoDocument(r,s),u=i.removedTargetIds||[];n=new fd([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=cm(t,i.document),s=i.removedTargetIds||[];n=new fd([],s,r,null)}else{if(!("filter"in e))return me();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new CM(r,s),u=i.targetId;n=new wx(u,a)}}return n}function FM(t,e){let n;if(e instanceof bc)n={update:_E(t,e.key,e.value)};else if(e instanceof Iv)n={delete:F_(t,e.key)};else if(e instanceof ws)n={update:_E(t,e.key,e.data),updateMask:qM(e.fieldMask)};else{if(!(e instanceof TM))return me();n={verify:F_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,a){const u=a.transform;if(u instanceof nf)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ac)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof lc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof rf)return{fieldPath:a.field.canonicalString(),increment:u.Pe};throw me()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:OM(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:me()}(t,e.precondition)),n}function VM(t,e){return t&&t.length>0?(We(e!==void 0),t.map(n=>function(r,s){let a=r.updateTime?ki(r.updateTime):ki(s);return a.isEqual(ge.min())&&(a=ki(s)),new yM(a,r.transformResults||[])}(n,e))):[]}function UM(t,e){return{documents:[Sx(t,e.path)]}}function jM(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Sx(t,r);const s=function(f){if(f.length!==0)return Px(Ni.create(f,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(f){if(f.length!==0)return f.map(_=>function(w){return{field:ea(w.field),direction:WM(w.dir)}}(_))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=D_(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:n,parent:r}}function zM(t){let e=DM(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){We(i===1);const _=n.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let s=[];n.where&&(s=function(g){const w=xx(g);return w instanceof Ni&&nx(w)?w.getFilters():[w]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(w=>function(b){return new tf(ta(b.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(w))}(n.orderBy));let u=null;n.limit&&(u=function(g){let w;return w=typeof g=="object"?g.value:g,Xf(w)?null:w}(n.limit));let h=null;n.startAt&&(h=function(g){const w=!!g.before,C=g.values||[];return new ef(C,w)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const w=!g.before,C=g.values||[];return new ef(C,w)}(n.endAt)),sM(e,r,a,s,u,"F",h,f)}function BM(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ta(n.unaryFilter.field);return Ct.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ta(n.unaryFilter.field);return Ct.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ta(n.unaryFilter.field);return Ct.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ta(n.unaryFilter.field);return Ct.create(a,"!=",{nullValue:"NULL_VALUE"});default:return me()}}(t):t.fieldFilter!==void 0?function(n){return Ct.create(ta(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return me()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ni.create(n.compositeFilter.filters.map(i=>xx(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return me()}}(n.compositeFilter.op))}(t):me()}function WM(t){return kM[t]}function HM(t){return bM[t]}function $M(t){return NM[t]}function ea(t){return{fieldPath:t.canonicalString()}}function ta(t){return zt.fromServerFormat(t.fieldPath)}function Px(t){return t instanceof Ct?function(n){if(n.op==="=="){if(nE(n.value))return{unaryFilter:{field:ea(n.field),op:"IS_NAN"}};if(tE(n.value))return{unaryFilter:{field:ea(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nE(n.value))return{unaryFilter:{field:ea(n.field),op:"IS_NOT_NAN"}};if(tE(n.value))return{unaryFilter:{field:ea(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ea(n.field),op:HM(n.op),value:n.value}}}(t):t instanceof Ni?function(n){const i=n.getFilters().map(r=>Px(r));return i.length===1?i[0]:{compositeFilter:{op:$M(n.op),filters:i}}}(t):me()}function qM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Ax(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,n,i,r,s=ge.min(),a=ge.min(),u=qt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new qr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new qr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e){this.ct=e}}function KM(t){const e=zM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?O_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(){this.an=new QM}addToCollectionParentIndex(e,n){return this.an.add(n),Y.resolve()}getCollectionParents(e,n){return Y.resolve(this.an.getEntries(n))}addFieldIndex(e,n){return Y.resolve()}deleteFieldIndex(e,n){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,n){return Y.resolve()}getDocumentsMatchingTarget(e,n){return Y.resolve(null)}getIndexType(e,n){return Y.resolve(0)}getFieldIndexes(e,n){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,n){return Y.resolve(us.min())}getMinOffsetFromCollectionGroup(e,n){return Y.resolve(us.min())}updateCollectionGroup(e,n,i){return Y.resolve()}updateIndexEntries(e,n){return Y.resolve()}}class QM{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Wt(et.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Wt(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Ln(){return new Ba(0)}static Bn(){return new Ba(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(){this.changes=new nl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Y.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Ru(i.mutation,r,Rn.empty(),At.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,be()).next(()=>i))}getLocalViewOfDocuments(e,n,i=be()){const r=Hs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let a=fu();return s.forEach((u,h)=>{a=a.insert(u,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Hs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,be()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let s=pr();const a=Au(),u=function(){return Au()}();return n.forEach((h,f)=>{const _=i.get(f.key);r.has(f.key)&&(_===void 0||_.mutation instanceof ws)?s=s.insert(f.key,f):_!==void 0?(a.set(f.key,_.mutation.getFieldMask()),Ru(_.mutation,f,_.mutation.getFieldMask(),At.now())):a.set(f.key,Rn.empty())}),this.recalculateAndSaveOverlays(e,s).next(h=>(h.forEach((f,_)=>a.set(f,_)),n.forEach((f,_)=>{var g;return u.set(f,new XM(_,(g=a.get(f))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,n){const i=Au();let r=new Et((a,u)=>a-u),s=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let _=i.get(h)||Rn.empty();_=u.applyToLocalView(f,_),i.set(h,_);const g=(r.get(u.batchId)||be()).add(h);r=r.insert(u.batchId,g)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,_=h.value,g=cx();_.forEach(w=>{if(!s.has(w)){const C=gx(n.get(w),i.get(w));C!==null&&g.set(w,C),s=s.add(w)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return Y.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return ae.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):oM(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):Y.resolve(Hs());let u=-1,h=s;return a.next(f=>Y.forEach(f,(_,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),s.get(_)?Y.resolve():this.remoteDocumentCache.getEntry(e,_).next(w=>{h=h.insert(_,w)}))).next(()=>this.populateOverlays(e,f,s)).next(()=>this.computeViews(e,h,f,be())).next(_=>({batchId:u,changes:ux(_)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(i=>{let r=fu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let a=fu();return this.indexManager.getCollectionParents(e,s).next(u=>Y.forEach(u,h=>{const f=function(g,w){return new Jf(w,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,h.child(s));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(_=>{_.forEach((g,w)=>{a=a.insert(g,w)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(a=>{s.forEach((h,f)=>{const _=f.getKey();a.get(_)===null&&(a=a.insert(_,Xt.newInvalidDocument(_)))});let u=fu();return a.forEach((h,f)=>{const _=s.get(h);_!==void 0&&Ru(_.mutation,f,Rn.empty(),At.now()),tp(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,n){return Y.resolve(this.lr.get(n))}saveBundleMetadata(e,n){return this.lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:ki(r.createTime)}}(n)),Y.resolve()}getNamedQuery(e,n){return Y.resolve(this.hr.get(n))}saveNamedQuery(e,n){return this.hr.set(n.name,function(r){return{name:r.name,query:KM(r.bundledQuery),readTime:ki(r.readTime)}}(n)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this.overlays=new Et(ae.comparator),this.Pr=new Map}getOverlay(e,n){return Y.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Hs();return Y.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),Y.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Pr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Pr.delete(i)),Y.resolve()}getOverlaysForCollection(e,n,i){const r=Hs(),s=n.length+1,a=new ae(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===s&&h.largestBatchId>i&&r.set(h.getKey(),h)}return Y.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Et((f,_)=>f-_);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let _=s.get(f.largestBatchId);_===null&&(_=Hs(),s=s.insert(f.largestBatchId,_)),_.set(f.getKey(),f)}}const u=Hs(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,_)=>u.set(f,_)),!(u.size()>=r)););return Y.resolve(u)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.Pr.get(r.largestBatchId).delete(i.key);this.Pr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new SM(n,i));let s=this.Pr.get(n);s===void 0&&(s=be(),this.Pr.set(n,s)),this.Pr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this.Ir=new Wt(Lt.Tr),this.Er=new Wt(Lt.dr)}isEmpty(){return this.Ir.isEmpty()}addReference(e,n){const i=new Lt(e,n);this.Ir=this.Ir.add(i),this.Er=this.Er.add(i)}Ar(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Rr(new Lt(e,n))}Vr(e,n){e.forEach(i=>this.removeReference(i,n))}mr(e){const n=new ae(new et([])),i=new Lt(n,e),r=new Lt(n,e+1),s=[];return this.Er.forEachInRange([i,r],a=>{this.Rr(a),s.push(a.key)}),s}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Er=this.Er.delete(e)}pr(e){const n=new ae(new et([])),i=new Lt(n,e),r=new Lt(n,e+1);let s=be();return this.Er.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Lt(e,0),i=this.Ir.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Lt{constructor(e,n){this.key=e,this.yr=n}static Tr(e,n){return ae.comparator(e.key,n.key)||De(e.yr,n.yr)}static dr(e,n){return De(e.yr,n.yr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new Wt(Lt.Tr)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new IM(s,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Sr=this.Sr.add(new Lt(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Y.resolve(a)}lookupMutationBatch(e,n){return Y.resolve(this.br(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Dr(i),s=r<0?0:r;return Y.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Lt(n,0),r=new Lt(n,Number.POSITIVE_INFINITY),s=[];return this.Sr.forEachInRange([i,r],a=>{const u=this.br(a.yr);s.push(u)}),Y.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Wt(De);return n.forEach(r=>{const s=new Lt(r,0),a=new Lt(r,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([s,a],u=>{i=i.add(u.yr)})}),Y.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;ae.isDocumentKey(s)||(s=s.child(""));const a=new Lt(new ae(s),0);let u=new Wt(De);return this.Sr.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(h.yr)),!0)},a),Y.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(i=>{const r=this.br(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){We(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Sr;return Y.forEach(n.mutations,r=>{const s=new Lt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Sr=i})}xn(e){}containsKey(e,n){const i=new Lt(n,0),r=this.Sr.firstAfterOrEqual(i);return Y.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}vr(e,n){return this.Dr(e)}Dr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}br(e){const n=this.Dr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.Fr=e,this.docs=function(){return new Et(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.Fr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Y.resolve(i?i.document.mutableCopy():Xt.newInvalidDocument(n))}getEntries(e,n){let i=pr();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Xt.newInvalidDocument(r))}),Y.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=pr();const a=n.path,u=new ae(a.child("")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:_}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||zD(jD(_),i)<=0||(r.has(_.key)||tp(n,_))&&(s=s.insert(_.key,_.mutableCopy()))}return Y.resolve(s)}getAllFromCollectionGroup(e,n,i,r){me()}Mr(e,n){return Y.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new s2(this)}getSize(e){return Y.resolve(this.size)}}class s2 extends YM{constructor(e){super(),this.ur=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.ur.addEntry(e,r)):this.ur.removeEntry(i)}),Y.waitFor(n)}getFromCache(e,n){return this.ur.getEntry(e,n)}getAllFromCache(e,n){return this.ur.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e){this.persistence=e,this.Or=new nl(n=>wv(n),Ev),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.Nr=0,this.Lr=new Pv,this.targetCount=0,this.Br=Ba.Ln()}forEachTarget(e,n){return this.Or.forEach((i,r)=>n(r)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Nr&&(this.Nr=n),Y.resolve()}Qn(e){this.Or.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Ba(n),this.highestTargetId=n),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,n){return this.Qn(n),this.targetCount+=1,Y.resolve()}updateTargetData(e,n){return this.Qn(n),Y.resolve()}removeTargetData(e,n){return this.Or.delete(n.target),this.Lr.mr(n.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Or.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.Or.delete(a),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),Y.waitFor(s).next(()=>r)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,n){const i=this.Or.get(n)||null;return Y.resolve(i)}addMatchingKeys(e,n,i){return this.Lr.Ar(n,i),Y.resolve()}removeMatchingKeys(e,n,i){this.Lr.Vr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),Y.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Lr.mr(n),Y.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Lr.pr(n);return Y.resolve(i)}containsKey(e,n){return Y.resolve(this.Lr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n){this.kr={},this.overlays={},this.qr=new _v(0),this.Qr=!1,this.Qr=!0,this.Kr=new n2,this.referenceDelegate=e(this),this.$r=new o2(this),this.indexManager=new ZM,this.remoteDocumentCache=function(r){return new r2(r)}(i=>this.referenceDelegate.Ur(i)),this.serializer=new GM(n),this.Wr=new e2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new t2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.kr[e.toKey()];return i||(i=new i2(n,this.referenceDelegate),this.kr[e.toKey()]=i),i}getGlobalsCache(){return this.Kr}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Wr}runTransaction(e,n,i){re("MemoryPersistence","Starting transaction:",e);const r=new l2(this.qr.next());return this.referenceDelegate.Gr(),i(r).next(s=>this.referenceDelegate.zr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}jr(e,n){return Y.or(Object.values(this.kr).map(i=>()=>i.containsKey(e,n)))}}class l2 extends WD{constructor(e){super(),this.currentSequenceNumber=e}}class Av{constructor(e){this.persistence=e,this.Hr=new Pv,this.Jr=null}static Yr(e){return new Av(e)}get Zr(){if(this.Jr)return this.Jr;throw me()}addReference(e,n,i){return this.Hr.addReference(i,n),this.Zr.delete(i.toString()),Y.resolve()}removeReference(e,n,i){return this.Hr.removeReference(i,n),this.Zr.add(i.toString()),Y.resolve()}markPotentiallyOrphaned(e,n){return this.Zr.add(n.toString()),Y.resolve()}removeTarget(e,n){this.Hr.mr(n.targetId).forEach(r=>this.Zr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Zr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Gr(){this.Jr=new Set}zr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.Zr,i=>{const r=ae.fromPath(i);return this.Xr(e,r).next(s=>{s||n.removeEntry(r,ge.min())})}).next(()=>(this.Jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Xr(e,n).next(i=>{i?this.Zr.delete(n.toString()):this.Zr.add(n.toString())})}Ur(e){return 0}Xr(e,n){return Y.or([()=>Y.resolve(this.Hr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.jr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Ki=i,this.$i=r}static Ui(e,n){let i=be(),r=be();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Rv(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(){this.Wi=!1,this.Gi=!1,this.zi=100,this.ji=function(){return Zb()?8:HD($t())>0?6:4}()}initialize(e,n){this.Hi=e,this.indexManager=n,this.Wi=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.Ji(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Yi(e,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new u2;return this.Zi(e,n,a).next(u=>{if(s.result=u,this.Gi)return this.Xi(e,n,a,u.size)})}).next(()=>s.result)}Xi(e,n,i,r){return i.documentReadCount<this.zi?(Jl()<=ke.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Jo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.zi,"documents"),Y.resolve()):(Jl()<=ke.DEBUG&&re("QueryEngine","Query:",Jo(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ji*r?(Jl()<=ke.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Jo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ri(n))):Y.resolve())}Ji(e,n){if(oE(n))return Y.resolve(null);let i=Ri(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=O_(n,null,"F"),i=Ri(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const a=be(...s);return this.Hi.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.es(n,u);return this.ts(n,f,a,h.readTime)?this.Ji(e,O_(n,null,"F")):this.ns(e,f,n,h)}))})))}Yi(e,n,i,r){return oE(n)||r.isEqual(ge.min())?Y.resolve(null):this.Hi.getDocuments(e,i).next(s=>{const a=this.es(n,s);return this.ts(n,a,i,r)?Y.resolve(null):(Jl()<=ke.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Jo(n)),this.ns(e,a,n,UD(r,-1)).next(u=>u))})}es(e,n){let i=new Wt(ax(e));return n.forEach((r,s)=>{tp(e,s)&&(i=i.add(s))}),i}ts(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Zi(e,n,i){return Jl()<=ke.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Jo(n)),this.Hi.getDocumentsMatchingQuery(e,n,us.min(),i)}ns(e,n,i,r){return this.Hi.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n,i,r){this.persistence=e,this.rs=n,this.serializer=r,this.ss=new Et(De),this.os=new nl(s=>wv(s),Ev),this._s=new Map,this.us=e.getRemoteDocumentCache(),this.$r=e.getTargetCache(),this.Wr=e.getBundleCache(),this.cs(i)}cs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JM(this.us,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.us.setIndexManager(this.indexManager),this.rs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ss))}}function d2(t,e,n,i){return new h2(t,e,n,i)}async function Rx(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.cs(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],u=[];let h=be();for(const f of r){a.push(f.batchId);for(const _ of f.mutations)h=h.add(_.key)}for(const f of s){u.push(f.batchId);for(const _ of f.mutations)h=h.add(_.key)}return n.localDocuments.getDocuments(i,h).next(f=>({ls:f,removedBatchIds:a,addedBatchIds:u}))})})}function f2(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.us.newChangeBuffer({trackRemovals:!0});return function(u,h,f,_){const g=f.batch,w=g.keys();let C=Y.resolve();return w.forEach(b=>{C=C.next(()=>_.getEntry(h,b)).next(k=>{const D=f.docVersions.get(b);We(D!==null),k.version.compareTo(D)<0&&(g.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),_.addEntry(k)))})}),C.next(()=>u.mutationQueue.removeMutationBatch(h,g))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let h=be();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function kx(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.$r.getLastRemoteSnapshotVersion(n))}function p2(t,e){const n=ve(t),i=e.snapshotVersion;let r=n.ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.us.newChangeBuffer({trackRemovals:!0});r=n.ss;const u=[];e.targetChanges.forEach((_,g)=>{const w=r.get(g);if(!w)return;u.push(n.$r.removeMatchingKeys(s,_.removedDocuments,g).next(()=>n.$r.addMatchingKeys(s,_.addedDocuments,g)));let C=w.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?C=C.withResumeToken(qt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):_.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(_.resumeToken,i)),r=r.insert(g,C),function(k,D,A){return k.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(w,C,_)&&u.push(n.$r.updateTargetData(s,C))});let h=pr(),f=be();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(s,_))}),u.push(m2(s,a,e.documentUpdates).next(_=>{h=_.hs,f=_.Ps})),!i.isEqual(ge.min())){const _=n.$r.getLastRemoteSnapshotVersion(s).next(g=>n.$r.setTargetsMetadata(s,s.currentSequenceNumber,i));u.push(_)}return Y.waitFor(u).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,h,f)).next(()=>h)}).then(s=>(n.ss=r,s))}function m2(t,e,n){let i=be(),r=be();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let a=pr();return n.forEach((u,h)=>{const f=s.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),h.isNoDocument()&&h.version.isEqual(ge.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):re("LocalStore","Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{hs:a,Ps:r}})}function _2(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function g2(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.$r.getTargetData(i,e).next(s=>s?(r=s,Y.resolve(r)):n.$r.allocateTargetId(i).next(a=>(r=new qr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.$r.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.ss.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ss=n.ss.insert(i.targetId,i),n.os.set(e,i.targetId)),i})}async function U_(t,e,n){const i=ve(t),r=i.ss.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!kc(a))throw a;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.ss=i.ss.remove(e),i.os.delete(r.target)}function gE(t,e,n){const i=ve(t);let r=ge.min(),s=be();return i.persistence.runTransaction("Execute query","readwrite",a=>function(h,f,_){const g=ve(h),w=g.os.get(_);return w!==void 0?Y.resolve(g.ss.get(w)):g.$r.getTargetData(f,_)}(i,a,Ri(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.$r.getMatchingKeysForTargetId(a,u.targetId).next(h=>{s=h})}).next(()=>i.rs.getDocumentsMatchingQuery(a,e,n?r:ge.min(),n?s:be())).next(u=>(v2(i,lM(e),u),{documents:u,Is:s})))}function v2(t,e,n){let i=t._s.get(e)||ge.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t._s.set(e,i)}class vE{constructor(){this.activeTargetIds=pM()}Vs(e){this.activeTargetIds=this.activeTargetIds.add(e)}fs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Rs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class y2{constructor(){this.io=new vE,this.so={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.io.Vs(e),this.so[e]||"not-current"}updateQueryState(e,n,i){this.so[e]=n}removeLocalQueryTarget(e){this.io.fs(e)}isLocalQueryTarget(e){return this.io.activeTargetIds.has(e)}clearQueryState(e){delete this.so[e]}getAllActiveQueryTargets(){return this.io.activeTargetIds}isActiveQueryTarget(e){return this.io.activeTargetIds.has(e)}start(){return this.io=new vE,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(){this._o=()=>this.ao(),this.uo=()=>this.co(),this.lo=[],this.ho()}oo(e){this.lo.push(e)}shutdown(){window.removeEventListener("online",this._o),window.removeEventListener("offline",this.uo)}ho(){window.addEventListener("online",this._o),window.addEventListener("offline",this.uo)}ao(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.lo)e(0)}co(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.lo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wh=null;function hm(){return Wh===null?Wh=function(){return 268435456+Math.round(2147483648*Math.random())}():Wh++,"0x"+Wh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e){this.Po=e.Po,this.Io=e.Io}To(e){this.Eo=e}Ao(e){this.Ro=e}Vo(e){this.mo=e}onMessage(e){this.fo=e}close(){this.Io()}send(e){this.Po(e)}po(){this.Eo()}yo(){this.Ro()}wo(e){this.mo(e)}So(e){this.fo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="WebChannelConnection";class I2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.bo=i+"://"+n.host,this.Do=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get vo(){return!1}Fo(n,i,r,s,a){const u=hm(),h=this.Mo(n,i.toUriEncodedString());re("RestConnection",`Sending RPC '${n}' ${u}:`,h,r);const f={"google-cloud-resource-prefix":this.Do,"x-goog-request-params":this.Co};return this.xo(f,s,a),this.Oo(n,h,f,r).then(_=>(re("RestConnection",`Received RPC '${n}' ${u}: `,_),_),_=>{throw Va("RestConnection",`RPC '${n}' ${u} failed with error: `,_,"url: ",h,"request:",r),_})}No(n,i,r,s,a,u){return this.Fo(n,i,r,s,a)}xo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+tl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,a)=>n[a]=s),r&&r.headers.forEach((s,a)=>n[a]=s)}Mo(n,i){const r=E2[n];return`${this.bo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Oo(e,n,i,r){const s=hm();return new Promise((a,u)=>{const h=new WC;h.setWithCredentials(!0),h.listenOnce($C.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case cd.NO_ERROR:const _=h.getResponseJson();re(Zt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(_)),a(_);break;case cd.TIMEOUT:re(Zt,`RPC '${e}' ${s} timed out`),u(new oe(Q.DEADLINE_EXCEEDED,"Request time out"));break;case cd.HTTP_ERROR:const g=h.getStatus();if(re(Zt,`RPC '${e}' ${s} failed with status:`,g,"response text:",h.getResponseText()),g>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const C=w==null?void 0:w.error;if(C&&C.status&&C.message){const b=function(D){const A=D.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(A)>=0?A:Q.UNKNOWN}(C.status);u(new oe(b,C.message))}else u(new oe(Q.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new oe(Q.UNAVAILABLE,"Connection failed."));break;default:me()}}finally{re(Zt,`RPC '${e}' ${s} completed.`)}});const f=JSON.stringify(r);re(Zt,`RPC '${e}' ${s} sending request:`,r),h.send(n,"POST",f,i,15)})}Lo(e,n,i){const r=hm(),s=[this.bo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=KC(),u=GC(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.xmlHttpFactory=new HC({})),this.xo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const _=s.join("");re(Zt,`Creating RPC '${e}' stream ${r}: ${_}`,h);const g=a.createWebChannel(_,h);let w=!1,C=!1;const b=new T2({Po:D=>{C?re(Zt,`Not sending because RPC '${e}' stream ${r} is closed:`,D):(w||(re(Zt,`Opening RPC '${e}' stream ${r} transport.`),g.open(),w=!0),re(Zt,`RPC '${e}' stream ${r} sending:`,D),g.send(D))},Io:()=>g.close()}),k=(D,A,P)=>{D.listen(A,N=>{try{P(N)}catch(j){setTimeout(()=>{throw j},0)}})};return k(g,du.EventType.OPEN,()=>{C||(re(Zt,`RPC '${e}' stream ${r} transport opened.`),b.po())}),k(g,du.EventType.CLOSE,()=>{C||(C=!0,re(Zt,`RPC '${e}' stream ${r} transport closed`),b.wo())}),k(g,du.EventType.ERROR,D=>{C||(C=!0,Va(Zt,`RPC '${e}' stream ${r} transport errored:`,D),b.wo(new oe(Q.UNAVAILABLE,"The operation could not be completed")))}),k(g,du.EventType.MESSAGE,D=>{var A;if(!C){const P=D.data[0];We(!!P);const N=P,j=N.error||((A=N[0])===null||A===void 0?void 0:A.error);if(j){re(Zt,`RPC '${e}' stream ${r} received error:`,j);const G=j.status;let Z=function(R){const O=vt[R];if(O!==void 0)return yx(O)}(G),x=j.message;Z===void 0&&(Z=Q.INTERNAL,x="Unknown error status: "+G+" with message "+j.message),C=!0,b.wo(new oe(Z,x)),g.close()}else re(Zt,`RPC '${e}' stream ${r} received:`,P),b.So(P)}}),k(u,qC.STAT_EVENT,D=>{D.stat===A_.PROXY?re(Zt,`RPC '${e}' stream ${r} detected buffering proxy`):D.stat===A_.NOPROXY&&re(Zt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{b.yo()},0),b}}function dm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(t){return new LM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ai=e,this.timerId=n,this.Bo=i,this.ko=r,this.qo=s,this.Qo=0,this.Ko=null,this.$o=Date.now(),this.reset()}reset(){this.Qo=0}Uo(){this.Qo=this.qo}Wo(e){this.cancel();const n=Math.floor(this.Qo+this.Go()),i=Math.max(0,Date.now()-this.$o),r=Math.max(0,n-i);r>0&&re("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Qo} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Ko=this.ai.enqueueAfterDelay(this.timerId,r,()=>(this.$o=Date.now(),e())),this.Qo*=this.ko,this.Qo<this.Bo&&(this.Qo=this.Bo),this.Qo>this.qo&&(this.Qo=this.qo)}zo(){this.Ko!==null&&(this.Ko.skipDelay(),this.Ko=null)}cancel(){this.Ko!==null&&(this.Ko.cancel(),this.Ko=null)}Go(){return(Math.random()-.5)*this.Qo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,n,i,r,s,a,u,h){this.ai=e,this.jo=i,this.Ho=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.Jo=0,this.Yo=null,this.Zo=null,this.stream=null,this.Xo=0,this.e_=new bx(e,n)}t_(){return this.state===1||this.state===5||this.n_()}n_(){return this.state===2||this.state===3}start(){this.Xo=0,this.state!==4?this.auth():this.r_()}async stop(){this.t_()&&await this.close(0)}i_(){this.state=0,this.e_.reset()}s_(){this.n_()&&this.Yo===null&&(this.Yo=this.ai.enqueueAfterDelay(this.jo,6e4,()=>this.o_()))}__(e){this.a_(),this.stream.send(e)}async o_(){if(this.n_())return this.close(0)}a_(){this.Yo&&(this.Yo.cancel(),this.Yo=null)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}async close(e,n){this.a_(),this.u_(),this.e_.cancel(),this.Jo++,e!==4?this.e_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(fr(n.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),this.e_.Uo()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.c_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Vo(n)}c_(){}auth(){this.state=1;const e=this.l_(this.Jo),n=this.Jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Jo===n&&this.h_(i,r)},i=>{e(()=>{const r=new oe(Q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.P_(r)})})}h_(e,n){const i=this.l_(this.Jo);this.stream=this.I_(e,n),this.stream.To(()=>{i(()=>this.listener.To())}),this.stream.Ao(()=>{i(()=>(this.state=2,this.Zo=this.ai.enqueueAfterDelay(this.Ho,1e4,()=>(this.n_()&&(this.state=3),Promise.resolve())),this.listener.Ao()))}),this.stream.Vo(r=>{i(()=>this.P_(r))}),this.stream.onMessage(r=>{i(()=>++this.Xo==1?this.T_(r):this.onNext(r))})}r_(){this.state=5,this.e_.Wo(async()=>{this.state=0,this.start()})}P_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}l_(e){return n=>{this.ai.enqueueAndForget(()=>this.Jo===e?n():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class S2 extends Nx{constructor(e,n,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}I_(e,n){return this.connection.Lo("Listen",e,n)}T_(e){return this.onNext(e)}onNext(e){this.e_.reset();const n=MM(this.serializer,e),i=function(s){if(!("targetChange"in s))return ge.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?ge.min():a.readTime?ki(a.readTime):ge.min()}(e);return this.listener.E_(n,i)}d_(e){const n={};n.database=V_(this.serializer),n.addTarget=function(s,a){let u;const h=a.target;if(u=L_(h)?{documents:UM(s,h)}:{query:jM(s,h)._t},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=Tx(s,a.resumeToken);const f=D_(s,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(ge.min())>0){u.readTime=sf(s,a.snapshotVersion.toTimestamp());const f=D_(s,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=BM(this.serializer,e);i&&(n.labels=i),this.__(n)}A_(e){const n={};n.database=V_(this.serializer),n.removeTarget=e,this.__(n)}}class C2 extends Nx{constructor(e,n,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get R_(){return this.Xo>0}start(){this.lastStreamToken=void 0,super.start()}c_(){this.R_&&this.V_([])}I_(e,n){return this.connection.Lo("Write",e,n)}T_(e){return We(!!e.streamToken),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0),this.listener.m_()}onNext(e){We(!!e.streamToken),this.lastStreamToken=e.streamToken,this.e_.reset();const n=VM(e.writeResults,e.commitTime),i=ki(e.commitTime);return this.listener.f_(i,n)}g_(){const e={};e.database=V_(this.serializer),this.__(e)}V_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>FM(this.serializer,i))};this.__(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2 extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.p_=!1}y_(){if(this.p_)throw new oe(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Fo(e,n,i,r){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Fo(e,M_(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new oe(Q.UNKNOWN,s.toString())})}No(e,n,i,r,s){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.No(e,M_(n,i),r,a,u,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new oe(Q.UNKNOWN,a.toString())})}terminate(){this.p_=!0,this.connection.terminate()}}class P2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.w_=0,this.S_=null,this.b_=!0}D_(){this.w_===0&&(this.C_("Unknown"),this.S_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.S_=null,this.v_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}F_(e){this.state==="Online"?this.C_("Unknown"):(this.w_++,this.w_>=1&&(this.M_(),this.v_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.M_(),this.w_=0,e==="Online"&&(this.b_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}v_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.b_?(fr(n),this.b_=!1):re("OnlineStateTracker",n)}M_(){this.S_!==null&&(this.S_.cancel(),this.S_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.x_=[],this.O_=new Map,this.N_=new Set,this.L_=[],this.B_=s,this.B_.oo(a=>{i.enqueueAndForget(async()=>{vo(this)&&(re("RemoteStore","Restarting streams for network reachability change."),await async function(h){const f=ve(h);f.N_.add(4),await Lc(f),f.k_.set("Unknown"),f.N_.delete(4),await op(f)}(this))})}),this.k_=new P2(i,r)}}async function op(t){if(vo(t))for(const e of t.L_)await e(!0)}async function Lc(t){for(const e of t.L_)await e(!1)}function Lx(t,e){const n=ve(t);n.O_.has(e.targetId)||(n.O_.set(e.targetId,e),Lv(n)?Nv(n):il(n).n_()&&bv(n,e))}function kv(t,e){const n=ve(t),i=il(n);n.O_.delete(e),i.n_()&&Ox(n,e),n.O_.size===0&&(i.n_()?i.s_():vo(n)&&n.k_.set("Unknown"))}function bv(t,e){if(t.q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}il(t).d_(e)}function Ox(t,e){t.q_.xe(e),il(t).A_(e)}function Nv(t){t.q_=new RM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.O_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),il(t).start(),t.k_.D_()}function Lv(t){return vo(t)&&!il(t).t_()&&t.O_.size>0}function vo(t){return ve(t).N_.size===0}function Dx(t){t.q_=void 0}async function R2(t){t.k_.set("Online")}async function k2(t){t.O_.forEach((e,n)=>{bv(t,e)})}async function b2(t,e){Dx(t),Lv(t)?(t.k_.F_(e),Nv(t)):t.k_.set("Unknown")}async function N2(t,e,n){if(t.k_.set("Online"),e instanceof Ex&&e.state===2&&e.cause)try{await async function(r,s){const a=s.cause;for(const u of s.targetIds)r.O_.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.O_.delete(u),r.q_.removeTarget(u))}(t,e)}catch(i){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await of(t,i)}else if(e instanceof fd?t.q_.Ke(e):e instanceof wx?t.q_.He(e):t.q_.We(e),!n.isEqual(ge.min()))try{const i=await kx(t.localStore);n.compareTo(i)>=0&&await function(s,a){const u=s.q_.rt(a);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const _=s.O_.get(f);_&&s.O_.set(f,_.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach((h,f)=>{const _=s.O_.get(h);if(!_)return;s.O_.set(h,_.withResumeToken(qt.EMPTY_BYTE_STRING,_.snapshotVersion)),Ox(s,h);const g=new qr(_.target,h,f,_.sequenceNumber);bv(s,g)}),s.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){re("RemoteStore","Failed to raise snapshot:",i),await of(t,i)}}async function of(t,e,n){if(!kc(e))throw e;t.N_.add(1),await Lc(t),t.k_.set("Offline"),n||(n=()=>kx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re("RemoteStore","Retrying IndexedDB access"),await n(),t.N_.delete(1),await op(t)})}function Mx(t,e){return e().catch(n=>of(t,n,e))}async function ap(t){const e=ve(t),n=hs(e);let i=e.x_.length>0?e.x_[e.x_.length-1].batchId:-1;for(;L2(e);)try{const r=await _2(e.localStore,i);if(r===null){e.x_.length===0&&n.s_();break}i=r.batchId,O2(e,r)}catch(r){await of(e,r)}Fx(e)&&Vx(e)}function L2(t){return vo(t)&&t.x_.length<10}function O2(t,e){t.x_.push(e);const n=hs(t);n.n_()&&n.R_&&n.V_(e.mutations)}function Fx(t){return vo(t)&&!hs(t).t_()&&t.x_.length>0}function Vx(t){hs(t).start()}async function D2(t){hs(t).g_()}async function M2(t){const e=hs(t);for(const n of t.x_)e.V_(n.mutations)}async function F2(t,e,n){const i=t.x_.shift(),r=Sv.from(i,e,n);await Mx(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await ap(t)}async function V2(t,e){e&&hs(t).R_&&await async function(i,r){if(function(a){return xM(a)&&a!==Q.ABORTED}(r.code)){const s=i.x_.shift();hs(i).i_(),await Mx(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await ap(i)}}(t,e),Fx(t)&&Vx(t)}async function wE(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const i=vo(n);n.N_.add(3),await Lc(n),i&&n.k_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.N_.delete(3),await op(n)}async function U2(t,e){const n=ve(t);e?(n.N_.delete(2),await op(n)):e||(n.N_.add(2),await Lc(n),n.k_.set("Unknown"))}function il(t){return t.Q_||(t.Q_=function(n,i,r){const s=ve(n);return s.y_(),new S2(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{To:R2.bind(null,t),Ao:k2.bind(null,t),Vo:b2.bind(null,t),E_:N2.bind(null,t)}),t.L_.push(async e=>{e?(t.Q_.i_(),Lv(t)?Nv(t):t.k_.set("Unknown")):(await t.Q_.stop(),Dx(t))})),t.Q_}function hs(t){return t.K_||(t.K_=function(n,i,r){const s=ve(n);return s.y_(),new C2(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{To:()=>Promise.resolve(),Ao:D2.bind(null,t),Vo:V2.bind(null,t),m_:M2.bind(null,t),f_:F2.bind(null,t)}),t.L_.push(async e=>{e?(t.K_.i_(),await ap(t)):(await t.K_.stop(),t.x_.length>0&&(re("RemoteStore",`Stopping write stream with ${t.x_.length} pending writes`),t.x_=[]))})),t.K_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const a=Date.now()+i,u=new Ov(e,n,a,r,s);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dv(t,e){if(fr("AsyncQueue",`${e}: ${t}`),kc(t))return new oe(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this.comparator=e?(n,i)=>e(n,i)||ae.comparator(n.key,i.key):(n,i)=>ae.comparator(n.key,i.key),this.keyedMap=fu(),this.sortedSet=new Et(this.comparator)}static emptySet(e){return new xa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof xa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new xa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(){this.U_=new Et(ae.comparator)}track(e){const n=e.doc.key,i=this.U_.get(n);i?e.type!==0&&i.type===3?this.U_=this.U_.insert(n,e):e.type===3&&i.type!==1?this.U_=this.U_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.U_=this.U_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.U_=this.U_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.U_=this.U_.remove(n):e.type===1&&i.type===2?this.U_=this.U_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.U_=this.U_.insert(n,{type:2,doc:e.doc}):me():this.U_=this.U_.insert(n,e)}W_(){const e=[];return this.U_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Wa{constructor(e,n,i,r,s,a,u,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,s){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Wa(e,n,xa.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ep(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this.G_=void 0,this.z_=[]}j_(){return this.z_.some(e=>e.H_())}}class z2{constructor(){this.queries=TE(),this.onlineState="Unknown",this.J_=new Set}terminate(){(function(n,i){const r=ve(n),s=r.queries;r.queries=TE(),s.forEach((a,u)=>{for(const h of u.z_)h.onError(i)})})(this,new oe(Q.ABORTED,"Firestore shutting down"))}}function TE(){return new nl(t=>ox(t),ep)}async function Ux(t,e){const n=ve(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.j_()&&e.H_()&&(i=2):(s=new j2,i=e.H_()?0:1);try{switch(i){case 0:s.G_=await n.onListen(r,!0);break;case 1:s.G_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=Dv(a,`Initialization of query '${Jo(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,s),s.z_.push(e),e.Y_(n.onlineState),s.G_&&e.Z_(s.G_)&&Mv(n)}async function jx(t,e){const n=ve(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const a=s.z_.indexOf(e);a>=0&&(s.z_.splice(a,1),s.z_.length===0?r=e.H_()?0:1:!s.j_()&&e.H_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function B2(t,e){const n=ve(t);let i=!1;for(const r of e){const s=r.query,a=n.queries.get(s);if(a){for(const u of a.z_)u.Z_(r)&&(i=!0);a.G_=r}}i&&Mv(n)}function W2(t,e,n){const i=ve(t),r=i.queries.get(e);if(r)for(const s of r.z_)s.onError(n);i.queries.delete(e)}function Mv(t){t.J_.forEach(e=>{e.next()})}var j_,IE;(IE=j_||(j_={})).X_="default",IE.Cache="cache";class zx{constructor(e,n,i){this.query=e,this.ea=n,this.ta=!1,this.na=null,this.onlineState="Unknown",this.options=i||{}}Z_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Wa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ta?this.ra(e)&&(this.ea.next(e),n=!0):this.ia(e,this.onlineState)&&(this.sa(e),n=!0),this.na=e,n}onError(e){this.ea.error(e)}Y_(e){this.onlineState=e;let n=!1;return this.na&&!this.ta&&this.ia(this.na,e)&&(this.sa(this.na),n=!0),n}ia(e,n){if(!e.fromCache||!this.H_())return!0;const i=n!=="Offline";return(!this.options.oa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ra(e){if(e.docChanges.length>0)return!0;const n=this.na&&this.na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}sa(e){e=Wa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ta=!0,this.ea.next(e)}H_(){return this.options.source!==j_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e){this.key=e}}class Wx{constructor(e){this.key=e}}class H2{constructor(e,n){this.query=e,this.Ia=n,this.Ta=null,this.hasCachedResults=!1,this.current=!1,this.Ea=be(),this.mutatedKeys=be(),this.da=ax(e),this.Aa=new xa(this.da)}get Ra(){return this.Ia}Va(e,n){const i=n?n.ma:new EE,r=n?n.Aa:this.Aa;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((_,g)=>{const w=r.get(_),C=tp(this.query,g)?g:null,b=!!w&&this.mutatedKeys.has(w.key),k=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let D=!1;w&&C?w.data.isEqual(C.data)?b!==k&&(i.track({type:3,doc:C}),D=!0):this.fa(w,C)||(i.track({type:2,doc:C}),D=!0,(h&&this.da(C,h)>0||f&&this.da(C,f)<0)&&(u=!0)):!w&&C?(i.track({type:0,doc:C}),D=!0):w&&!C&&(i.track({type:1,doc:w}),D=!0,(h||f)&&(u=!0)),D&&(C?(a=a.add(C),s=k?s.add(_):s.delete(_)):(a=a.delete(_),s=s.delete(_)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const _=this.query.limitType==="F"?a.last():a.first();a=a.delete(_.key),s=s.delete(_.key),i.track({type:1,doc:_})}return{Aa:a,ma:i,ts:u,mutatedKeys:s}}fa(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Aa;this.Aa=e.Aa,this.mutatedKeys=e.mutatedKeys;const a=e.ma.W_();a.sort((_,g)=>function(C,b){const k=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me()}};return k(C)-k(b)}(_.type,g.type)||this.da(_.doc,g.doc)),this.ga(i),r=r!=null&&r;const u=n&&!r?this.pa():[],h=this.Ea.size===0&&this.current&&!r?1:0,f=h!==this.Ta;return this.Ta=h,a.length!==0||f?{snapshot:new Wa(this.query,e.Aa,s,a,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),ya:u}:{ya:u}}Y_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Aa:this.Aa,ma:new EE,mutatedKeys:this.mutatedKeys,ts:!1},!1)):{ya:[]}}wa(e){return!this.Ia.has(e)&&!!this.Aa.has(e)&&!this.Aa.get(e).hasLocalMutations}ga(e){e&&(e.addedDocuments.forEach(n=>this.Ia=this.Ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ia=this.Ia.delete(n)),this.current=e.current)}pa(){if(!this.current)return[];const e=this.Ea;this.Ea=be(),this.Aa.forEach(i=>{this.wa(i.key)&&(this.Ea=this.Ea.add(i.key))});const n=[];return e.forEach(i=>{this.Ea.has(i)||n.push(new Wx(i))}),this.Ea.forEach(i=>{e.has(i)||n.push(new Bx(i))}),n}Sa(e){this.Ia=e.Is,this.Ea=be();const n=this.Va(e.documents);return this.applyChanges(n,!0)}ba(){return Wa.fromInitialDocuments(this.query,this.Aa,this.mutatedKeys,this.Ta===0,this.hasCachedResults)}}class $2{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class q2{constructor(e){this.key=e,this.Da=!1}}class G2{constructor(e,n,i,r,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.va=new nl(u=>ox(u),ep),this.Fa=new Map,this.Ma=new Set,this.xa=new Et(ae.comparator),this.Oa=new Map,this.Na=new Pv,this.La={},this.Ba=new Map,this.ka=Ba.Bn(),this.onlineState="Unknown",this.qa=void 0}get isPrimaryClient(){return this.qa===!0}}async function K2(t,e,n=!0){const i=Zx(t);let r;const s=i.va.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ba()):r=await Hx(i,e,n,!0),r}async function Z2(t,e){const n=Zx(t);await Hx(n,e,!0,!1)}async function Hx(t,e,n,i){const r=await g2(t.localStore,Ri(e)),s=r.targetId,a=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let u;return i&&(u=await Q2(t,e,s,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&Lx(t.remoteStore,r),u}async function Q2(t,e,n,i,r){t.Qa=(g,w,C)=>async function(k,D,A,P){let N=D.view.Va(A);N.ts&&(N=await gE(k.localStore,D.query,!1).then(({documents:x})=>D.view.Va(x,N)));const j=P&&P.targetChanges.get(D.targetId),G=P&&P.targetMismatches.get(D.targetId)!=null,Z=D.view.applyChanges(N,k.isPrimaryClient,j,G);return CE(k,D.targetId,Z.ya),Z.snapshot}(t,g,w,C);const s=await gE(t.localStore,e,!0),a=new H2(e,s.Is),u=a.Va(s.documents),h=Nc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,h);CE(t,n,f.ya);const _=new $2(e,n,a);return t.va.set(e,_),t.Fa.has(n)?t.Fa.get(n).push(e):t.Fa.set(n,[e]),f.snapshot}async function Y2(t,e,n){const i=ve(t),r=i.va.get(e),s=i.Fa.get(r.targetId);if(s.length>1)return i.Fa.set(r.targetId,s.filter(a=>!ep(a,e))),void i.va.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await U_(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&kv(i.remoteStore,r.targetId),z_(i,r.targetId)}).catch(Rc)):(z_(i,r.targetId),await U_(i.localStore,r.targetId,!0))}async function X2(t,e){const n=ve(t),i=n.va.get(e),r=n.Fa.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),kv(n.remoteStore,i.targetId))}async function J2(t,e,n){const i=oF(t);try{const r=await function(a,u){const h=ve(a),f=At.now(),_=u.reduce((C,b)=>C.add(b.key),be());let g,w;return h.persistence.runTransaction("Locally write mutations","readwrite",C=>{let b=pr(),k=be();return h.us.getEntries(C,_).next(D=>{b=D,b.forEach((A,P)=>{P.isValidDocument()||(k=k.add(A))})}).next(()=>h.localDocuments.getOverlayedDocuments(C,b)).next(D=>{g=D;const A=[];for(const P of u){const N=EM(P,g.get(P.key).overlayedDocument);N!=null&&A.push(new ws(P.key,N,JC(N.value.mapValue),hi.exists(!0)))}return h.mutationQueue.addMutationBatch(C,f,A,u)}).next(D=>{w=D;const A=D.applyToLocalDocumentSet(g,k);return h.documentOverlayCache.saveOverlays(C,D.batchId,A)})}).then(()=>({batchId:w.batchId,changes:ux(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,h){let f=a.La[a.currentUser.toKey()];f||(f=new Et(De)),f=f.insert(u,h),a.La[a.currentUser.toKey()]=f}(i,r.batchId,n),await Oc(i,r.changes),await ap(i.remoteStore)}catch(r){const s=Dv(r,"Failed to persist write");n.reject(s)}}async function $x(t,e){const n=ve(t);try{const i=await p2(n.localStore,e);e.targetChanges.forEach((r,s)=>{const a=n.Oa.get(s);a&&(We(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.Da=!0:r.modifiedDocuments.size>0?We(a.Da):r.removedDocuments.size>0&&(We(a.Da),a.Da=!1))}),await Oc(n,i,e)}catch(i){await Rc(i)}}function SE(t,e,n){const i=ve(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.va.forEach((s,a)=>{const u=a.view.Y_(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const h=ve(a);h.onlineState=u;let f=!1;h.queries.forEach((_,g)=>{for(const w of g.z_)w.Y_(u)&&(f=!0)}),f&&Mv(h)}(i.eventManager,e),r.length&&i.Ca.E_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function eF(t,e,n){const i=ve(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Oa.get(e),s=r&&r.key;if(s){let a=new Et(ae.comparator);a=a.insert(s,Xt.newNoDocument(s,ge.min()));const u=be().add(s),h=new rp(ge.min(),new Map,new Et(De),a,u);await $x(i,h),i.xa=i.xa.remove(s),i.Oa.delete(e),Fv(i)}else await U_(i.localStore,e,!1).then(()=>z_(i,e,n)).catch(Rc)}async function tF(t,e){const n=ve(t),i=e.batch.batchId;try{const r=await f2(n.localStore,e);Gx(n,i,null),qx(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Oc(n,r)}catch(r){await Rc(r)}}async function nF(t,e,n){const i=ve(t);try{const r=await function(a,u){const h=ve(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let _;return h.mutationQueue.lookupMutationBatch(f,u).next(g=>(We(g!==null),_=g.keys(),h.mutationQueue.removeMutationBatch(f,g))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,_,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,_)).next(()=>h.localDocuments.getDocuments(f,_))})}(i.localStore,e);Gx(i,e,n),qx(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Oc(i,r)}catch(r){await Rc(r)}}function qx(t,e){(t.Ba.get(e)||[]).forEach(n=>{n.resolve()}),t.Ba.delete(e)}function Gx(t,e,n){const i=ve(t);let r=i.La[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.La[i.currentUser.toKey()]=r}}function z_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Fa.get(e))t.va.delete(i),n&&t.Ca.Ka(i,n);t.Fa.delete(e),t.isPrimaryClient&&t.Na.mr(e).forEach(i=>{t.Na.containsKey(i)||Kx(t,i)})}function Kx(t,e){t.Ma.delete(e.path.canonicalString());const n=t.xa.get(e);n!==null&&(kv(t.remoteStore,n),t.xa=t.xa.remove(e),t.Oa.delete(n),Fv(t))}function CE(t,e,n){for(const i of n)i instanceof Bx?(t.Na.addReference(i.key,e),iF(t,i)):i instanceof Wx?(re("SyncEngine","Document no longer in limbo: "+i.key),t.Na.removeReference(i.key,e),t.Na.containsKey(i.key)||Kx(t,i.key)):me()}function iF(t,e){const n=e.key,i=n.path.canonicalString();t.xa.get(n)||t.Ma.has(i)||(re("SyncEngine","New document in limbo: "+n),t.Ma.add(i),Fv(t))}function Fv(t){for(;t.Ma.size>0&&t.xa.size<t.maxConcurrentLimboResolutions;){const e=t.Ma.values().next().value;t.Ma.delete(e);const n=new ae(et.fromString(e)),i=t.ka.next();t.Oa.set(i,new q2(n)),t.xa=t.xa.insert(n,i),Lx(t.remoteStore,new qr(Ri(Tv(n.path)),i,"TargetPurposeLimboResolution",_v.oe))}}async function Oc(t,e,n){const i=ve(t),r=[],s=[],a=[];i.va.isEmpty()||(i.va.forEach((u,h)=>{a.push(i.Qa(h,e,n).then(f=>{var _;if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:(_=n==null?void 0:n.targetChanges.get(h.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){r.push(f);const g=Rv.Ui(h.targetId,f);s.push(g)}}))}),await Promise.all(a),i.Ca.E_(r),await async function(h,f){const _=ve(h);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Y.forEach(f,w=>Y.forEach(w.Ki,C=>_.persistence.referenceDelegate.addReference(g,w.targetId,C)).next(()=>Y.forEach(w.$i,C=>_.persistence.referenceDelegate.removeReference(g,w.targetId,C)))))}catch(g){if(!kc(g))throw g;re("LocalStore","Failed to update sequence numbers: "+g)}for(const g of f){const w=g.targetId;if(!g.fromCache){const C=_.ss.get(w),b=C.snapshotVersion,k=C.withLastLimboFreeSnapshotVersion(b);_.ss=_.ss.insert(w,k)}}}(i.localStore,s))}async function rF(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const i=await Rx(n.localStore,e);n.currentUser=e,function(s,a){s.Ba.forEach(u=>{u.forEach(h=>{h.reject(new oe(Q.CANCELLED,a))})}),s.Ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Oc(n,i.ls)}}function sF(t,e){const n=ve(t),i=n.Oa.get(e);if(i&&i.Da)return be().add(i.key);{let r=be();const s=n.Fa.get(e);if(!s)return r;for(const a of s){const u=n.va.get(a);r=r.unionWith(u.view.Ra)}return r}}function Zx(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$x.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eF.bind(null,e),e.Ca.E_=B2.bind(null,e.eventManager),e.Ca.Ka=W2.bind(null,e.eventManager),e}function oF(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nF.bind(null,e),e}class xE{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=sp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return d2(this.persistence,new c2,e.initialUser,this.serializer)}createPersistence(e){return new a2(Av.Yr,this.serializer)}createSharedClientState(e){return new y2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class aF{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>SE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=rF.bind(null,this.syncEngine),await U2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new z2}()}createDatastore(e){const n=sp(e.databaseInfo.databaseId),i=function(s){return new I2(s)}(e.databaseInfo);return function(s,a,u,h){return new x2(s,a,u,h)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,a,u){return new A2(i,r,s,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>SE(this.syncEngine,n,0),function(){return yE.D()?new yE:new w2}())}createSyncEngine(e,n){return function(r,s,a,u,h,f,_){const g=new G2(r,s,a,u,h,f);return _&&(g.qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=ve(r);re("RemoteStore","RemoteStore shutting down."),s.N_.add(5),await Lc(s),s.B_.shutdown(),s.k_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Wa(this.observer.next,e)}error(e){this.observer.error?this.Wa(this.observer.error,e):fr("Uncaught Error in snapshot listener:",e.toString())}Ga(){this.muted=!0}Wa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Qt.UNAUTHENTICATED,this.clientId=QC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async s=>{re("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(i,s=>(re("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new oe(Q.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Dv(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function fm(t,e){t.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await Rx(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function PE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await cF(t);re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>wE(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>wE(e.remoteStore,r)),t._onlineComponents=e}function uF(t){return t.name==="FirebaseError"?t.code===Q.FAILED_PRECONDITION||t.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function cF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{await fm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!uF(n))throw n;Va("Error using user provided cache. Falling back to memory cache: "+n),await fm(t,new xE)}}else re("FirestoreClient","Using default OfflineComponentProvider"),await fm(t,new xE);return t._offlineComponents}async function Yx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),await PE(t,t._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),await PE(t,new aF))),t._onlineComponents}function hF(t){return Yx(t).then(e=>e.syncEngine)}async function Xx(t){const e=await Yx(t),n=e.eventManager;return n.onListen=K2.bind(null,e.syncEngine),n.onUnlisten=Y2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Z2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=X2.bind(null,e.syncEngine),n}function dF(t,e,n={}){const i=new sr;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,u,h,f){const _=new Qx({next:w=>{a.enqueueAndForget(()=>jx(s,g));const C=w.docs.has(u);!C&&w.fromCache?f.reject(new oe(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&w.fromCache&&h&&h.source==="server"?f.reject(new oe(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(w)},error:w=>f.reject(w)}),g=new zx(Tv(u.path),_,{includeMetadataChanges:!0,oa:!0});return Ux(s,g)}(await Xx(t),t.asyncQueue,e,n,i)),i.promise}function fF(t,e,n={}){const i=new sr;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,u,h,f){const _=new Qx({next:w=>{a.enqueueAndForget(()=>jx(s,g)),w.fromCache&&h.source==="server"?f.reject(new oe(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(w)},error:w=>f.reject(w)}),g=new zx(u,_,{includeMetadataChanges:!0,oa:!0});return Ux(s,g)}(await Xx(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(t,e,n){if(!n)throw new oe(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function pF(t,e,n,i){if(e===!0&&i===!0)throw new oe(Q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function RE(t){if(!ae.isDocumentKey(t))throw new oe(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function kE(t){if(ae.isDocumentKey(t))throw new oe(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Vv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me()}function mr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vv(t);throw new oe(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new oe(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Jx((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new oe(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new oe(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new oe(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lp{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bE({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new oe(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new oe(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bE(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new kD;switch(i.type){case"firstParty":return new OD(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new oe(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=AE.get(n);i&&(re("ComponentProvider","Removing Datastore"),AE.delete(n),i.terminate())}(this),Promise.resolve()}}function mF(t,e,n,i={}){var r;const s=(t=mr(t,lp))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Va("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),i.mockUserToken){let u,h;if(typeof i.mockUserToken=="string")u=i.mockUserToken,h=Qt.MOCK_USER;else{u=nv(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new oe(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Qt(f)}t._authCredentials=new bD(new ZC(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new up(this.firestore,e,this._query)}}class Nn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nn(this.firestore,e,this._key)}}class rs extends up{constructor(e,n,i){super(e,n,Tv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nn(this.firestore,null,new ae(e))}withConverter(e){return new rs(this.firestore,e,this._path)}}function On(t,e,...n){if(t=Ge(t),eP("collection","path",e),t instanceof lp){const i=et.fromString(e,...n);return kE(i),new rs(t,null,i)}{if(!(t instanceof Nn||t instanceof rs))throw new oe(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(et.fromString(e,...n));return kE(i),new rs(t.firestore,null,i)}}function _r(t,e,...n){if(t=Ge(t),arguments.length===1&&(e=QC.newId()),eP("doc","path",e),t instanceof lp){const i=et.fromString(e,...n);return RE(i),new Nn(t,null,new ae(i))}{if(!(t instanceof Nn||t instanceof rs))throw new oe(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(et.fromString(e,...n));return RE(i),new Nn(t.firestore,t instanceof rs?t.converter:null,new ae(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(){this._u=Promise.resolve(),this.au=[],this.uu=!1,this.cu=[],this.lu=null,this.hu=!1,this.Pu=!1,this.Iu=[],this.e_=new bx(this,"async_queue_retry"),this.Tu=()=>{const n=dm();n&&re("AsyncQueue","Visibility state changed to "+n.visibilityState),this.e_.zo()};const e=dm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Tu)}get isShuttingDown(){return this.uu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Eu(),this.du(e)}enterRestrictedMode(e){if(!this.uu){this.uu=!0,this.Pu=e||!1;const n=dm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Tu)}}enqueue(e){if(this.Eu(),this.uu)return new Promise(()=>{});const n=new sr;return this.du(()=>this.uu&&this.Pu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.au.push(e),this.Au()))}async Au(){if(this.au.length!==0){try{await this.au[0](),this.au.shift(),this.e_.reset()}catch(e){if(!kc(e))throw e;re("AsyncQueue","Operation failed with retryable error: "+e)}this.au.length>0&&this.e_.Wo(()=>this.Au())}}du(e){const n=this._u.then(()=>(this.hu=!0,e().catch(i=>{this.lu=i,this.hu=!1;const r=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(i);throw fr("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.hu=!1,i))));return this._u=n,n}enqueueAfterDelay(e,n,i){this.Eu(),this.Iu.indexOf(e)>-1&&(n=0);const r=Ov.createAndSchedule(this,e,n,i,s=>this.Ru(s));return this.cu.push(r),r}Eu(){this.lu&&me()}verifyOperationInProgress(){}async Vu(){let e;do e=this._u,await e;while(e!==this._u)}mu(e){for(const n of this.cu)if(n.timerId===e)return!0;return!1}fu(e){return this.Vu().then(()=>{this.cu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.cu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Vu()})}gu(e){this.Iu.push(e)}Ru(e){const n=this.cu.indexOf(e);this.cu.splice(n,1)}}class rl extends lp{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new _F}(),this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||tP(this),this._firestoreClient.terminate()}}function gF(t,e){const n=typeof t=="object"?t:Gf(),i=typeof t=="string"?t:"(default)",r=Sc(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=tv("firestore");s&&mF(r,...s)}return r}function Uv(t){return t._firestoreClient||tP(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function tP(t){var e,n,i;const r=t._freezeSettings(),s=function(u,h,f,_){return new GD(u,h,f,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,Jx(_.experimentalLongPollingOptions),_.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new lF(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ha(qt.fromBase64String(e))}catch(n){throw new oe(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ha(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new oe(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new oe(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new oe(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF=/^__.*__$/;class yF{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ws(e,this.data,this.fieldMask,n,this.fieldTransforms):new bc(e,this.data,n,this.fieldTransforms)}}class nP{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ws(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function iP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me()}}class Bv{constructor(e,n,i,r,s,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.pu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get yu(){return this.settings.yu}wu(e){return new Bv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Su(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.wu({path:i,bu:!1});return r.Du(e),r}Cu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.wu({path:i,bu:!1});return r.pu(),r}vu(e){return this.wu({path:void 0,bu:!0})}Fu(e){return af(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.xu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Du(this.path.get(e))}Du(e){if(e.length===0)throw this.Fu("Document fields must not be empty");if(iP(this.yu)&&vF.test(e))throw this.Fu('Document fields cannot begin and end with "__"')}}class wF{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||sp(e)}Ou(e,n,i,r=!1){return new Bv({yu:e,methodName:n,xu:i,path:zt.emptyPath(),bu:!1,Mu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rP(t){const e=t._freezeSettings(),n=sp(t._databaseId);return new wF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function EF(t,e,n,i,r,s={}){const a=t.Ou(s.merge||s.mergeFields?2:0,e,n,r);Wv("Data must be an object, but it was:",a,i);const u=sP(i,a);let h,f;if(s.merge)h=new Rn(a.fieldMask),f=a.fieldTransforms;else if(s.mergeFields){const _=[];for(const g of s.mergeFields){const w=B_(e,g,n);if(!a.contains(w))throw new oe(Q.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);aP(_,w)||_.push(w)}h=new Rn(_),f=a.fieldTransforms.filter(g=>h.covers(g.field))}else h=null,f=a.fieldTransforms;return new yF(new fn(u),h,f)}class hp extends jv{_toFieldTransform(e){if(e.yu!==2)throw e.yu===1?e.Fu(`${this._methodName}() can only appear at the top level of your update data`):e.Fu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hp}}function TF(t,e,n,i){const r=t.Ou(1,e,n);Wv("Data must be an object, but it was:",r,i);const s=[],a=fn.empty();go(i,(h,f)=>{const _=Hv(e,h,n);f=Ge(f);const g=r.Cu(_);if(f instanceof hp)s.push(_);else{const w=dp(f,g);w!=null&&(s.push(_),a.set(_,w))}});const u=new Rn(s);return new nP(a,u,r.fieldTransforms)}function IF(t,e,n,i,r,s){const a=t.Ou(1,e,n),u=[B_(e,i,n)],h=[r];if(s.length%2!=0)throw new oe(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<s.length;w+=2)u.push(B_(e,s[w])),h.push(s[w+1]);const f=[],_=fn.empty();for(let w=u.length-1;w>=0;--w)if(!aP(f,u[w])){const C=u[w];let b=h[w];b=Ge(b);const k=a.Cu(C);if(b instanceof hp)f.push(C);else{const D=dp(b,k);D!=null&&(f.push(C),_.set(C,D))}}const g=new Rn(f);return new nP(_,g,a.fieldTransforms)}function dp(t,e){if(oP(t=Ge(t)))return Wv("Unsupported field value:",e,t),sP(t,e);if(t instanceof jv)return function(i,r){if(!iP(r.yu))throw r.Fu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Fu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.bu&&e.yu!==4)throw e.Fu("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const u of i){let h=dp(u,r.vu(a));h==null&&(h={nullValue:"NULL_VALUE"}),s.push(h),a++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Ge(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return mM(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=At.fromDate(i);return{timestampValue:sf(r.serializer,s)}}if(i instanceof At){const s=new At(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:sf(r.serializer,s)}}if(i instanceof zv)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ha)return{bytesValue:Tx(r.serializer,i._byteString)};if(i instanceof Nn){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Fu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:xv(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Fu(`Unsupported field value: ${Vv(i)}`)}(t,e)}function sP(t,e){const n={};return YC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):go(t,(i,r)=>{const s=dp(r,e.Su(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function oP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof At||t instanceof zv||t instanceof Ha||t instanceof Nn||t instanceof jv)}function Wv(t,e,n){if(!oP(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=Vv(n);throw i==="an object"?e.Fu(t+" a custom object"):e.Fu(t+" "+i)}}function B_(t,e,n){if((e=Ge(e))instanceof cp)return e._internalPath;if(typeof e=="string")return Hv(t,e);throw af("Field path arguments must be of type string or ",t,!1,void 0,n)}const SF=new RegExp("[~\\*/\\[\\]]");function Hv(t,e,n){if(e.search(SF)>=0)throw af(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new cp(...e.split("."))._internalPath}catch{throw af(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function af(t,e,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(s||a)&&(h+=" (found",s&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new oe(Q.INVALID_ARGUMENT,u+t+h)}function aP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(uP("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class CF extends lP{data(){return super.data()}}function uP(t,e){return typeof e=="string"?Hv(t,e):e instanceof cp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new oe(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PF{convertValue(e,n="none"){switch(ao(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(oo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw me()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return go(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertGeoPoint(e){return new zv(yt(e.latitude),yt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=vv(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(rc(e));default:return null}}convertTimestamp(e){const n=cs(e);return new At(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=et.fromString(e);We(Ax(i));const r=new sc(i.get(1),i.get(3)),s=new ae(i.popFirst(5));return r.isEqual(n)||fr(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AF(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cP extends lP{constructor(e,n,i,r,s,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new pd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(uP("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class pd extends cP{data(e={}){return super.data(e)}}class RF{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new mu(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new pd(this._firestore,this._userDataWriter,i.key,i,new mu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new oe(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const h=new pd(r._firestore,r._userDataWriter,u.doc.key,u.doc,new mu(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>s||u.type!==3).map(u=>{const h=new pd(r._firestore,r._userDataWriter,u.doc.key,u.doc,new mu(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,_=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),_=a.indexOf(u.doc.key)),{type:kF(u.type),doc:h,oldIndex:f,newIndex:_}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function kF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bF(t){t=mr(t,Nn);const e=mr(t.firestore,rl);return dF(Uv(e),t._key).then(n=>NF(e,t,n))}class hP extends PF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ha(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nn(this.firestore,null,n)}}function gr(t){t=mr(t,up);const e=mr(t.firestore,rl),n=Uv(e),i=new hP(e);return xF(t._query),fF(n,t._query).then(r=>new RF(e,i,t,r))}function $v(t,e,n,...i){t=mr(t,Nn);const r=mr(t.firestore,rl),s=rP(r);let a;return a=typeof(e=Ge(e))=="string"||e instanceof cp?IF(s,"updateDoc",t._key,e,n,i):TF(s,"updateDoc",t._key,e),qv(r,[a.toMutation(t._key,hi.exists(!0))])}function $a(t){return qv(mr(t.firestore,rl),[new Iv(t._key,hi.none())])}function sl(t,e){const n=mr(t.firestore,rl),i=_r(t),r=AF(t.converter,e);return qv(n,[EF(rP(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,hi.exists(!1))]).then(()=>i)}function qv(t,e){return function(i,r){const s=new sr;return i.asyncQueue.enqueueAndForget(async()=>J2(await hF(i),r,s)),s.promise}(Uv(t),e)}function NF(t,e,n){const i=n.docs.get(e._key),r=new hP(t);return new cP(t,r,e._key,i,new mu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){tl=r})(gs),ls(new hr("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),u=new rl(new ND(i.getProvider("auth-internal")),new MD(i.getProvider("app-check-internal")),function(f,_){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new oe(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sc(f.options.projectId,_)}(a,r),a);return s=Object.assign({useFetchStreams:n},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),Kn(Y0,"4.6.5",e),Kn(Y0,"4.6.5","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP="firebasestorage.googleapis.com",fP="storageBucket",LF=2*60*1e3,OF=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht extends Li{constructor(e,n,i=0){super(pm(e),`Firebase Storage: ${n} (${pm(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ht.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return pm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ct;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ct||(ct={}));function pm(t){return"storage/"+t}function Gv(){const t="An unknown error occurred, please check the error payload for server response.";return new ht(ct.UNKNOWN,t)}function DF(t){return new ht(ct.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function MF(t){return new ht(ct.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function FF(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ht(ct.UNAUTHENTICATED,t)}function VF(){return new ht(ct.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function UF(t){return new ht(ct.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function jF(){return new ht(ct.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function zF(){return new ht(ct.CANCELED,"User canceled the upload/download.")}function BF(t){return new ht(ct.INVALID_URL,"Invalid URL '"+t+"'.")}function WF(t){return new ht(ct.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function HF(){return new ht(ct.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+fP+"' property when initializing the app?")}function $F(){return new ht(ct.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qF(){return new ht(ct.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function GF(t){return new ht(ct.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function W_(t){return new ht(ct.INVALID_ARGUMENT,t)}function pP(){return new ht(ct.APP_DELETED,"The Firebase app was deleted.")}function KF(t){return new ht(ct.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ku(t,e){return new ht(ct.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function eu(t){throw new ht(ct.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=kn.makeFromUrl(e,n)}catch{return new kn(e,"")}if(i.path==="")return i;throw WF(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const a="(/(.*))?$",u=new RegExp("^gs://"+r+a,"i"),h={bucket:1,path:3};function f(j){j.path_=decodeURIComponent(j.path)}const _="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",C=new RegExp(`^https?://${g}/${_}/b/${r}/o${w}`,"i"),b={bucket:1,path:3},k=n===dP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,D="([^?#]*)",A=new RegExp(`^https?://${k}/${r}/${D}`,"i"),N=[{regex:u,indices:h,postModify:s},{regex:C,indices:b,postModify:f},{regex:A,indices:{bucket:1,path:2},postModify:f}];for(let j=0;j<N.length;j++){const G=N[j],Z=G.regex.exec(e);if(Z){const x=Z[G.indices.bucket];let I=Z[G.indices.path];I||(I=""),i=new kn(x,I),G.postModify(i);break}}if(i==null)throw BF(e);return i}}class ZF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QF(t,e,n){let i=1,r=null,s=null,a=!1,u=0;function h(){return u===2}let f=!1;function _(...D){f||(f=!0,e.apply(null,D))}function g(D){r=setTimeout(()=>{r=null,t(C,h())},D)}function w(){s&&clearTimeout(s)}function C(D,...A){if(f){w();return}if(D){w(),_.call(null,D,...A);return}if(h()||a){w(),_.call(null,D,...A);return}i<64&&(i*=2);let N;u===1?(u=2,N=0):N=(i+Math.random())*1e3,g(N)}let b=!1;function k(D){b||(b=!0,w(),!f&&(r!==null?(D||(u=2),clearTimeout(r),g(0)):D||(u=1)))}return g(0),s=setTimeout(()=>{a=!0,k(!0)},n),k}function YF(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(t){return t!==void 0}function JF(t){return typeof t=="object"&&!Array.isArray(t)}function Kv(t){return typeof t=="string"||t instanceof String}function NE(t){return Zv()&&t instanceof Blob}function Zv(){return typeof Blob<"u"}function LE(t,e,n,i){if(i<e)throw W_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw W_(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function mP(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Qs||(Qs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eV(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e,n,i,r,s,a,u,h,f,_,g,w=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=_,this.connectionFactory_=g,this.retry=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,b)=>{this.resolve_=C,this.reject_=b,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Hh(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=u=>{const h=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const u=s.getErrorCode()===Qs.NO_ERROR,h=s.getStatus();if(!u||eV(h,this.additionalRetryCodes_)&&this.retry){const _=s.getErrorCode()===Qs.ABORT;i(!1,new Hh(!1,null,_));return}const f=this.successCodes_.indexOf(h)!==-1;i(!0,new Hh(f,s))})},n=(i,r)=>{const s=this.resolve_,a=this.reject_,u=r.connection;if(r.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());XF(h)?s(h):s()}catch(h){a(h)}else if(u!==null){const h=Gv();h.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,h)):a(h)}else if(r.canceled){const h=this.appDelete_?pP():zF();a(h)}else{const h=jF();a(h)}};this.canceled_?n(!1,new Hh(!1,null,!0)):this.backoffId_=QF(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&YF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Hh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function nV(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function iV(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rV(t,e){e&&(t["X-Firebase-GMPID"]=e)}function sV(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function oV(t,e,n,i,r,s,a=!0){const u=mP(t.urlParams),h=t.url+u,f=Object.assign({},t.headers);return rV(f,e),nV(f,n),iV(f,s),sV(f,i),new tV(h,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function lV(...t){const e=aV();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(Zv())return new Blob(t);throw new ht(ct.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function uV(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cV(t){if(typeof atob>"u")throw GF("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class mm{constructor(e,n){this.data=e,this.contentType=n||null}}function hV(t,e){switch(t){case Si.RAW:return new mm(_P(e));case Si.BASE64:case Si.BASE64URL:return new mm(gP(t,e));case Si.DATA_URL:return new mm(fV(e),pV(e))}throw Gv()}function _P(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=i,a=t.charCodeAt(++n);i=65536|(s&1023)<<10|a&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function dV(t){let e;try{e=decodeURIComponent(t)}catch{throw ku(Si.DATA_URL,"Malformed data URL.")}return _P(e)}function gP(t,e){switch(t){case Si.BASE64:{const r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw ku(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Si.BASE64URL:{const r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw ku(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=cV(e)}catch(r){throw r.message.includes("polyfill")?r:ku(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class vP{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ku(Si.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=mV(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function fV(t){const e=new vP(t);return e.base64?gP(Si.BASE64,e.rest):dV(e.rest)}function pV(t){return new vP(t).contentType}function mV(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n){let i=0,r="";NE(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(NE(this.data_)){const i=this.data_,r=uV(i,e,n);return r===null?null:new Br(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Br(i,!0)}}static getBlob(...e){if(Zv()){const n=e.map(i=>i instanceof Br?i.data_:i);return new Br(lV.apply(null,n))}else{const n=e.map(a=>Kv(a)?hV(Si.RAW,a).data:a.data_);let i=0;n.forEach(a=>{i+=a.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(a=>{for(let u=0;u<a.length;u++)r[s++]=a[u]}),new Br(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(t){let e;try{e=JSON.parse(t)}catch{return null}return JF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function gV(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function wP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vV(t,e){return e}class sn{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||vV}}let $h=null;function yV(t){return!Kv(t)||t.length<2?t:wP(t)}function EP(){if($h)return $h;const t=[];t.push(new sn("bucket")),t.push(new sn("generation")),t.push(new sn("metageneration")),t.push(new sn("name","fullPath",!0));function e(s,a){return yV(a)}const n=new sn("name");n.xform=e,t.push(n);function i(s,a){return a!==void 0?Number(a):a}const r=new sn("size");return r.xform=i,t.push(r),t.push(new sn("timeCreated")),t.push(new sn("updated")),t.push(new sn("md5Hash",null,!0)),t.push(new sn("cacheControl",null,!0)),t.push(new sn("contentDisposition",null,!0)),t.push(new sn("contentEncoding",null,!0)),t.push(new sn("contentLanguage",null,!0)),t.push(new sn("contentType",null,!0)),t.push(new sn("metadata","customMetadata",!0)),$h=t,$h}function wV(t,e){function n(){const i=t.bucket,r=t.fullPath,s=new kn(i,r);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function EV(t,e,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const a=n[s];i[a.local]=a.xform(i,e[a.server])}return wV(i,t),i}function TP(t,e,n){const i=yP(e);return i===null?null:EV(t,i,n)}function TV(t,e,n,i){const r=yP(e);if(r===null||!Kv(r.downloadTokens))return null;const s=r.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(f=>{const _=t.bucket,g=t.fullPath,w="/b/"+a(_)+"/o/"+a(g),C=Qv(w,n,i),b=mP({alt:"media",token:f});return C+b})[0]}function IV(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class IP{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(t){if(!t)throw Gv()}function SV(t,e){function n(i,r){const s=TP(t,r,e);return SP(s!==null),s}return n}function CV(t,e){function n(i,r){const s=TP(t,r,e);return SP(s!==null),TV(s,r,t.host,t._protocol)}return n}function CP(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=VF():r=FF():n.getStatus()===402?r=MF(t.bucket):n.getStatus()===403?r=UF(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function xV(t){const e=CP(t);function n(i,r){let s=e(i,r);return i.getStatus()===404&&(s=DF(t.path)),s.serverResponse=r.serverResponse,s}return n}function PV(t,e,n){const i=e.fullServerUrl(),r=Qv(i,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,u=new IP(r,s,CV(t,n),a);return u.errorHandler=xV(e),u}function AV(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function RV(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=AV(null,e)),i}function kV(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function u(){let N="";for(let j=0;j<2;j++)N=N+Math.random().toString().slice(2);return N}const h=u();a["Content-Type"]="multipart/related; boundary="+h;const f=RV(e,i,r),_=IV(f,n),g="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+h+`\r
Content-Type: `+f.contentType+`\r
\r
`,w=`\r
--`+h+"--",C=Br.getBlob(g,i,w);if(C===null)throw $F();const b={name:f.fullPath},k=Qv(s,t.host,t._protocol),D="POST",A=t.maxUploadRetryTime,P=new IP(k,D,SV(t,n),A);return P.urlParams=b,P.headers=a,P.body=C.uploadData(),P.errorHandler=CP(e),P}class bV{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Qs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Qs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Qs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw eu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw eu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw eu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw eu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw eu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class NV extends bV{initXhr(){this.xhr_.responseType="text"}}function xP(){return new NV}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n){this._service=e,n instanceof kn?this._location=n:this._location=kn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new lo(e,n)}get root(){const e=new kn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return wP(this._location.path)}get storage(){return this._service}get parent(){const e=_V(this._location.path);if(e===null)return null;const n=new kn(this._location.bucket,e);return new lo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw KF(e)}}function LV(t,e,n){t._throwIfRoot("uploadBytes");const i=kV(t.storage,t._location,EP(),new Br(e,!0),n);return t.storage.makeRequestWithTokens(i,xP).then(r=>({metadata:r,ref:t}))}function OV(t){t._throwIfRoot("getDownloadURL");const e=PV(t.storage,t._location,EP());return t.storage.makeRequestWithTokens(e,xP).then(n=>{if(n===null)throw qF();return n})}function DV(t,e){const n=gV(t._location.path,e),i=new kn(t._location.bucket,n);return new lo(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MV(t){return/^[A-Za-z]+:\/\//.test(t)}function FV(t,e){return new lo(t,e)}function PP(t,e){if(t instanceof Yv){const n=t;if(n._bucket==null)throw HF();const i=new lo(n,n._bucket);return e!=null?PP(i,e):i}else return e!==void 0?DV(t,e):t}function VV(t,e){if(e&&MV(e)){if(t instanceof Yv)return FV(t,e);throw W_("To use ref(service, url), the first argument must be a Storage instance.")}else return PP(t,e)}function OE(t,e){const n=e==null?void 0:e[fP];return n==null?null:kn.makeFromBucketSpec(n,t)}function UV(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:nv(r,t.app.options.projectId))}class Yv{constructor(e,n,i,r,s){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=dP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=LF,this._maxUploadRetryTime=OF,this._requests=new Set,r!=null?this._bucket=kn.makeFromBucketSpec(r,this._host):this._bucket=OE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=kn.makeFromBucketSpec(this._url,e):this._bucket=OE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){LE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){LE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new lo(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new ZF(pP());{const a=oV(e,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const DE="@firebase/storage",ME="0.12.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP="storage";function uc(t,e,n){return t=Ge(t),LV(t,e,n)}function cc(t){return t=Ge(t),OV(t)}function hc(t,e){return t=Ge(t),VV(t,e)}function RP(t=Gf(),e){t=Ge(t);const i=Sc(t,AP).getImmediate({identifier:e}),r=tv("storage");return r&&jV(i,...r),i}function jV(t,e,n,i={}){UV(t,e,n,i)}function zV(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Yv(n,i,r,e,gs)}function BV(){ls(new hr(AP,zV,"PUBLIC").setMultipleInstances(!0)),Kn(DE,ME,""),Kn(DE,ME,"esm2017")}BV();var FE={};const VE="@firebase/database",UE="1.0.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kP="";function WV(t){kP=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Mt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ju(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Er(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new HV(e)}}catch{}return new $V},$s=bP("localStorage"),qV=bP("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=new qf("@firebase/database"),GV=function(){let t=1;return function(){return t++}}(),NP=function(t){const e=aN(t),n=new iN;n.update(e);const i=n.digest();return ev.encodeByteArray(i)},Dc=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Dc.apply(null,i):typeof i=="object"?e+=Mt(i):e+=i,e+=" "}return e};let bu=null,jE=!0;const KV=function(t,e){ee(!e,"Can't turn on custom loggers persistently."),Pa.logLevel=ke.VERBOSE,bu=Pa.log.bind(Pa)},Jt=function(...t){if(jE===!0&&(jE=!1,bu===null&&qV.get("logging_enabled")===!0&&KV()),bu){const e=Dc.apply(null,t);bu(e)}},Mc=function(t){return function(...e){Jt(t,...e)}},H_=function(...t){const e="FIREBASE INTERNAL ERROR: "+Dc(...t);Pa.error(e)},vr=function(...t){const e=`FIREBASE FATAL ERROR: ${Dc(...t)}`;throw Pa.error(e),new Error(e)},wn=function(...t){const e="FIREBASE WARNING: "+Dc(...t);Pa.warn(e)},ZV=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&wn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},LP=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},QV=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},qa="[MIN_NAME]",uo="[MAX_NAME]",ol=function(t,e){if(t===e)return 0;if(t===qa||e===uo)return-1;if(e===qa||t===uo)return 1;{const n=zE(t),i=zE(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},YV=function(t,e){return t===e?0:t<e?-1:1},tu=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Mt(e))},Xv=function(t){if(typeof t!="object"||t===null)return Mt(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=Mt(e[i]),n+=":",n+=Xv(t[e[i]]);return n+="}",n},OP=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function Tn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const DP=function(t){ee(!LP(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,s,a,u,h;t===0?(s=0,a=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(u=Math.min(Math.floor(Math.log(t)/Math.LN2),i),s=u+i,a=Math.round(t*Math.pow(2,n-u)-Math.pow(2,n))):(s=0,a=Math.round(t/Math.pow(2,1-i-n))));const f=[];for(h=n;h;h-=1)f.push(a%2?1:0),a=Math.floor(a/2);for(h=e;h;h-=1)f.push(s%2?1:0),s=Math.floor(s/2);f.push(r?1:0),f.reverse();const _=f.join("");let g="";for(h=0;h<64;h+=8){let w=parseInt(_.substr(h,8),2).toString(16);w.length===1&&(w="0"+w),g=g+w}return g.toLowerCase()},XV=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},JV=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function eU(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const tU=new RegExp("^-?(0*)\\d{1,10}$"),nU=-2147483648,iU=2147483647,zE=function(t){if(tU.test(t)){const e=Number(t);if(e>=nU&&e<=iU)return e}return null},al=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw wn("Exception was thrown by user callback.",n),e},Math.floor(0))}},rU=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Nu=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){wn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Jt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',wn(e)}}class md{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}md.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="5",MP="v",FP="s",VP="r",UP="f",jP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,zP="ls",BP="p",$_="ac",WP="websocket",HP="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e,n,i,r,s=!1,a="",u=!1,h=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=a,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=$s.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&$s.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function aU(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function qP(t,e,n){ee(typeof e=="string","typeof type must == string"),ee(typeof n=="object","typeof params must == object");let i;if(e===WP)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===HP)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);aU(t)&&(n.ns=t.namespace);const r=[];return Tn(n,(s,a)=>{r.push(s+"="+a)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(){this.counters_={}}incrementCounter(e,n=1){Er(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return jb(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m={},gm={};function ey(t){const e=t.toString();return _m[e]||(_m[e]=new lU),_m[e]}function uU(t,e){const n=t.toString();return gm[n]||(gm[n]=e()),gm[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&al(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="start",hU="close",dU="pLPCommand",fU="pRTLPCB",GP="id",KP="pw",ZP="ser",pU="cb",mU="seg",_U="ts",gU="d",vU="dframe",QP=1870,YP=30,yU=QP-YP,wU=25e3,EU=3e4;class ma{constructor(e,n,i,r,s,a,u){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=a,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Mc(e),this.stats_=ey(n),this.urlFn=h=>(this.appCheckToken&&(h[$_]=this.appCheckToken),qP(n,HP,h))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new cU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(EU)),QV(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ty((...s)=>{const[a,u,h,f,_]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===BE)this.id=u,this.password=h;else if(a===hU)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...s)=>{const[a,u]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(a,u)},()=>{this.onClosed_()},this.urlFn);const i={};i[BE]="t",i[ZP]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[pU]=this.scriptTagHolder.uniqueCallbackIdentifier),i[MP]=Jv,this.transportSessionId&&(i[FP]=this.transportSessionId),this.lastSessionId&&(i[zP]=this.lastSessionId),this.applicationId&&(i[BP]=this.applicationId),this.appCheckToken&&(i[$_]=this.appCheckToken),typeof location<"u"&&location.hostname&&jP.test(location.hostname)&&(i[VP]=UP);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ma.forceAllow_=!0}static forceDisallow(){ma.forceDisallow_=!0}static isAvailable(){return ma.forceAllow_?!0:!ma.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!XV()&&!JV()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=ZS(n),r=OP(i,yU);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[vU]="t",i[GP]=e,i[KP]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Mt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class ty{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=GV(),window[dU+this.uniqueCallbackIdentifier]=e,window[fU+this.uniqueCallbackIdentifier]=n,this.myIFrame=ty.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){Jt("frame writing exception"),u.stack&&Jt(u.stack),Jt(u)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Jt("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[GP]=this.myID,e[KP]=this.myPW,e[ZP]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+YP+i.length<=QP;){const a=this.pendingSegs.shift();i=i+"&"+mU+r+"="+a.seg+"&"+_U+r+"="+a.ts+"&"+gU+r+"="+a.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(wU)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Jt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU=16384,IU=45e3;let lf=null;typeof MozWebSocket<"u"?lf=MozWebSocket:typeof WebSocket<"u"&&(lf=WebSocket);class oi{constructor(e,n,i,r,s,a,u){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Mc(this.connId),this.stats_=ey(n),this.connURL=oi.connectionURL_(n,a,u,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r,s){const a={};return a[MP]=Jv,typeof location<"u"&&location.hostname&&jP.test(location.hostname)&&(a[VP]=UP),n&&(a[FP]=n),i&&(a[zP]=i),r&&(a[$_]=r),s&&(a[BP]=s),qP(e,WP,a)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,$s.set("previous_websocket_failure",!0);try{let i;tC(),this.mySock=new lf(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){oi.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&lf!==null&&!oi.forceDisallow_}static previouslyFailed(){return $s.isInMemoryStorage||$s.get("previous_websocket_failure")===!0}markConnectionHealthy(){$s.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=Ju(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ee(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=Mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=OP(n,TU);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(IU))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}oi.responsesRequiredToBeHealthy=2;oi.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ma,oi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=oi&&oi.isAvailable();let i=n&&!oi.previouslyFailed();if(e.webSocketOnly&&(n||wn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[oi];else{const r=this.transports_=[];for(const s of dc.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s);dc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}dc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU=6e4,CU=5e3,xU=10*1024,PU=100*1024,vm="t",WE="d",AU="s",HE="r",RU="e",$E="o",qE="a",GE="n",KE="p",kU="h";class bU{constructor(e,n,i,r,s,a,u,h,f,_){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=a,this.onReady_=u,this.onDisconnect_=h,this.onKill_=f,this.lastSessionId=_,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Mc("c:"+this.id+":"),this.transportManager_=new dc(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Nu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>PU?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>xU?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(vm in e){const n=e[vm];n===qE?this.upgradeIfSecondaryHealthy_():n===HE?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===$E&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=tu("t",e),i=tu("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:KE,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:qE,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:GE,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=tu("t",e),i=tu("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=tu(vm,e);if(WE in e){const i=e[WE];if(n===kU){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===GE){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===AU?this.onConnectionShutdown_(i):n===HE?this.onReset_(i):n===RU?H_("Server Error: "+i):n===$E?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):H_("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Jv!==i&&wn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Nu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(SU))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Nu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(CU))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:KE,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&($s.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e){this.allowedEvents_=e,this.listeners_={},ee(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){ee(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf extends JP{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!iv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new uf}getInitialEvent(e){return ee(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=32,QE=768;class He{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Me(){return new He("")}function Ie(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ds(t){return t.pieces_.length-t.pieceNum_}function $e(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new He(t.pieces_,e)}function e1(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function NU(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function t1(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function n1(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new He(e,0)}function xt(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof He)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new He(n,0)}function xe(t){return t.pieceNum_>=t.pieces_.length}function mn(t,e){const n=Ie(t),i=Ie(e);if(n===null)return e;if(n===i)return mn($e(t),$e(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function ny(t,e){if(ds(t)!==ds(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function ai(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(ds(t)>ds(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class LU{constructor(e,n){this.errorPrefix_=n,this.parts_=t1(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=$f(this.parts_[i]);i1(this)}}function OU(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=$f(e),i1(t)}function DU(t){const e=t.parts_.pop();t.byteLength_-=$f(e),t.parts_.length>0&&(t.byteLength_-=1)}function i1(t){if(t.byteLength_>QE)throw new Error(t.errorPrefix_+"has a key path longer than "+QE+" bytes ("+t.byteLength_+").");if(t.parts_.length>ZE)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ZE+") or object contains a cycle "+js(t))}function js(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy extends JP{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new iy}getInitialEvent(e){return ee(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu=1e3,MU=60*5*1e3,YE=30*1e3,FU=1.3,VU=3e4,UU="server_kill",XE=3;class or extends XP{constructor(e,n,i,r,s,a,u,h){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=h,this.id=or.nextPersistentConnectionId_++,this.log_=Mc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=nu,this.maxReconnectDelay_=MU,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h&&!tC())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");iy.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&uf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,s={r,a:e,b:n};this.log_(Mt(s)),ee(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new Hf,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{const u=a.d;a.s==="ok"?n.resolve(u):n.reject(u)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,i,r){this.initConnection_();const s=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),ee(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ee(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const u={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(a).set(s,u),this.connected_&&this.sendListen_(u)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const s={p:i},a="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(a,s,u=>{const h=u.d,f=u.s;or.warnOnListenWarnings_(h,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",u),f!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(f,h))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Er(e,"w")){const i=Fa(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();wn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||nN(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=YE)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=tN(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const s=r.s,a=r.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),ee(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const s={p:e},a="n";r&&(s.q=i,s.t=r),this.sendRequest(a,s)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const s={p:n,d:i};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,a=>{r&&setTimeout(()=>{r(a.s,a.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,s){this.initConnection_();const a={p:n,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Mt(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):H_("Unrecognized action received from server: "+Mt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ee(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=nu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=nu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>VU&&(this.reconnectDelay_=nu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*FU)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+or.nextConnectionId_++,s=this.lastSessionId;let a=!1,u=null;const h=function(){u?u.close():(a=!0,i())},f=function(g){ee(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(g)};this.realtime_={close:h,sendRequest:f};const _=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[g,w]=await Promise.all([this.authTokenProvider_.getToken(_),this.appCheckTokenProvider_.getToken(_)]);a?Jt("getToken() completed but was canceled"):(Jt("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=w&&w.token,u=new bU(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,C=>{wn(C+" ("+this.repoInfo_.toString()+")"),this.interrupt(UU)},s))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&wn(g),h())}}}interrupt(e){Jt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Jt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],v_(this.interruptReasons_)&&(this.reconnectDelay_=nu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(s=>Xv(s)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new He(e).toString();let r;if(this.listens.has(i)){const s=this.listens.get(i);r=s.get(n),s.delete(n),s.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){Jt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=XE&&(this.reconnectDelay_=YE,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Jt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=XE&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+kP.replace(/\./g,"-")]=1,iv()?e["framework.cordova"]=1:eC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=uf.getInstance().currentlyOnline();return v_(this.interruptReasons_)&&e}}or.nextPersistentConnectionId_=0;or.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Se(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new Se(qa,e),r=new Se(qa,n);return this.compare(i,r)!==0}minPost(){return Se.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qh;class r1 extends fp{static get __EMPTY_NODE(){return qh}static set __EMPTY_NODE(e){qh=e}compare(e,n){return ol(e.name,n.name)}isDefinedOn(e){throw Xa("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Se.MIN}maxPost(){return new Se(uo,qh)}makePost(e,n){return ee(typeof e=="string","KeyIndex indexValue must always be a string."),new Se(e,qh)}toString(){return".key"}}const Aa=new r1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=n?i(e.key,n):1,r&&(a*=-1),a<0)this.isReverse_?e=e.left:e=e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Dt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??Dt.RED,this.left=r??_n.EMPTY_NODE,this.right=s??_n.EMPTY_NODE}copy(e,n,i,r,s){return new Dt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return _n.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return _n.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Dt.RED=!0;Dt.BLACK=!1;class jU{copy(e,n,i,r,s){return this}insert(e,n,i){return new Dt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class _n{constructor(e,n=_n.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new _n(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Dt.BLACK,null,null))}remove(e){return new _n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Dt.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Gh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Gh(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Gh(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Gh(this.root_,null,this.comparator_,!0,e)}}_n.EMPTY_NODE=new jU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(t,e){return ol(t.name,e.name)}function ry(t,e){return ol(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q_;function BU(t){q_=t}const s1=function(t){return typeof t=="number"?"number:"+DP(t):"string:"+t},o1=function(t){if(t.isLeafNode()){const e=t.val();ee(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Er(e,".sv"),"Priority must be a string or number.")}else ee(t===q_||t.isEmpty(),"priority of unexpected type.");ee(t===q_||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JE;class Nt{constructor(e,n=Nt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ee(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),o1(this.priorityNode_)}static set __childrenNodeConstructor(e){JE=e}static get __childrenNodeConstructor(){return JE}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Nt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Nt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return xe(e)?this:Ie(e)===".priority"?this.priorityNode_:Nt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Nt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=Ie(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(ee(i!==".priority"||ds(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Nt.__childrenNodeConstructor.EMPTY_NODE.updateChild($e(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+s1(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=DP(this.value_):e+=this.value_,this.lazyHash_=NP(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Nt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Nt.__childrenNodeConstructor?-1:(ee(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=Nt.VALUE_TYPE_ORDER.indexOf(n),s=Nt.VALUE_TYPE_ORDER.indexOf(i);return ee(r>=0,"Unknown leaf type: "+n),ee(s>=0,"Unknown leaf type: "+i),r===s?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Nt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let a1,l1;function WU(t){a1=t}function HU(t){l1=t}class $U extends fp{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),s=i.compareTo(r);return s===0?ol(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Se.MIN}maxPost(){return new Se(uo,new Nt("[PRIORITY-POST]",l1))}makePost(e,n){const i=a1(e);return new Se(n,new Nt("[PRIORITY-POST]",i))}toString(){return".priority"}}const ut=new $U;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU=Math.log(2);class GU{constructor(e){const n=s=>parseInt(Math.log(s)/qU,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const cf=function(t,e,n,i){t.sort(e);const r=function(h,f){const _=f-h;let g,w;if(_===0)return null;if(_===1)return g=t[h],w=n?n(g):g,new Dt(w,g.node,Dt.BLACK,null,null);{const C=parseInt(_/2,10)+h,b=r(h,C),k=r(C+1,f);return g=t[C],w=n?n(g):g,new Dt(w,g.node,Dt.BLACK,b,k)}},s=function(h){let f=null,_=null,g=t.length;const w=function(b,k){const D=g-b,A=g;g-=b;const P=r(D+1,A),N=t[D],j=n?n(N):N;C(new Dt(j,N.node,k,null,P))},C=function(b){f?(f.left=b,f=b):(_=b,f=b)};for(let b=0;b<h.count;++b){const k=h.nextBitIsOne(),D=Math.pow(2,h.count-(b+1));k?w(D,Dt.BLACK):(w(D,Dt.BLACK),w(D,Dt.RED))}return _},a=new GU(t.length),u=s(a);return new _n(i||e,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ym;const Xo={};class nr{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return ee(Xo&&ut,"ChildrenNode.ts has not been loaded"),ym=ym||new nr({".priority":Xo},{".priority":ut}),ym}get(e){const n=Fa(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof _n?n:null}hasIndex(e){return Er(this.indexSet_,e.toString())}addIndex(e,n){ee(e!==Aa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=n.getIterator(Se.Wrap);let a=s.getNext();for(;a;)r=r||e.isDefinedOn(a.node),i.push(a),a=s.getNext();let u;r?u=cf(i,e.getCompare()):u=Xo;const h=e.toString(),f=Object.assign({},this.indexSet_);f[h]=e;const _=Object.assign({},this.indexes_);return _[h]=u,new nr(_,f)}addToIndexes(e,n){const i=$d(this.indexes_,(r,s)=>{const a=Fa(this.indexSet_,s);if(ee(a,"Missing index implementation for "+s),r===Xo)if(a.isDefinedOn(e.node)){const u=[],h=n.getIterator(Se.Wrap);let f=h.getNext();for(;f;)f.name!==e.name&&u.push(f),f=h.getNext();return u.push(e),cf(u,a.getCompare())}else return Xo;else{const u=n.get(e.name);let h=r;return u&&(h=h.remove(new Se(e.name,u))),h.insert(e,e.node)}});return new nr(i,this.indexSet_)}removeFromIndexes(e,n){const i=$d(this.indexes_,r=>{if(r===Xo)return r;{const s=n.get(e.name);return s?r.remove(new Se(e.name,s)):r}});return new nr(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iu;class de{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&o1(this.priorityNode_),this.children_.isEmpty()&&ee(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return iu||(iu=new de(new _n(ry),null,nr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||iu}updatePriority(e){return this.children_.isEmpty()?this:new de(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?iu:n}}getChild(e){const n=Ie(e);return n===null?this:this.getImmediateChild(n).getChild($e(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ee(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new Se(e,n);let r,s;n.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(i,this.children_));const a=r.isEmpty()?iu:this.priorityNode_;return new de(r,a,s)}}updateChild(e,n){const i=Ie(e);if(i===null)return n;{ee(Ie(e)!==".priority"||ds(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild($e(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,s=!0;if(this.forEachChild(ut,(a,u)=>{n[a]=u.val(e),i++,s&&de.INTEGER_REGEXP_.test(a)?r=Math.max(r,Number(a)):s=!1}),!e&&s&&r<2*i){const a=[];for(const u in n)a[u]=n[u];return a}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+s1(this.getPriority().val())+":"),this.forEachChild(ut,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":NP(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const s=r.getPredecessorKey(new Se(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Se(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Se(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Se.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Se.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)>0;)r.getNext(),s=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Fc?-1:0}withIndex(e){if(e===Aa||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new de(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Aa||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(ut),r=n.getIterator(ut);let s=i.getNext(),a=r.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=r.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===Aa?null:this.indexMap_.get(e.toString())}}de.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class KU extends de{constructor(){super(new _n(ry),de.EMPTY_NODE,nr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return de.EMPTY_NODE}isEmpty(){return!1}}const Fc=new KU;Object.defineProperties(Se,{MIN:{value:new Se(qa,de.EMPTY_NODE)},MAX:{value:new Se(uo,Fc)}});r1.__EMPTY_NODE=de.EMPTY_NODE;Nt.__childrenNodeConstructor=de;BU(Fc);HU(Fc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU=!0;function jt(t,e=null){if(t===null)return de.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ee(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Nt(n,jt(e))}if(!(t instanceof Array)&&ZU){const n=[];let i=!1;if(Tn(t,(a,u)=>{if(a.substring(0,1)!=="."){const h=jt(u);h.isEmpty()||(i=i||!h.getPriority().isEmpty(),n.push(new Se(a,h)))}}),n.length===0)return de.EMPTY_NODE;const s=cf(n,zU,a=>a.name,ry);if(i){const a=cf(n,ut.getCompare());return new de(s,jt(e),new nr({".priority":a},{".priority":ut}))}else return new de(s,jt(e),nr.Default)}else{let n=de.EMPTY_NODE;return Tn(t,(i,r)=>{if(Er(t,i)&&i.substring(0,1)!=="."){const s=jt(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(i,s))}}),n.updatePriority(jt(e))}}WU(jt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU extends fp{constructor(e){super(),this.indexPath_=e,ee(!xe(e)&&Ie(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),s=i.compareTo(r);return s===0?ol(e.name,n.name):s}makePost(e,n){const i=jt(e),r=de.EMPTY_NODE.updateChild(this.indexPath_,i);return new Se(n,r)}maxPost(){const e=de.EMPTY_NODE.updateChild(this.indexPath_,Fc);return new Se(uo,e)}toString(){return t1(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU extends fp{compare(e,n){const i=e.node.compareTo(n.node);return i===0?ol(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Se.MIN}maxPost(){return Se.MAX}makePost(e,n){const i=jt(e);return new Se(n,i)}toString(){return".value"}}const XU=new YU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(t){return{type:"value",snapshotNode:t}}function Ga(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function fc(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function pc(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function JU(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e){this.index_=e}updateChild(e,n,i,r,s,a){ee(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const u=e.getImmediateChild(n);return u.getChild(r).equals(i.getChild(r))&&u.isEmpty()===i.isEmpty()||(a!=null&&(i.isEmpty()?e.hasChild(n)?a.trackChildChange(fc(n,u)):ee(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?a.trackChildChange(Ga(n,i)):a.trackChildChange(pc(n,i,u))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(ut,(r,s)=>{n.hasChild(r)||i.trackChildChange(fc(r,s))}),n.isLeafNode()||n.forEachChild(ut,(r,s)=>{if(e.hasChild(r)){const a=e.getImmediateChild(r);a.equals(s)||i.trackChildChange(pc(r,s,a))}else i.trackChildChange(Ga(r,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?de.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e){this.indexedFilter_=new sy(e.getIndex()),this.index_=e.getIndex(),this.startPost_=mc.getStartPost_(e),this.endPost_=mc.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,r,s,a){return this.matches(new Se(n,i))||(i=de.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,r,s,a)}updateFullNode(e,n,i){n.isLeafNode()&&(n=de.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(de.EMPTY_NODE);const s=this;return n.forEachChild(ut,(a,u)=>{s.matches(new Se(a,u))||(r=r.updateImmediateChild(a,de.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new mc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,r,s,a){return this.rangedFilter_.matches(new Se(n,i))||(i=de.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,r,s,a):this.fullLimitUpdateChild_(e,n,i,s,a)}updateFullNode(e,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=de.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=de.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;s.hasNext()&&a<this.limit_;){const u=s.getNext();if(this.withinDirectionalStart(u))if(this.withinDirectionalEnd(u))r=r.updateImmediateChild(u.name,u.node),a++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(de.EMPTY_NODE);let s;this.reverse_?s=r.getReverseIterator(this.index_):s=r.getIterator(this.index_);let a=0;for(;s.hasNext();){const u=s.getNext();a<this.limit_&&this.withinDirectionalStart(u)&&this.withinDirectionalEnd(u)?a++:r=r.updateImmediateChild(u.name,de.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,r,s){let a;if(this.reverse_){const g=this.index_.getCompare();a=(w,C)=>g(C,w)}else a=this.index_.getCompare();const u=e;ee(u.numChildren()===this.limit_,"");const h=new Se(n,i),f=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),_=this.rangedFilter_.matches(h);if(u.hasChild(n)){const g=u.getImmediateChild(n);let w=r.getChildAfterChild(this.index_,f,this.reverse_);for(;w!=null&&(w.name===n||u.hasChild(w.name));)w=r.getChildAfterChild(this.index_,w,this.reverse_);const C=w==null?1:a(w,h);if(_&&!i.isEmpty()&&C>=0)return s!=null&&s.trackChildChange(pc(n,i,g)),u.updateImmediateChild(n,i);{s!=null&&s.trackChildChange(fc(n,g));const k=u.updateImmediateChild(n,de.EMPTY_NODE);return w!=null&&this.rangedFilter_.matches(w)?(s!=null&&s.trackChildChange(Ga(w.name,w.node)),k.updateImmediateChild(w.name,w.node)):k}}else return i.isEmpty()?e:_&&a(f,h)>=0?(s!=null&&(s.trackChildChange(fc(f.name,f.node)),s.trackChildChange(Ga(n,i))),u.updateImmediateChild(n,i).updateImmediateChild(f.name,de.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ut}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ee(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ee(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:qa}hasEnd(){return this.endSet_}getIndexEndValue(){return ee(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ee(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:uo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ee(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ut}copy(){const e=new oy;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function t4(t){return t.loadsAllData()?new sy(t.getIndex()):t.hasLimit()?new e4(t):new mc(t)}function eT(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ut?n="$priority":t.index_===XU?n="$value":t.index_===Aa?n="$key":(ee(t.index_ instanceof QU,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Mt(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=Mt(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+Mt(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=Mt(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+Mt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function tT(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ut&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf extends XP{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Mc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ee(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const a=hf.getListenId_(e,i),u={};this.listens_[a]=u;const h=eT(e._queryParams);this.restRequest_(s+".json",h,(f,_)=>{let g=_;if(f===404&&(g=null,f=null),f===null&&this.onDataUpdate_(s,g,!1,i),Fa(this.listens_,a)===u){let w;f?f===401?w="permission_denied":w="rest_error:"+f:w="ok",r(w,null)}})}unlisten(e,n){const i=hf.getListenId_(e,n);delete this.listens_[i]}get(e){const n=eT(e._queryParams),i=e._path.toString(),r=new Hf;return this.restRequest_(i+".json",n,(s,a)=>{let u=a;s===404&&(u=null,s=null),s===null?(this.onDataUpdate_(i,u,!1,null),r.resolve(u)):r.reject(new Error(u))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ja(n);this.log_("Sending REST request for "+a);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(i&&u.readyState===4){this.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);let h=null;if(u.status>=200&&u.status<300){try{h=Ju(u.responseText)}catch{wn("Failed to parse JSON response for "+a+": "+u.responseText)}i(null,h)}else u.status!==401&&u.status!==404&&wn("Got unsuccessful REST response for "+a+" Status: "+u.status),i(u.status);i=null}},u.open("GET",a,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(){this.rootNode_=de.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(){return{value:null,children:new Map}}function c1(t,e,n){if(xe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=Ie(e);t.children.has(i)||t.children.set(i,df());const r=t.children.get(i);e=$e(e),c1(r,e,n)}}function G_(t,e,n){t.value!==null?n(e,t.value):i4(t,(i,r)=>{const s=new He(e.toString()+"/"+i);G_(r,s,n)})}function i4(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Tn(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT=10*1e3,s4=30*1e3,o4=5*60*1e3;class a4{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new r4(e);const i=nT+(s4-nT)*Math.random();Nu(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;Tn(e,(r,s)=>{s>0&&Er(this.statsToReport_,r)&&(n[r]=s,i=!0)}),i&&this.server_.reportStats(n),Nu(this.reportStats_.bind(this),Math.floor(Math.random()*2*o4))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var li;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(li||(li={}));function h1(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ay(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ly(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=li.ACK_USER_WRITE,this.source=h1()}operationForChild(e){if(xe(this.path)){if(this.affectedTree.value!=null)return ee(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new He(e));return new ff(Me(),n,this.revert)}}else return ee(Ie(this.path)===e,"operationForChild called for unrelated child."),new ff($e(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,n){this.source=e,this.path=n,this.type=li.LISTEN_COMPLETE}operationForChild(e){return xe(this.path)?new _c(this.source,Me()):new _c(this.source,$e(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=li.OVERWRITE}operationForChild(e){return xe(this.path)?new co(this.source,Me(),this.snap.getImmediateChild(e)):new co(this.source,$e(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=li.MERGE}operationForChild(e){if(xe(this.path)){const n=this.children.subtree(new He(e));return n.isEmpty()?null:n.value?new co(this.source,Me(),n.value):new gc(this.source,Me(),n)}else return ee(Ie(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new gc(this.source,$e(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(xe(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ie(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function u4(t,e,n,i){const r=[],s=[];return e.forEach(a=>{a.type==="child_changed"&&t.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&s.push(JU(a.childName,a.snapshotNode))}),ru(t,r,"child_removed",e,i,n),ru(t,r,"child_added",e,i,n),ru(t,r,"child_moved",s,i,n),ru(t,r,"child_changed",e,i,n),ru(t,r,"value",e,i,n),r}function ru(t,e,n,i,r,s){const a=i.filter(u=>u.type===n);a.sort((u,h)=>h4(t,u,h)),a.forEach(u=>{const h=c4(t,u,s);r.forEach(f=>{f.respondsTo(u.type)&&e.push(f.createEvent(h,t.query_))})})}function c4(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function h4(t,e,n){if(e.childName==null||n.childName==null)throw Xa("Should only compare child_ events.");const i=new Se(e.childName,e.snapshotNode),r=new Se(n.childName,n.snapshotNode);return t.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(t,e){return{eventCache:t,serverCache:e}}function Lu(t,e,n,i){return pp(new ho(e,n,i),t.serverCache)}function d1(t,e,n,i){return pp(t.eventCache,new ho(e,n,i))}function K_(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function fo(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wm;const d4=()=>(wm||(wm=new _n(YV)),wm);class Ze{constructor(e,n=d4()){this.value=e,this.children=n}static fromObject(e){let n=new Ze(null);return Tn(e,(i,r)=>{n=n.set(new He(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Me(),value:this.value};if(xe(e))return null;{const i=Ie(e),r=this.children.get(i);if(r!==null){const s=r.findRootMostMatchingPathAndValue($e(e),n);return s!=null?{path:xt(new He(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(xe(e))return this;{const n=Ie(e),i=this.children.get(n);return i!==null?i.subtree($e(e)):new Ze(null)}}set(e,n){if(xe(e))return new Ze(n,this.children);{const i=Ie(e),s=(this.children.get(i)||new Ze(null)).set($e(e),n),a=this.children.insert(i,s);return new Ze(this.value,a)}}remove(e){if(xe(e))return this.children.isEmpty()?new Ze(null):new Ze(null,this.children);{const n=Ie(e),i=this.children.get(n);if(i){const r=i.remove($e(e));let s;return r.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,r),this.value===null&&s.isEmpty()?new Ze(null):new Ze(this.value,s)}else return this}}get(e){if(xe(e))return this.value;{const n=Ie(e),i=this.children.get(n);return i?i.get($e(e)):null}}setTree(e,n){if(xe(e))return n;{const i=Ie(e),s=(this.children.get(i)||new Ze(null)).setTree($e(e),n);let a;return s.isEmpty()?a=this.children.remove(i):a=this.children.insert(i,s),new Ze(this.value,a)}}fold(e){return this.fold_(Me(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(xt(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,Me(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(xe(e))return null;{const s=Ie(e),a=this.children.get(s);return a?a.findOnPath_($e(e),xt(n,s),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Me(),n)}foreachOnPath_(e,n,i){if(xe(e))return this;{this.value&&i(n,this.value);const r=Ie(e),s=this.children.get(r);return s?s.foreachOnPath_($e(e),xt(n,r),i):new Ze(null)}}foreach(e){this.foreach_(Me(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(xt(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.writeTree_=e}static empty(){return new di(new Ze(null))}}function Ou(t,e,n){if(xe(e))return new di(new Ze(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let s=i.value;const a=mn(r,e);return s=s.updateChild(a,n),new di(t.writeTree_.set(r,s))}else{const r=new Ze(n),s=t.writeTree_.setTree(e,r);return new di(s)}}}function iT(t,e,n){let i=t;return Tn(n,(r,s)=>{i=Ou(i,xt(e,r),s)}),i}function rT(t,e){if(xe(e))return di.empty();{const n=t.writeTree_.setTree(e,new Ze(null));return new di(n)}}function Z_(t,e){return yo(t,e)!=null}function yo(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(mn(n.path,e)):null}function sT(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ut,(i,r)=>{e.push(new Se(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new Se(i,r.value))}),e}function ss(t,e){if(xe(e))return t;{const n=yo(t,e);return n!=null?new di(new Ze(n)):new di(t.writeTree_.subtree(e))}}function Q_(t){return t.writeTree_.isEmpty()}function Ka(t,e){return f1(Me(),t.writeTree_,e)}function f1(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(ee(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):n=f1(xt(t,r),s,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(xt(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(t,e){return g1(e,t)}function f4(t,e,n,i,r){ee(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=Ou(t.visibleWrites,e,n)),t.lastWriteId=i}function p4(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function m4(t,e){const n=t.allWrites.findIndex(u=>u.writeId===e);ee(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,s=!1,a=t.allWrites.length-1;for(;r&&a>=0;){const u=t.allWrites[a];u.visible&&(a>=n&&_4(u,i.path)?r=!1:ai(i.path,u.path)&&(s=!0)),a--}if(r){if(s)return g4(t),!0;if(i.snap)t.visibleWrites=rT(t.visibleWrites,i.path);else{const u=i.children;Tn(u,h=>{t.visibleWrites=rT(t.visibleWrites,xt(i.path,h))})}return!0}else return!1}function _4(t,e){if(t.snap)return ai(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ai(xt(t.path,n),e))return!0;return!1}function g4(t){t.visibleWrites=p1(t.allWrites,v4,Me()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function v4(t){return t.visible}function p1(t,e,n){let i=di.empty();for(let r=0;r<t.length;++r){const s=t[r];if(e(s)){const a=s.path;let u;if(s.snap)ai(n,a)?(u=mn(n,a),i=Ou(i,u,s.snap)):ai(a,n)&&(u=mn(a,n),i=Ou(i,Me(),s.snap.getChild(u)));else if(s.children){if(ai(n,a))u=mn(n,a),i=iT(i,u,s.children);else if(ai(a,n))if(u=mn(a,n),xe(u))i=iT(i,Me(),s.children);else{const h=Fa(s.children,Ie(u));if(h){const f=h.getChild($e(u));i=Ou(i,Me(),f)}}}else throw Xa("WriteRecord should have .snap or .children")}}return i}function m1(t,e,n,i,r){if(!i&&!r){const s=yo(t.visibleWrites,e);if(s!=null)return s;{const a=ss(t.visibleWrites,e);if(Q_(a))return n;if(n==null&&!Z_(a,Me()))return null;{const u=n||de.EMPTY_NODE;return Ka(a,u)}}}else{const s=ss(t.visibleWrites,e);if(!r&&Q_(s))return n;if(!r&&n==null&&!Z_(s,Me()))return null;{const a=function(f){return(f.visible||r)&&(!i||!~i.indexOf(f.writeId))&&(ai(f.path,e)||ai(e,f.path))},u=p1(t.allWrites,a,e),h=n||de.EMPTY_NODE;return Ka(u,h)}}}function y4(t,e,n){let i=de.EMPTY_NODE;const r=yo(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(ut,(s,a)=>{i=i.updateImmediateChild(s,a)}),i;if(n){const s=ss(t.visibleWrites,e);return n.forEachChild(ut,(a,u)=>{const h=Ka(ss(s,new He(a)),u);i=i.updateImmediateChild(a,h)}),sT(s).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}else{const s=ss(t.visibleWrites,e);return sT(s).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}}function w4(t,e,n,i,r){ee(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=xt(e,n);if(Z_(t.visibleWrites,s))return null;{const a=ss(t.visibleWrites,s);return Q_(a)?r.getChild(n):Ka(a,r.getChild(n))}}function E4(t,e,n,i){const r=xt(e,n),s=yo(t.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(n)){const a=ss(t.visibleWrites,r);return Ka(a,i.getNode().getImmediateChild(n))}else return null}function T4(t,e){return yo(t.visibleWrites,e)}function I4(t,e,n,i,r,s,a){let u;const h=ss(t.visibleWrites,e),f=yo(h,Me());if(f!=null)u=f;else if(n!=null)u=Ka(h,n);else return[];if(u=u.withIndex(a),!u.isEmpty()&&!u.isLeafNode()){const _=[],g=a.getCompare(),w=s?u.getReverseIteratorFrom(i,a):u.getIteratorFrom(i,a);let C=w.getNext();for(;C&&_.length<r;)g(C,i)!==0&&_.push(C),C=w.getNext();return _}else return[]}function S4(){return{visibleWrites:di.empty(),allWrites:[],lastWriteId:-1}}function pf(t,e,n,i){return m1(t.writeTree,t.treePath,e,n,i)}function cy(t,e){return y4(t.writeTree,t.treePath,e)}function oT(t,e,n,i){return w4(t.writeTree,t.treePath,e,n,i)}function mf(t,e){return T4(t.writeTree,xt(t.treePath,e))}function C4(t,e,n,i,r,s){return I4(t.writeTree,t.treePath,e,n,i,r,s)}function hy(t,e,n){return E4(t.writeTree,t.treePath,e,n)}function _1(t,e){return g1(xt(t.treePath,e),t.writeTree)}function g1(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;ee(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ee(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(i,pc(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(i,fc(i,r.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(i,Ga(i,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(i,pc(i,e.snapshotNode,r.oldSnap));else throw Xa("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const v1=new P4;class dy{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new ho(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hy(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:fo(this.viewCache_),s=C4(this.writes_,r,n,1,i,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(t){return{filter:t}}function R4(t,e){ee(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ee(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function k4(t,e,n,i,r){const s=new x4;let a,u;if(n.type===li.OVERWRITE){const f=n;f.source.fromUser?a=Y_(t,e,f.path,f.snap,i,r,s):(ee(f.source.fromServer,"Unknown source."),u=f.source.tagged||e.serverCache.isFiltered()&&!xe(f.path),a=_f(t,e,f.path,f.snap,i,r,u,s))}else if(n.type===li.MERGE){const f=n;f.source.fromUser?a=N4(t,e,f.path,f.children,i,r,s):(ee(f.source.fromServer,"Unknown source."),u=f.source.tagged||e.serverCache.isFiltered(),a=X_(t,e,f.path,f.children,i,r,u,s))}else if(n.type===li.ACK_USER_WRITE){const f=n;f.revert?a=D4(t,e,f.path,i,r,s):a=L4(t,e,f.path,f.affectedTree,i,r,s)}else if(n.type===li.LISTEN_COMPLETE)a=O4(t,e,n.path,i,s);else throw Xa("Unknown operation type: "+n.type);const h=s.getChanges();return b4(e,a,h),{viewCache:a,changes:h}}function b4(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=K_(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(u1(K_(e)))}}function y1(t,e,n,i,r,s){const a=e.eventCache;if(mf(i,n)!=null)return e;{let u,h;if(xe(n))if(ee(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const f=fo(e),_=f instanceof de?f:de.EMPTY_NODE,g=cy(i,_);u=t.filter.updateFullNode(e.eventCache.getNode(),g,s)}else{const f=pf(i,fo(e));u=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{const f=Ie(n);if(f===".priority"){ee(ds(n)===1,"Can't have a priority with additional path components");const _=a.getNode();h=e.serverCache.getNode();const g=oT(i,n,_,h);g!=null?u=t.filter.updatePriority(_,g):u=a.getNode()}else{const _=$e(n);let g;if(a.isCompleteForChild(f)){h=e.serverCache.getNode();const w=oT(i,n,a.getNode(),h);w!=null?g=a.getNode().getImmediateChild(f).updateChild(_,w):g=a.getNode().getImmediateChild(f)}else g=hy(i,f,e.serverCache);g!=null?u=t.filter.updateChild(a.getNode(),f,g,_,r,s):u=a.getNode()}}return Lu(e,u,a.isFullyInitialized()||xe(n),t.filter.filtersNodes())}}function _f(t,e,n,i,r,s,a,u){const h=e.serverCache;let f;const _=a?t.filter:t.filter.getIndexedFilter();if(xe(n))f=_.updateFullNode(h.getNode(),i,null);else if(_.filtersNodes()&&!h.isFiltered()){const C=h.getNode().updateChild(n,i);f=_.updateFullNode(h.getNode(),C,null)}else{const C=Ie(n);if(!h.isCompleteForPath(n)&&ds(n)>1)return e;const b=$e(n),D=h.getNode().getImmediateChild(C).updateChild(b,i);C===".priority"?f=_.updatePriority(h.getNode(),D):f=_.updateChild(h.getNode(),C,D,b,v1,null)}const g=d1(e,f,h.isFullyInitialized()||xe(n),_.filtersNodes()),w=new dy(r,g,s);return y1(t,g,n,r,w,u)}function Y_(t,e,n,i,r,s,a){const u=e.eventCache;let h,f;const _=new dy(r,e,s);if(xe(n))f=t.filter.updateFullNode(e.eventCache.getNode(),i,a),h=Lu(e,f,!0,t.filter.filtersNodes());else{const g=Ie(n);if(g===".priority")f=t.filter.updatePriority(e.eventCache.getNode(),i),h=Lu(e,f,u.isFullyInitialized(),u.isFiltered());else{const w=$e(n),C=u.getNode().getImmediateChild(g);let b;if(xe(w))b=i;else{const k=_.getCompleteChild(g);k!=null?e1(w)===".priority"&&k.getChild(n1(w)).isEmpty()?b=k:b=k.updateChild(w,i):b=de.EMPTY_NODE}if(C.equals(b))h=e;else{const k=t.filter.updateChild(u.getNode(),g,b,w,_,a);h=Lu(e,k,u.isFullyInitialized(),t.filter.filtersNodes())}}}return h}function aT(t,e){return t.eventCache.isCompleteForChild(e)}function N4(t,e,n,i,r,s,a){let u=e;return i.foreach((h,f)=>{const _=xt(n,h);aT(e,Ie(_))&&(u=Y_(t,u,_,f,r,s,a))}),i.foreach((h,f)=>{const _=xt(n,h);aT(e,Ie(_))||(u=Y_(t,u,_,f,r,s,a))}),u}function lT(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function X_(t,e,n,i,r,s,a,u){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h=e,f;xe(n)?f=i:f=new Ze(null).setTree(n,i);const _=e.serverCache.getNode();return f.children.inorderTraversal((g,w)=>{if(_.hasChild(g)){const C=e.serverCache.getNode().getImmediateChild(g),b=lT(t,C,w);h=_f(t,h,new He(g),b,r,s,a,u)}}),f.children.inorderTraversal((g,w)=>{const C=!e.serverCache.isCompleteForChild(g)&&w.value===null;if(!_.hasChild(g)&&!C){const b=e.serverCache.getNode().getImmediateChild(g),k=lT(t,b,w);h=_f(t,h,new He(g),k,r,s,a,u)}}),h}function L4(t,e,n,i,r,s,a){if(mf(r,n)!=null)return e;const u=e.serverCache.isFiltered(),h=e.serverCache;if(i.value!=null){if(xe(n)&&h.isFullyInitialized()||h.isCompleteForPath(n))return _f(t,e,n,h.getNode().getChild(n),r,s,u,a);if(xe(n)){let f=new Ze(null);return h.getNode().forEachChild(Aa,(_,g)=>{f=f.set(new He(_),g)}),X_(t,e,n,f,r,s,u,a)}else return e}else{let f=new Ze(null);return i.foreach((_,g)=>{const w=xt(n,_);h.isCompleteForPath(w)&&(f=f.set(_,h.getNode().getChild(w)))}),X_(t,e,n,f,r,s,u,a)}}function O4(t,e,n,i,r){const s=e.serverCache,a=d1(e,s.getNode(),s.isFullyInitialized()||xe(n),s.isFiltered());return y1(t,a,n,i,v1,r)}function D4(t,e,n,i,r,s){let a;if(mf(i,n)!=null)return e;{const u=new dy(i,e,r),h=e.eventCache.getNode();let f;if(xe(n)||Ie(n)===".priority"){let _;if(e.serverCache.isFullyInitialized())_=pf(i,fo(e));else{const g=e.serverCache.getNode();ee(g instanceof de,"serverChildren would be complete if leaf node"),_=cy(i,g)}_=_,f=t.filter.updateFullNode(h,_,s)}else{const _=Ie(n);let g=hy(i,_,e.serverCache);g==null&&e.serverCache.isCompleteForChild(_)&&(g=h.getImmediateChild(_)),g!=null?f=t.filter.updateChild(h,_,g,$e(n),u,s):e.eventCache.getNode().hasChild(_)?f=t.filter.updateChild(h,_,de.EMPTY_NODE,$e(n),u,s):f=h,f.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=pf(i,fo(e)),a.isLeafNode()&&(f=t.filter.updateFullNode(f,a,s)))}return a=e.serverCache.isFullyInitialized()||mf(i,Me())!=null,Lu(e,f,a,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new sy(i.getIndex()),s=t4(i);this.processor_=A4(s);const a=n.serverCache,u=n.eventCache,h=r.updateFullNode(de.EMPTY_NODE,a.getNode(),null),f=s.updateFullNode(de.EMPTY_NODE,u.getNode(),null),_=new ho(h,a.isFullyInitialized(),r.filtersNodes()),g=new ho(f,u.isFullyInitialized(),s.filtersNodes());this.viewCache_=pp(g,_),this.eventGenerator_=new l4(this.query_)}get query(){return this.query_}}function F4(t){return t.viewCache_.serverCache.getNode()}function V4(t,e){const n=fo(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!xe(e)&&!n.getImmediateChild(Ie(e)).isEmpty())?n.getChild(e):null}function uT(t){return t.eventRegistrations_.length===0}function U4(t,e){t.eventRegistrations_.push(e)}function cT(t,e,n){const i=[];if(n){ee(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(s=>{const a=s.createCancelEvent(n,r);a&&i.push(a)})}if(e){let r=[];for(let s=0;s<t.eventRegistrations_.length;++s){const a=t.eventRegistrations_[s];if(!a.matches(e))r.push(a);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return i}function hT(t,e,n,i){e.type===li.MERGE&&e.source.queryId!==null&&(ee(fo(t.viewCache_),"We should always have a full cache before handling merges"),ee(K_(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,s=k4(t.processor_,r,e,n,i);return R4(t.processor_,s.viewCache),ee(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,w1(t,s.changes,s.viewCache.eventCache.getNode(),null)}function j4(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ut,(s,a)=>{i.push(Ga(s,a))}),n.isFullyInitialized()&&i.push(u1(n.getNode())),w1(t,i,n.getNode(),e)}function w1(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return u4(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gf;class z4{constructor(){this.views=new Map}}function B4(t){ee(!gf,"__referenceConstructor has already been defined"),gf=t}function W4(){return ee(gf,"Reference.ts has not been loaded"),gf}function H4(t){return t.views.size===0}function fy(t,e,n,i){const r=e.source.queryId;if(r!==null){const s=t.views.get(r);return ee(s!=null,"SyncTree gave us an op for an invalid query."),hT(s,e,n,i)}else{let s=[];for(const a of t.views.values())s=s.concat(hT(a,e,n,i));return s}}function $4(t,e,n,i,r){const s=e._queryIdentifier,a=t.views.get(s);if(!a){let u=pf(n,r?i:null),h=!1;u?h=!0:i instanceof de?(u=cy(n,i),h=!1):(u=de.EMPTY_NODE,h=!1);const f=pp(new ho(u,h,!1),new ho(i,r,!1));return new M4(e,f)}return a}function q4(t,e,n,i,r,s){const a=$4(t,e,i,r,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),U4(a,n),j4(a,n)}function G4(t,e,n,i){const r=e._queryIdentifier,s=[];let a=[];const u=fs(t);if(r==="default")for(const[h,f]of t.views.entries())a=a.concat(cT(f,n,i)),uT(f)&&(t.views.delete(h),f.query._queryParams.loadsAllData()||s.push(f.query));else{const h=t.views.get(r);h&&(a=a.concat(cT(h,n,i)),uT(h)&&(t.views.delete(r),h.query._queryParams.loadsAllData()||s.push(h.query)))}return u&&!fs(t)&&s.push(new(W4())(e._repo,e._path)),{removed:s,events:a}}function E1(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Ra(t,e){let n=null;for(const i of t.views.values())n=n||V4(i,e);return n}function T1(t,e){if(e._queryParams.loadsAllData())return mp(t);{const i=e._queryIdentifier;return t.views.get(i)}}function I1(t,e){return T1(t,e)!=null}function fs(t){return mp(t)!=null}function mp(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vf;function K4(t){ee(!vf,"__referenceConstructor has already been defined"),vf=t}function Z4(){return ee(vf,"Reference.ts has not been loaded"),vf}let Q4=1;class dT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ze(null),this.pendingWriteTree_=S4(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function S1(t,e,n,i,r){return f4(t.pendingWriteTree_,e,n,i,r),r?Vc(t,new co(h1(),e,n)):[]}function qs(t,e,n=!1){const i=p4(t.pendingWriteTree_,e);if(m4(t.pendingWriteTree_,e)){let s=new Ze(null);return i.snap!=null?s=s.set(Me(),!0):Tn(i.children,a=>{s=s.set(new He(a),!0)}),Vc(t,new ff(i.path,s,n))}else return[]}function _p(t,e,n){return Vc(t,new co(ay(),e,n))}function Y4(t,e,n){const i=Ze.fromObject(n);return Vc(t,new gc(ay(),e,i))}function X4(t,e){return Vc(t,new _c(ay(),e))}function J4(t,e,n){const i=my(t,n);if(i){const r=_y(i),s=r.path,a=r.queryId,u=mn(s,e),h=new _c(ly(a),u);return gy(t,s,h)}else return[]}function J_(t,e,n,i,r=!1){const s=e._path,a=t.syncPointTree_.get(s);let u=[];if(a&&(e._queryIdentifier==="default"||I1(a,e))){const h=G4(a,e,n,i);H4(a)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const f=h.removed;if(u=h.events,!r){const _=f.findIndex(w=>w._queryParams.loadsAllData())!==-1,g=t.syncPointTree_.findOnPath(s,(w,C)=>fs(C));if(_&&!g){const w=t.syncPointTree_.subtree(s);if(!w.isEmpty()){const C=nj(w);for(let b=0;b<C.length;++b){const k=C[b],D=k.query,A=P1(t,k);t.listenProvider_.startListening(Du(D),yf(t,D),A.hashFn,A.onComplete)}}}!g&&f.length>0&&!i&&(_?t.listenProvider_.stopListening(Du(e),null):f.forEach(w=>{const C=t.queryToTagMap.get(gp(w));t.listenProvider_.stopListening(Du(w),C)}))}ij(t,f)}return u}function ej(t,e,n,i){const r=my(t,i);if(r!=null){const s=_y(r),a=s.path,u=s.queryId,h=mn(a,e),f=new co(ly(u),h,n);return gy(t,a,f)}else return[]}function tj(t,e,n,i){const r=my(t,i);if(r){const s=_y(r),a=s.path,u=s.queryId,h=mn(a,e),f=Ze.fromObject(n),_=new gc(ly(u),h,f);return gy(t,a,_)}else return[]}function fT(t,e,n,i=!1){const r=e._path;let s=null,a=!1;t.syncPointTree_.foreachOnPath(r,(w,C)=>{const b=mn(w,r);s=s||Ra(C,b),a=a||fs(C)});let u=t.syncPointTree_.get(r);u?(a=a||fs(u),s=s||Ra(u,Me())):(u=new z4,t.syncPointTree_=t.syncPointTree_.set(r,u));let h;s!=null?h=!0:(h=!1,s=de.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((C,b)=>{const k=Ra(b,Me());k&&(s=s.updateImmediateChild(C,k))}));const f=I1(u,e);if(!f&&!e._queryParams.loadsAllData()){const w=gp(e);ee(!t.queryToTagMap.has(w),"View does not exist, but we have a tag");const C=rj();t.queryToTagMap.set(w,C),t.tagToQueryMap.set(C,w)}const _=uy(t.pendingWriteTree_,r);let g=q4(u,e,n,_,s,h);if(!f&&!a&&!i){const w=T1(u,e);g=g.concat(sj(t,e,w))}return g}function py(t,e,n){const r=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(a,u)=>{const h=mn(a,e),f=Ra(u,h);if(f)return f});return m1(r,e,s,n,!0)}function Vc(t,e){return C1(e,t.syncPointTree_,null,uy(t.pendingWriteTree_,Me()))}function C1(t,e,n,i){if(xe(t.path))return x1(t,e,n,i);{const r=e.get(Me());n==null&&r!=null&&(n=Ra(r,Me()));let s=[];const a=Ie(t.path),u=t.operationForChild(a),h=e.children.get(a);if(h&&u){const f=n?n.getImmediateChild(a):null,_=_1(i,a);s=s.concat(C1(u,h,f,_))}return r&&(s=s.concat(fy(r,t,i,n))),s}}function x1(t,e,n,i){const r=e.get(Me());n==null&&r!=null&&(n=Ra(r,Me()));let s=[];return e.children.inorderTraversal((a,u)=>{const h=n?n.getImmediateChild(a):null,f=_1(i,a),_=t.operationForChild(a);_&&(s=s.concat(x1(_,u,h,f)))}),r&&(s=s.concat(fy(r,t,i,n))),s}function P1(t,e){const n=e.query,i=yf(t,n);return{hashFn:()=>(F4(e)||de.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?J4(t,n._path,i):X4(t,n._path);{const s=eU(r,n);return J_(t,n,null,s)}}}}function yf(t,e){const n=gp(e);return t.queryToTagMap.get(n)}function gp(t){return t._path.toString()+"$"+t._queryIdentifier}function my(t,e){return t.tagToQueryMap.get(e)}function _y(t){const e=t.indexOf("$");return ee(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new He(t.substr(0,e))}}function gy(t,e,n){const i=t.syncPointTree_.get(e);ee(i,"Missing sync point for query tag that we're tracking");const r=uy(t.pendingWriteTree_,e);return fy(i,n,r,null)}function nj(t){return t.fold((e,n,i)=>{if(n&&fs(n))return[mp(n)];{let r=[];return n&&(r=E1(n)),Tn(i,(s,a)=>{r=r.concat(a)}),r}})}function Du(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Z4())(t._repo,t._path):t}function ij(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const r=gp(i),s=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(s)}}}function rj(){return Q4++}function sj(t,e,n){const i=e._path,r=yf(t,e),s=P1(t,n),a=t.listenProvider_.startListening(Du(e),r,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(i);if(r)ee(!fs(u.value),"If we're adding a query, it shouldn't be shadowed");else{const h=u.fold((f,_,g)=>{if(!xe(f)&&_&&fs(_))return[mp(_).query];{let w=[];return _&&(w=w.concat(E1(_).map(C=>C.query))),Tn(g,(C,b)=>{w=w.concat(b)}),w}});for(let f=0;f<h.length;++f){const _=h[f];t.listenProvider_.stopListening(Du(_),yf(t,_))}}return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new vy(n)}node(){return this.node_}}class yy{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=xt(this.path_,e);return new yy(this.syncTree_,n)}node(){return py(this.syncTree_,this.path_)}}const oj=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},pT=function(t,e,n){if(!t||typeof t!="object")return t;if(ee(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return aj(t[".sv"],e,n);if(typeof t[".sv"]=="object")return lj(t[".sv"],e);ee(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},aj=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ee(!1,"Unexpected server value: "+t)}},lj=function(t,e,n){t.hasOwnProperty("increment")||ee(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&ee(!1,"Unexpected increment value: "+i);const r=e.node();if(ee(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const a=r.getValue();return typeof a!="number"?i:a+i},uj=function(t,e,n,i){return wy(e,new yy(n,t),i)},A1=function(t,e,n){return wy(t,new vy(e),n)};function wy(t,e,n){const i=t.getPriority().val(),r=pT(i,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const a=t,u=pT(a.getValue(),e,n);return u!==a.getValue()||r!==a.getPriority().val()?new Nt(u,jt(r)):t}else{const a=t;return s=a,r!==a.getPriority().val()&&(s=s.updatePriority(new Nt(r))),a.forEachChild(ut,(u,h)=>{const f=wy(h,e.getImmediateChild(u),n);f!==h&&(s=s.updateImmediateChild(u,f))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function Ty(t,e){let n=e instanceof He?e:new He(e),i=t,r=Ie(n);for(;r!==null;){const s=Fa(i.node.children,r)||{children:{},childCount:0};i=new Ey(r,i,s),n=$e(n),r=Ie(n)}return i}function ll(t){return t.node.value}function R1(t,e){t.node.value=e,eg(t)}function k1(t){return t.node.childCount>0}function cj(t){return ll(t)===void 0&&!k1(t)}function vp(t,e){Tn(t.node.children,(n,i)=>{e(new Ey(n,t,i))})}function b1(t,e,n,i){n&&!i&&e(t),vp(t,r=>{b1(r,e,!0,i)}),n&&i&&e(t)}function hj(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Uc(t){return new He(t.parent===null?t.name:Uc(t.parent)+"/"+t.name)}function eg(t){t.parent!==null&&dj(t.parent,t.name,t)}function dj(t,e,n){const i=cj(n),r=Er(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,eg(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,eg(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj=/[\[\].#$\/\u0000-\u001F\u007F]/,pj=/[\[\].#$\u0000-\u001F\u007F]/,Em=10*1024*1024,N1=function(t){return typeof t=="string"&&t.length!==0&&!fj.test(t)},L1=function(t){return typeof t=="string"&&t.length!==0&&!pj.test(t)},mj=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),L1(t)},_j=function(t,e,n,i){Iy(rv(t,"value"),e,n)},Iy=function(t,e,n){const i=n instanceof He?new LU(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+js(i));if(typeof e=="function")throw new Error(t+"contains a function "+js(i)+" with contents = "+e.toString());if(LP(e))throw new Error(t+"contains "+e.toString()+" "+js(i));if(typeof e=="string"&&e.length>Em/3&&$f(e)>Em)throw new Error(t+"contains a string greater than "+Em+" utf8 bytes "+js(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(Tn(e,(a,u)=>{if(a===".value")r=!0;else if(a!==".priority"&&a!==".sv"&&(s=!0,!N1(a)))throw new Error(t+" contains an invalid key ("+a+") "+js(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);OU(i,a),Iy(t,u,i),DU(i)}),r&&s)throw new Error(t+' contains ".value" child '+js(i)+" in addition to actual children.")}},O1=function(t,e,n,i){if(!L1(n))throw new Error(rv(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},gj=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),O1(t,e,n)},vj=function(t,e){if(Ie(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},yj=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!N1(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!mj(n))throw new Error(rv(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Sy(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();n!==null&&!ny(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(r)}n&&t.eventLists_.push(n)}function D1(t,e,n){Sy(t,n),M1(t,i=>ny(i,e))}function yr(t,e,n){Sy(t,n),M1(t,i=>ai(i,e)||ai(e,i))}function M1(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const s=r.path;e(s)?(Ej(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Ej(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();bu&&Jt("event: "+n.toString()),al(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj="repo_interrupt",Ij=25;class Sj{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wj,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=df(),this.transactionQueueTree_=new Ey,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Cj(t,e,n){if(t.stats_=ey(t.repoInfo_),t.forceRestClient_||rU())t.server_=new hf(t.repoInfo_,(i,r,s,a)=>{mT(t,i,r,s,a)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>_T(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Mt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new or(t.repoInfo_,e,(i,r,s,a)=>{mT(t,i,r,s,a)},i=>{_T(t,i)},i=>{Pj(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=uU(t.repoInfo_,()=>new a4(t.stats_,t.server_)),t.infoData_=new n4,t.infoSyncTree_=new dT({startListening:(i,r,s,a)=>{let u=[];const h=t.infoData_.getNode(i._path);return h.isEmpty()||(u=_p(t.infoSyncTree_,i._path,h),setTimeout(()=>{a("ok")},0)),u},stopListening:()=>{}}),xy(t,"connected",!1),t.serverSyncTree_=new dT({startListening:(i,r,s,a)=>(t.server_.listen(i,s,r,(u,h)=>{const f=a(u,h);yr(t.eventQueue_,i._path,f)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function xj(t){const n=t.infoData_.getNode(new He(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Cy(t){return oj({timestamp:xj(t)})}function mT(t,e,n,i,r){t.dataUpdateCount++;const s=new He(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let a=[];if(r)if(i){const h=$d(n,f=>jt(f));a=tj(t.serverSyncTree_,s,h,r)}else{const h=jt(n);a=ej(t.serverSyncTree_,s,h,r)}else if(i){const h=$d(n,f=>jt(f));a=Y4(t.serverSyncTree_,s,h)}else{const h=jt(n);a=_p(t.serverSyncTree_,s,h)}let u=s;a.length>0&&(u=yp(t,s)),yr(t.eventQueue_,u,a)}function _T(t,e){xy(t,"connected",e),e===!1&&Rj(t)}function Pj(t,e){Tn(e,(n,i)=>{xy(t,n,i)})}function xy(t,e,n){const i=new He("/.info/"+e),r=jt(n);t.infoData_.updateSnapshot(i,r);const s=_p(t.infoSyncTree_,i,r);yr(t.eventQueue_,i,s)}function F1(t){return t.nextWriteId_++}function Aj(t,e,n,i,r){Py(t,"set",{path:e.toString(),value:n,priority:i});const s=Cy(t),a=jt(n,i),u=py(t.serverSyncTree_,e),h=A1(a,u,s),f=F1(t),_=S1(t.serverSyncTree_,e,h,f,!0);Sy(t.eventQueue_,_),t.server_.put(e.toString(),a.val(!0),(w,C)=>{const b=w==="ok";b||wn("set at "+e+" failed: "+w);const k=qs(t.serverSyncTree_,f,!b);yr(t.eventQueue_,e,k),Lj(t,r,w,C)});const g=B1(t,e);yp(t,g),yr(t.eventQueue_,g,[])}function Rj(t){Py(t,"onDisconnectEvents");const e=Cy(t),n=df();G_(t.onDisconnect_,Me(),(r,s)=>{const a=uj(r,s,t.serverSyncTree_,e);c1(n,r,a)});let i=[];G_(n,Me(),(r,s)=>{i=i.concat(_p(t.serverSyncTree_,r,s));const a=B1(t,r);yp(t,a)}),t.onDisconnect_=df(),yr(t.eventQueue_,Me(),i)}function kj(t,e,n){let i;Ie(e._path)===".info"?i=fT(t.infoSyncTree_,e,n):i=fT(t.serverSyncTree_,e,n),D1(t.eventQueue_,e._path,i)}function bj(t,e,n){let i;Ie(e._path)===".info"?i=J_(t.infoSyncTree_,e,n):i=J_(t.serverSyncTree_,e,n),D1(t.eventQueue_,e._path,i)}function Nj(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Tj)}function Py(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Jt(n,...e)}function Lj(t,e,n,i){e&&al(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let s=r;i&&(s+=": "+i);const a=new Error(s);a.code=r,e(a)}})}function V1(t,e,n){return py(t.serverSyncTree_,e,n)||de.EMPTY_NODE}function Ay(t,e=t.transactionQueueTree_){if(e||wp(t,e),ll(e)){const n=j1(t,e);ee(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&Oj(t,Uc(e),n)}else k1(e)&&vp(e,n=>{Ay(t,n)})}function Oj(t,e,n){const i=n.map(f=>f.currentWriteId),r=V1(t,e,i);let s=r;const a=r.hash();for(let f=0;f<n.length;f++){const _=n[f];ee(_.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),_.status=1,_.retryCount++;const g=mn(e,_.path);s=s.updateChild(g,_.currentOutputSnapshotRaw)}const u=s.val(!0),h=e;t.server_.put(h.toString(),u,f=>{Py(t,"transaction put response",{path:h.toString(),status:f});let _=[];if(f==="ok"){const g=[];for(let w=0;w<n.length;w++)n[w].status=2,_=_.concat(qs(t.serverSyncTree_,n[w].currentWriteId)),n[w].onComplete&&g.push(()=>n[w].onComplete(null,!0,n[w].currentOutputSnapshotResolved)),n[w].unwatcher();wp(t,Ty(t.transactionQueueTree_,e)),Ay(t,t.transactionQueueTree_),yr(t.eventQueue_,e,_);for(let w=0;w<g.length;w++)al(g[w])}else{if(f==="datastale")for(let g=0;g<n.length;g++)n[g].status===3?n[g].status=4:n[g].status=0;else{wn("transaction at "+h.toString()+" failed: "+f);for(let g=0;g<n.length;g++)n[g].status=4,n[g].abortReason=f}yp(t,e)}},a)}function yp(t,e){const n=U1(t,e),i=Uc(n),r=j1(t,n);return Dj(t,r,i),i}function Dj(t,e,n){if(e.length===0)return;const i=[];let r=[];const a=e.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<e.length;u++){const h=e[u],f=mn(n,h.path);let _=!1,g;if(ee(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),h.status===4)_=!0,g=h.abortReason,r=r.concat(qs(t.serverSyncTree_,h.currentWriteId,!0));else if(h.status===0)if(h.retryCount>=Ij)_=!0,g="maxretry",r=r.concat(qs(t.serverSyncTree_,h.currentWriteId,!0));else{const w=V1(t,h.path,a);h.currentInputSnapshot=w;const C=e[u].update(w.val());if(C!==void 0){Iy("transaction failed: Data returned ",C,h.path);let b=jt(C);typeof C=="object"&&C!=null&&Er(C,".priority")||(b=b.updatePriority(w.getPriority()));const D=h.currentWriteId,A=Cy(t),P=A1(b,w,A);h.currentOutputSnapshotRaw=b,h.currentOutputSnapshotResolved=P,h.currentWriteId=F1(t),a.splice(a.indexOf(D),1),r=r.concat(S1(t.serverSyncTree_,h.path,P,h.currentWriteId,h.applyLocally)),r=r.concat(qs(t.serverSyncTree_,D,!0))}else _=!0,g="nodata",r=r.concat(qs(t.serverSyncTree_,h.currentWriteId,!0))}yr(t.eventQueue_,n,r),r=[],_&&(e[u].status=2,function(w){setTimeout(w,Math.floor(0))}(e[u].unwatcher),e[u].onComplete&&(g==="nodata"?i.push(()=>e[u].onComplete(null,!1,e[u].currentInputSnapshot)):i.push(()=>e[u].onComplete(new Error(g),!1,null))))}wp(t,t.transactionQueueTree_);for(let u=0;u<i.length;u++)al(i[u]);Ay(t,t.transactionQueueTree_)}function U1(t,e){let n,i=t.transactionQueueTree_;for(n=Ie(e);n!==null&&ll(i)===void 0;)i=Ty(i,n),e=$e(e),n=Ie(e);return i}function j1(t,e){const n=[];return z1(t,e,n),n.sort((i,r)=>i.order-r.order),n}function z1(t,e,n){const i=ll(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);vp(e,r=>{z1(t,r,n)})}function wp(t,e){const n=ll(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,R1(e,n.length>0?n:void 0)}vp(e,i=>{wp(t,i)})}function B1(t,e){const n=Uc(U1(t,e)),i=Ty(t.transactionQueueTree_,e);return hj(i,r=>{Tm(t,r)}),Tm(t,i),b1(i,r=>{Tm(t,r)}),n}function Tm(t,e){const n=ll(e);if(n){const i=[];let r=[],s=-1;for(let a=0;a<n.length;a++)n[a].status===3||(n[a].status===1?(ee(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(ee(n[a].status===0,"Unexpected transaction status in abort"),n[a].unwatcher(),r=r.concat(qs(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&i.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));s===-1?R1(e,void 0):n.length=s+1,yr(t.eventQueue_,Uc(e),r);for(let a=0;a<i.length;a++)al(i[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function Fj(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):wn(`Invalid query segment '${n}' in query '${t}'`)}return e}const gT=function(t,e){const n=Vj(t),i=n.namespace;n.domain==="firebase.com"&&vr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&vr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||ZV();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new $P(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new He(n.pathString)}},Vj=function(t){let e="",n="",i="",r="",s="",a=!0,u="https",h=443;if(typeof t=="string"){let f=t.indexOf("//");f>=0&&(u=t.substring(0,f-1),t=t.substring(f+2));let _=t.indexOf("/");_===-1&&(_=t.length);let g=t.indexOf("?");g===-1&&(g=t.length),e=t.substring(0,Math.min(_,g)),_<g&&(r=Mj(t.substring(_,g)));const w=Fj(t.substring(Math.min(t.length,g)));f=e.indexOf(":"),f>=0?(a=u==="https"||u==="wss",h=parseInt(e.substring(f+1),10)):f=e.length;const C=e.slice(0,f);if(C.toLowerCase()==="localhost")n="localhost";else if(C.split(".").length<=2)n=C;else{const b=e.indexOf(".");i=e.substring(0,b).toLowerCase(),n=e.substring(b+1),s=i}"ns"in w&&(s=w.ns)}return{host:e,port:h,domain:n,subdomain:i,secure:a,scheme:u,pathString:r,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,n,i,r){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Mt(this.snapshot.exportVal())}}class jj{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ee(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return xe(this._path)?null:e1(this._path)}get ref(){return new Es(this._repo,this._path)}get _queryIdentifier(){const e=tT(this._queryParams),n=Xv(e);return n==="{}"?"default":n}get _queryObject(){return tT(this._queryParams)}isEqual(e){if(e=Ge(e),!(e instanceof Ry))return!1;const n=this._repo===e._repo,i=ny(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+NU(this._path)}}class Es extends Ry{constructor(e,n){super(e,n,new oy,!1)}get parent(){const e=n1(this._path);return e===null?null:new Es(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class wf{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new He(e),i=tg(this.ref,e);return new wf(this._node.getChild(n),i,ut)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new wf(r,tg(this.ref,i),ut)))}hasChild(e){const n=new He(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function vT(t,e){return t=Ge(t),t._checkNotDeleted("ref"),e!==void 0?tg(t._root,e):t._root}function tg(t,e){return t=Ge(t),Ie(t._path)===null?gj("child","path",e):O1("child","path",e),new Es(t._repo,xt(t._path,e))}function Bj(t,e){t=Ge(t),vj("set",t._path),_j("set",e,t._path);const n=new Hf;return Aj(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class ky{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new Uj("value",this,new wf(e.snapshotNode,new Es(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new jj(this,e,n):null}matches(e){return e instanceof ky?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function Wj(t,e,n,i,r){const s=new zj(n,void 0),a=new ky(s);return kj(t._repo,t,a),()=>bj(t._repo,t,a)}function Hj(t,e,n,i){return Wj(t,"value",e)}B4(Es);K4(Es);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j="FIREBASE_DATABASE_EMULATOR_HOST",ng={};let qj=!1;function Gj(t,e,n,i){t.repoInfo_=new $P(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function Kj(t,e,n,i,r){let s=i||t.options.databaseURL;s===void 0&&(t.options.projectId||vr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Jt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let a=gT(s,r),u=a.repoInfo,h;typeof process<"u"&&FE&&(h=FE[$j]),h?(s=`http://${h}?ns=${u.namespace}`,a=gT(s,r),u=a.repoInfo):a.repoInfo.secure;const f=new oU(t.name,t.options,e);yj("Invalid Firebase Database URL",a),xe(a.path)||vr("Database URL must point to the root of a Firebase Database (not including a child path).");const _=Qj(u,t,f,new sU(t.name,n));return new Yj(_,t)}function Zj(t,e){const n=ng[e];(!n||n[t.key]!==t)&&vr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Nj(t),delete n[t.key]}function Qj(t,e,n,i){let r=ng[e.name];r||(r={},ng[e.name]=r);let s=r[t.toURLString()];return s&&vr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Sj(t,qj,n,i),r[t.toURLString()]=s,s}class Yj{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Cj(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Es(this._repo,Me())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Zj(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&vr("Cannot call "+e+" on a deleted database.")}}function Xj(t=Gf(),e){const n=Sc(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=tv("database");i&&Jj(n,...i)}return n}function Jj(t,e,n,i={}){t=Ge(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&vr("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&vr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new md(md.OWNER);else if(i.mockUserToken){const a=typeof i.mockUserToken=="string"?i.mockUserToken:nv(i.mockUserToken,t.app.options.projectId);s=new md(a)}Gj(r,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ez(t){WV(gs),ls(new hr("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return Kj(i,r,s,n)},"PUBLIC").setMultipleInstances(!0)),Kn(VE,UE,t),Kn(VE,UE,"esm2017")}or.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};or.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};ez();const tz={apiKey:"AIzaSyC_G-cV2z_RbVO7rjGB9o7e9pZ0nsavtTQ",authDomain:"skwebsite-df527.firebaseapp.com",databaseURL:"https://skwebsite-df527-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"skwebsite-df527",storageBucket:"skwebsite-df527.appspot.com",messagingSenderId:"950246300063",appId:"1:950246300063:web:1d3dacc9f19b89e84205aa",measurementId:"G-NZPHQLT27P"},Ep=sC(tz),pt=gF(Ep),Ef=zC(Ep);new Qi;const Tf=RP(Ep),yT=Xj(Ep),nz=({onClose:t})=>{const[e,n]=$.useState(""),[i,r]=$.useState(""),[s,a]=$.useState(!0),[u,h]=$.useState(null),f=async()=>{try{await dO(Ef,e,i),alert("Sign up successful!"),t()}catch(g){g instanceof Error?h(g.message):h("An unknown error occurred"),console.error("Error signing up:",g)}},_=async()=>{try{await fO(Ef,e,i),alert("Sign in successful!"),t()}catch(g){g instanceof Error?h(g.message):h("An unknown error occurred"),console.error("Error signing in:",g)}};return E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:E.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-sm w-full relative",children:[E.jsx("button",{onClick:t,className:"absolute top-2 right-2 text-gray-600 hover:text-gray-900",children:""}),E.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:s?"Sign Up":"Sign In"}),E.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:g=>n(g.target.value),className:"border p-2 mb-2 rounded w-full"}),E.jsx("input",{type:"password",placeholder:"Password",value:i,onChange:g=>r(g.target.value),className:"border p-2 mb-4 rounded w-full"}),E.jsxs("div",{className:"flex flex-col items-center",children:[s?E.jsx("button",{onClick:f,className:"bg-slate-950 border rounded-full text-white px-4 py-2 transition-transform duration-300 ease-in-out hover:bg-[#2a2388] hover:scale-105",children:"Sign Up"}):E.jsx("button",{onClick:_,className:"bg-slate-950 border rounded-full text-white px-4 py-2 transition-transform duration-300 ease-in-out hover:bg-[#2a2388] hover:scale-105",children:"Sign In"}),u&&E.jsx("p",{className:"text-red-500 mt-2",children:u}),E.jsx("button",{onClick:()=>a(!s),className:"mt-4 text-blue-500 underline",children:s?"Already have an account? Sign In":"Need an account? Sign Up"})]})]})})},iz=()=>{const{closeAuthModal:t}=H1();return E.jsxs("div",{children:[E.jsx("button",{onClick:t,className:"bg-slate-950 text-white px-4 py-2 rounded",children:"Close Auth Modal"}),E.jsx(nz,{onClose:t})]})},W1=$.createContext(void 0),rz=({children:t})=>{const[e,n]=$.useState(null),[i,r]=$.useState(!1);$.useEffect(()=>{const h=_O(Ef,f=>{n(f)});return()=>h()},[]);const s=()=>r(!0),a=()=>r(!1),u=async()=>{try{await gO(Ef),alert("Sign out successful!")}catch(h){console.error("Error signing out:",h)}};return E.jsxs(W1.Provider,{value:{user:e,isAuthOpen:i,openAuthModal:s,closeAuthModal:a,signOut:u},children:[t,i&&E.jsx(iz,{})," "]})},H1=()=>{const t=$.useContext(W1);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},If=()=>{const{user:t,openAuthModal:e,signOut:n}=H1();return E.jsx("div",{children:t?E.jsx("button",{onClick:n,className:"bg-slate-950 border  text-white px-4 py-2 transition-transform duration-300 ease-in-out hover:bg-[#2a2388] hover:scale-105",children:"Sign Out"}):E.jsx("button",{onClick:e,className:"bg-slate-950 border  text-white px-4 py-2 transition-transform duration-300 ease-in-out hover:bg-[#2a2388] hover:scale-105",children:"Sign Up"})})},sz=()=>E.jsx("button",{className:"bg-slate-950 border  text-white px-4 py-2 transition-transform duration-300 ease-in-out hover:bg-[#2a2388] hover:scale-105 cursor-pointer mb-4",children:"Learn More"}),oz=()=>{const[t,e]=$.useState(!1),n=()=>{e(!t)},i=r=>{const s=document.getElementById(r);s&&s.scrollIntoView({behavior:"smooth"}),t&&n()};return E.jsxs(E.Fragment,{children:[E.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-50 z-40 transform ${t?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out md:hidden`,children:E.jsxs("div",{className:"w-64 h-full bg-gradient-to-r from-[#e3f9ff] to-[#b5e8ff] p-4 relative flex flex-col",children:[E.jsx("button",{className:"text-black font-bold text-2xl self-end",onClick:n,children:""}),E.jsx("ul",{className:"mt-12 flex flex-col space-y-4",children:w0.map((r,s)=>E.jsx("li",{className:`text-black font-bold cursor-pointer font-serif\r
                hover:bg-gradient-to-r hover:from-orange-400 hover:to-blue-900\r
                hover:text-transparent hover:bg-clip-text transition duration-300 ease-in-out`,onClick:()=>i(r.id),children:r.name},s))}),E.jsx("div",{className:"mt-auto",children:E.jsx(If,{})})]})}),E.jsxs("nav",{className:"bg-white p-4 fixed w-full z-30 flex flex-col md:flex-row items-center justify-between",children:[E.jsxs("div",{className:"flex items-center w-full md:w-auto",children:[E.jsx("h1",{className:`text-2xl font-bold cursor-pointer text-black font-serif\r
            hover:bg-gradient-to-r hover:from-orange-400 hover:to-blue-900\r
            hover:text-transparent hover:bg-clip-text transition duration-300 ease-in-out`,onClick:()=>i("home"),children:"Logo"}),E.jsx("button",{className:"md:hidden text-black font-bold text-2xl ml-auto",onClick:n,children:""})]}),E.jsx("ul",{className:"hidden md:flex flex-row space-x-4 md:justify-center md:gap-11 mt-4 md:mt-0",children:w0.map((r,s)=>E.jsx("li",{className:`text-black font-bold cursor-pointer font-serif\r
              hover:bg-gradient-to-r hover:from-orange-400 hover:to-blue-900\r
              hover:text-transparent hover:bg-clip-text transition duration-300 ease-in-out`,onClick:()=>i(r.id),children:r.name},s))}),E.jsx("div",{className:"hidden md:block mt-4 md:mt-0",children:E.jsx(If,{})})]})]})},az="/SkWeb/assets/react-CHdo91hT.svg",lz=()=>E.jsxs("div",{className:"min-h-screen pt-16 px-4 sm:px-8",children:[" ",E.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between w-full max-w-[100%] gap-8 sm:gap-4",children:[E.jsxs("div",{className:"flex flex-col items-start space-y-4 p-5 w-full sm:w-1/2",children:[E.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-black font-serif",children:"Building a Brighter Future for Youth"}),E.jsx("p",{className:"text-base sm:text-lg md:text-xl lg:text-2xl text-black mb-5",children:"At Sangguniang Kabataan, our mission is to empower the youth by providing them with opportunities for growth, development, and active participation in their communities. We envision a future where every young person has the tools and support they need to succeed and make a positive impact."}),E.jsx(If,{})]}),E.jsxs("div",{className:"flex justify-center sm:ml-[-20px] w-full sm:w-1/2",children:[" ",E.jsx("img",{src:az,alt:"Card",className:"w-[80%] h-auto sm:w-[300px] sm:h-[300px] md:w-[400px] md:h-[400px] lg:w-[550px] lg:h-[550px] rounded-md shadow-md object-contain"})]})]})]}),wT=()=>E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"flex flex-col items-center justify-center h-[700px] w-full bg-blue-800 bg-cover bg-center",style:{backgroundImage:"url('https://drive.google.com/uc?export=view&id=1xgFizWI1H0W1V3rPTiSr3AsB4Lx6KBIg')"},children:[E.jsxs("div",{className:"mb-4 text-center",children:[E.jsxs("h1",{className:"font-serif font-bold text-5xl p-5",children:["Empowerment Youth for a ",E.jsx("br",{})," Better Future"]}),E.jsxs("p",{className:"text-xl",children:["Welcome to the official website of Sangguniang Kabataan, where we aim to provide ",E.jsx("br",{})," opportunities, support, and representation for the youth in our community."]})]}),E.jsxs("div",{className:"flex space-x-4",children:[E.jsx(sz,{}),E.jsx(If,{})]})]}),E.jsx(lz,{})]}),uz=({service:t,formData:e,handleInputChange:n,handleFileChange:i,handleSubmit:r,closeForm:s})=>{const a=h=>e&&e[h]!==void 0?e[h]:"",u=()=>t.formFields.map((h,f)=>{const _=a(h.label);switch(h.type){case"textarea":return E.jsx("textarea",{placeholder:h.label,className:"block w-full mb-2 p-2 border border-gray-300 rounded",value:_,onChange:g=>n(h.label,g.target.value)},f);case"file":return E.jsx("input",{type:"file",className:"block w-full mb-2",onChange:g=>i(h.label,g.target.files?g.target.files[0]:null)},f);default:return E.jsx("input",{type:h.type,placeholder:h.label,className:"block w-full mb-2 p-2 border border-gray-300 rounded",value:_,onChange:g=>n(h.label,g.target.value)},f)}});return E.jsxs("div",{className:"p-6",children:[E.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Service Form"}),E.jsxs("form",{onSubmit:h=>{h.preventDefault(),r()},children:[u(),E.jsx("button",{type:"submit",className:"bg-green-500 text-white p-3 rounded w-full",children:"Submit"}),E.jsx("button",{type:"button",onClick:s,className:"mt-2 bg-gray-500 text-white p-3 rounded w-full",children:"Cancel"})]})]})},cz=({service:t,onClose:e,openServiceForm:n})=>{const[i,r]=$.useState(0),s=t.imageUrl.split(",").map(h=>h.trim()),a=()=>{r(h=>h>0?h-1:s.length-1)},u=()=>{r(h=>h<s.length-1?h+1:0)};return s.length===0?E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white p-4 sm:p-5 rounded-lg w-11/12 sm:w-4/5 md:w-2/3 lg:w-1/2 max-w-md relative",children:[E.jsx("button",{onClick:e,className:"absolute top-2 right-2 text-gray-600 text-2xl sm:text-3xl font-bold focus:outline-none",children:""}),E.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-2 sm:mb-3",children:t.title}),E.jsx("p",{className:"text-sm sm:text-base mb-2 sm:mb-3",children:t.description}),E.jsx("p",{className:"text-sm sm:text-base",children:"No images available"}),E.jsx("button",{onClick:n,className:"bg-blue-500 text-white p-2 sm:p-3 rounded w-full mt-4",children:"Open Service Form"})]})}):E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white p-4 sm:p-14 rounded-lg w-11/12 sm:w-[70%] md:w-2/3 lg:w-1/2 max-w-md relative",children:[E.jsx("button",{onClick:e,className:"absolute top-2 right-2 text-gray-600 text-2xl sm:text-3xl font-bold focus:outline-none",children:""}),E.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-2 sm:mb-3",children:t.title}),E.jsx("p",{className:"text-sm sm:text-base mb-2 sm:mb-3",children:t.description}),E.jsxs("div",{className:"relative mb-4",children:[E.jsx("img",{src:s[i],alt:`Service Image ${i+1}`,className:"w-full rounded-lg"}),s.length>1&&E.jsxs("div",{className:"absolute inset-0 flex justify-between items-center",children:[E.jsx("button",{onClick:a,className:"bg-black text-white p-2 rounded-full opacity-75 hover:opacity-100 text-lg sm:text-xl",children:""}),E.jsx("button",{onClick:u,className:"bg-black text-white p-2 rounded-full opacity-75 hover:opacity-100 text-lg sm:text-xl",children:""})]})]}),E.jsx("button",{onClick:n,className:"bg-blue-500 text-white p-2 sm:p-3 rounded w-full mt-4",children:"Open Service Form"})]})})},hz=()=>{const[t,e]=$.useState([]),[n,i]=$.useState(null),[r,s]=$.useState(!1),[a,u]=$.useState({}),[h,f]=$.useState({}),_=On(pt,"services"),g=On(pt,"applications"),w=async()=>{try{const G=(await gr(_)).docs.map(Z=>({...Z.data(),id:Z.id}));console.log("Fetched services:",G),e(G)}catch(j){console.error("Error fetching services:",j)}};$.useEffect(()=>{w()},[]);const C=(j,G)=>{f({...h,[j]:G})},b=async j=>{try{let G={serviceId:j,...a[j]};if(h[j]){const Z=hc(Tf,`applications/${j}/${h[j].name}`);await uc(Z,h[j]);const x=await cc(Z);G={...G,fileURL:x}}await sl(g,G),alert("Application submitted!"),i(null),u(Z=>({...Z,[j]:{}})),f(Z=>({...Z,[j]:null}))}catch(G){console.error("Error submitting application:",G)}},k=(j,G,Z)=>{u({...a,[j]:{...a[j],[G]:Z}})},D=j=>{i(j)},A=()=>{i(null)},P=()=>{s(!0)},N=()=>{s(!1)};return E.jsxs("div",{className:"p-4 grid grid-cols-3 gap-6",children:[t.length===0?E.jsx("p",{children:"No services available."}):t.map(j=>E.jsx("div",{className:"relative cursor-pointer overflow-hidden rounded-lg shadow-lg",style:{backgroundImage:`url(${j.imageUrl})`,backgroundSize:"cover",backgroundPosition:"center",height:"200px",width:"100%"},onClick:()=>D(j),children:E.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-end p-4",children:E.jsxs("div",{className:"text-white",children:[E.jsx("h3",{className:"text-sm md:text-lg font-bold",children:j.title}),E.jsx("p",{className:"text-xs md:text-sm",children:j.description})]})})},j.id)),n&&E.jsx(cz,{service:n,onClose:A,openServiceForm:P}),r&&n&&E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:E.jsx("div",{className:"bg-white p-6 rounded-lg w-11/12 md:w-1/2 lg:w-1/3 max-w-lg relative",children:E.jsx(uz,{service:n,formData:a[n.id]||{},handleInputChange:(j,G)=>k(n.id,j,G),handleFileChange:(j,G)=>C(n.id,G),handleSubmit:()=>b(n.id),closeForm:N})})})]})},ET=()=>E.jsxs("div",{className:"p-4 md:p-8 min-h-screen bg-gray-100",children:[E.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-center mb-6",children:"Services and Programs that Make a Difference"}),E.jsx(hz,{})]}),dz=({isOpen:t,onClose:e,children:n})=>t?E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:E.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-lg w-full max-w-sm md:max-w-lg relative",children:[E.jsx("button",{className:"absolute top-2 right-2 text-gray-600 text-3xl md:text-4xl font-bold focus:outline-none z-60",onClick:e,children:""}),E.jsx("div",{className:"p-4 md:p-6 mt-6",children:n})]})}):null,fz=({newsletter:t})=>{const[e,n]=$.useState(!1),i=()=>{n(!0)},r=()=>{n(!1)};return E.jsxs(E.Fragment,{children:[E.jsxs("div",{onClick:i,className:"bg-white rounded-lg shadow-lg overflow-hidden cursor-pointer",children:[E.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-48 object-cover"}),E.jsxs("div",{className:"p-4",children:[E.jsx("h2",{className:"text-xl font-bold mb-2",children:t.title}),E.jsx("p",{className:"text-gray-700 mb-4",children:t.description}),t.link&&E.jsx("a",{href:t.link,className:"text-blue-500 hover:underline cursor-pointer",children:"Read More "})]})]}),E.jsxs(dz,{isOpen:e,onClose:r,children:[E.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-64 object-cover mb-4"}),E.jsx("h2",{className:"text-xl font-bold mb-2",children:t.title}),E.jsx("p",{className:"text-gray-700 mb-4",children:t.description}),E.jsx("p",{className:"text-gray-700 mb-4",children:t.fullContent})]})]})},TT=()=>{const[t,e]=$.useState([]),n=On(pt,"newsletters");return $.useEffect(()=>{(async()=>{try{const r=await gr(n);e(r.docs.map(s=>({...s.data(),id:s.id})))}catch(r){console.error("Error fetching newsletters:",r)}})()},[n]),E.jsxs("div",{className:"p-4 md:p-8 min-h-screen bg-gray-100",children:[E.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-4",children:"Stay Updated with Us"}),E.jsx("p",{className:"text-base md:text-lg mb-8",children:"Get the latest news and updates on youth and community initiatives."}),E.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-8",children:["  ",t.map(i=>E.jsx(fz,{newsletter:i},i.id))]})]})},pz=({eventName:t,onClose:e})=>{const[n,i]=$.useState(""),[r,s]=$.useState(""),[a,u]=$.useState(""),[h,f]=$.useState(""),_=async g=>{if(g.preventDefault(),!t){console.error("Event name is missing"),alert("Event name is required.");return}try{await sl(On(pt,"attendance"),{eventName:t,email:n,fullName:r,age:a,address:h,timestamp:new Date().toISOString()}),alert("Attendance recorded successfully!"),e()}catch(w){console.error("Error recording attendance:",w),alert("Failed to record attendance.")}};return E.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:E.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96",children:[E.jsxs("h3",{className:"text-xl font-semibold mb-4",children:["Attendance Form for ",t]}),E.jsxs("form",{onSubmit:_,children:[E.jsxs("div",{className:"space-y-4",children:[E.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:g=>i(g.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),E.jsx("input",{type:"text",placeholder:"Full Name",value:r,onChange:g=>s(g.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),E.jsx("input",{type:"number",placeholder:"Age",value:a,onChange:g=>u(g.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),E.jsx("input",{type:"text",placeholder:"Address",value:h,onChange:g=>f(g.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),E.jsxs("div",{className:"flex justify-between mt-4",children:[E.jsx("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition duration-300",children:"Submit"}),E.jsx("button",{type:"button",onClick:e,className:"bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition duration-300",children:"Close"})]})]})]})})},mz=({isOpen:t,onClose:e,event:n})=>{const[i,r]=$.useState(!1),[s,a]=$.useState(0);if(!t||!n)return null;const u=new Date().toISOString().split("T")[0],h=()=>{r(!0)},f=()=>{r(!1)},_=()=>{a(w=>w>0?w-1:n.image.length-1)},g=()=>{a(w=>w<n.image.length-1?w+1:0)};return E.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50",children:E.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-lg w-full max-w-sm md:max-w-lg relative",children:[E.jsx("button",{onClick:e,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-xl md:text-2xl",children:""}),E.jsx("h3",{className:"text-lg md:text-xl font-semibold mb-4",children:n.title}),n.image.length>0&&E.jsxs("div",{className:"relative w-full h-40 md:h-60 max-h-60 overflow-hidden",children:[E.jsx("img",{src:n.image[s],alt:n.title,className:"w-full h-full object-cover rounded-lg"}),n.image.length>1&&E.jsxs("div",{className:"absolute inset-0 flex justify-between items-center",children:[E.jsx("button",{onClick:_,className:"bg-black text-white p-2 rounded-full opacity-75 hover:opacity-100 text-xl md:text-2xl",children:""}),E.jsx("button",{onClick:g,className:"bg-black text-white p-2 rounded-full opacity-75 hover:opacity-100 text-xl md:text-2xl",children:""})]})]}),E.jsx("p",{className:"text-gray-600 mt-2 text-xs md:text-sm",children:n.date}),E.jsx("p",{className:"text-gray-600 text-xs md:text-sm",children:n.location}),E.jsx("p",{className:"text-gray-600 text-xs md:text-sm",children:n.description}),n.date===u?E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:h,className:"mt-4 bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition duration-300 text-xs md:text-sm",children:"Open Attendance Form"}),i&&E.jsx(pz,{onClose:f,eventName:n.title})]}):E.jsx("p",{className:"mt-4 text-red-500 text-xs md:text-sm",children:"Attendance form is not available yet."}),E.jsx("button",{type:"button",onClick:e,className:"mt-4 bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition duration-300 text-xs md:text-sm",children:"Close"})]})})},_z=()=>{const[t,e]=$.useState([]),[n,i]=$.useState(null),[r,s]=$.useState(!1);$.useEffect(()=>{a()},[]);const a=async()=>{try{const f=On(pt,"events"),g=(await gr(f)).docs.map(w=>({id:w.id,...w.data()}));e(g)}catch(f){console.error("Error fetching events:",f)}},u=f=>{i(f),s(!0)},h=()=>{s(!1),i(null)};return E.jsxs("div",{className:"p-4 sm:p-6 md:p-8 bg-gray-100 min-h-screen",children:[E.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-4 sm:mb-6",children:"Upcoming Events"}),t.length===0?E.jsx("p",{className:"text-base sm:text-lg text-gray-600",children:"No upcoming events available at the moment."}):E.jsx("div",{className:"grid grid-cols-3 gap-6 sm:gap-8",children:t.map(f=>E.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-md cursor-pointer hover:shadow-lg transition-shadow flex flex-col",onClick:()=>u(f),children:[E.jsx("img",{src:f.image.length>0?f.image[0]:"/default-image.jpg",alt:f.title,className:"w-full h-32 sm:h-48 object-cover rounded-lg mb-4"}),E.jsxs("div",{className:"flex flex-col flex-grow",children:[E.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2 truncate",children:f.title}),E.jsx("p",{className:"text-gray-600 text-sm sm:text-base truncate",children:f.date})]})]},f.id))}),n&&E.jsx(mz,{isOpen:r,onClose:h,event:n})]})},IT=()=>E.jsx("div",{className:"bg-slate-50",children:E.jsx(_z,{})}),su=({title:t,description:e,actions:n,imagePlaceholder:i=!0})=>E.jsxs("div",{className:"bg-white p-6 border rounded-lg shadow-md",children:[E.jsx("h3",{className:"text-xl font-bold",children:t}),E.jsx("p",{className:"text-gray-600 mt-2",children:e}),E.jsx("div",{className:"mt-4",children:n.map((r,s)=>E.jsx("button",{className:"text-blue-600 hover:underline mr-4",onClick:()=>window.location.href=r.href,children:r.label},s))}),i&&E.jsx("div",{className:"mt-6 bg-gray-200 h-48"})]}),ST=()=>E.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-6",children:[E.jsxs("header",{className:"text-center",children:[E.jsx("h2",{className:"text-gray-500 uppercase mb-4",children:"Discover"}),E.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Get Involved Today"}),E.jsx("p",{className:"text-gray-600",children:"Learn how you can make a difference in your community"})]}),E.jsxs("section",{className:"mt-12 grid grid-cols-1 lg:grid-cols-2 gap-8",children:[E.jsx(su,{title:"Become a Youth Leader",description:"Join Sangguniang Kabataan and contribute to positive change in your area",actions:[{label:"Learn More",href:"#learn-more"},{label:"Sign Up",href:"#sign-up"}]}),E.jsx(su,{title:"Lead with Passion",description:"Motivate others to create positive change in their communities",actions:[{label:"Join Us",href:"#join-us"}]}),E.jsx(su,{title:"Network with Other Youth Leaders",description:"Build relationships and collaborate with like-minded individuals",actions:[{label:"Learn More",href:"#learn-more"},{label:"Sign Up",href:"#sign-up"}]}),E.jsxs("div",{className:"flex flex-col space-y-4",children:[E.jsx(su,{title:"Attend Events",description:"Participate in community activities and connect with other youth",actions:[{label:"Join Now",href:"#join-now"}],imagePlaceholder:!1}),E.jsx(su,{title:"Volunteer Opportunities",description:"Make a difference by giving back to your community",actions:[{label:"Get Involved",href:"#get-involved"}],imagePlaceholder:!1})]})]})]}),gz=({closeChat:t})=>{const[e,n]=$.useState(""),[i,r]=$.useState({}),s=zC(),a=vT(yT,"messages/");$.useEffect(()=>{const h=Hj(a,f=>{const _=f.val();r(_||{})});return()=>h()},[a]);const u=()=>{if(e.trim()){const h=s.currentUser;if(h){const f={content:e,sender:h.email||"Anonymous"},_=vT(yT,"messages/"+Date.now());Bj(_,f).then(()=>n("")).catch(g=>{console.error("Error sending message:",g),alert("Failed to send message")})}else alert("You must be authenticated to send a message.")}};return E.jsxs("div",{className:"fixed bottom-16 right-4 w-80 bg-white border border-gray-300 rounded-lg shadow-lg p-4",style:{zIndex:1e3},children:[E.jsxs("div",{className:"flex justify-between items-center border-b border-gray-300 pb-2 mb-2",children:[E.jsx("h4",{className:"text-lg font-semibold",children:"Live Chat"}),E.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:""})]}),E.jsx("div",{className:"overflow-y-auto h-60 border border-gray-200 p-2 mb-2",children:Object.entries(i).map(([h,{content:f,sender:_}])=>{var w;const g=((w=s.currentUser)==null?void 0:w.email)===_;return E.jsxs("div",{className:`mb-2 p-2 rounded-md ${g?"bg-blue-600 text-white":"bg-gray-100 text-black"}`,children:[E.jsx("p",{className:"text-sm font-semibold",children:_}),E.jsx("p",{children:f})]},h)})}),E.jsxs("div",{className:"flex",children:[E.jsx("input",{type:"text",value:e,onChange:h=>n(h.target.value),placeholder:"Type your message...",className:"flex-1 border border-gray-300 rounded-lg p-2 mr-2"}),E.jsx("button",{onClick:u,className:"bg-blue-600 text-white rounded-lg px-4 py-2",children:"Send"})]})]})},vz=()=>{const[t,e]=$.useState(!1),n=()=>{e(!t)};return E.jsxs("div",{children:[E.jsx("button",{onClick:n,className:"fixed bottom-4 right-4 bg-blue-600 text-white rounded-full p-4 shadow-lg hover:bg-blue-700 transition-transform transform hover:scale-105",children:""}),t&&E.jsx(gz,{closeChat:()=>e(!1)})]})};function $1(t,e){const n=$.useRef(e);$.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const yz=1;function wz(t){return Object.freeze({__version:yz,map:t})}function Ez(t,e){return Object.freeze({...t,...e})}const q1=$.createContext(null),G1=q1.Provider;function by(){const t=$.useContext(q1);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function Tz(t){function e(n,i){const{instance:r,context:s}=t(n).current;return $.useImperativeHandle(i,()=>r),n.children==null?null:_d.createElement(G1,{value:s},n.children)}return $.forwardRef(e)}function Iz(t){function e(n,i){const[r,s]=$.useState(!1),{instance:a}=t(n,s).current;$.useImperativeHandle(i,()=>a),$.useEffect(function(){r&&a.update()},[a,r,n.children]);const u=a._contentNode;return u?FS.createPortal(n.children,u):null}return $.forwardRef(e)}function Sz(t){function e(n,i){const{instance:r}=t(n).current;return $.useImperativeHandle(i,()=>r),null}return $.forwardRef(e)}function K1(t,e){const n=$.useRef();$.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Ny(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function Cz(t,e){return function(i,r){const s=by(),a=t(Ny(i,s),s);return $1(s.map,i.attribution),K1(a.current,i.eventHandlers),e(a.current,s,i,r),a}}var ig={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(CA,function(n){var i="1.9.4";function r(o){var l,d,p,v;for(d=1,p=arguments.length;d<p;d++){v=arguments[d];for(l in v)o[l]=v[l]}return o}var s=Object.create||function(){function o(){}return function(l){return o.prototype=l,new o}}();function a(o,l){var d=Array.prototype.slice;if(o.bind)return o.bind.apply(o,d.call(arguments,1));var p=d.call(arguments,2);return function(){return o.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var u=0;function h(o){return"_leaflet_id"in o||(o._leaflet_id=++u),o._leaflet_id}function f(o,l,d){var p,v,T,M;return M=function(){p=!1,v&&(T.apply(d,v),v=!1)},T=function(){p?v=arguments:(o.apply(d,arguments),setTimeout(M,l),p=!0)},T}function _(o,l,d){var p=l[1],v=l[0],T=p-v;return o===p&&d?o:((o-v)%T+T)%T+v}function g(){return!1}function w(o,l){if(l===!1)return o;var d=Math.pow(10,l===void 0?6:l);return Math.round(o*d)/d}function C(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function b(o){return C(o).split(/\s+/)}function k(o,l){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?s(o.options):{});for(var d in l)o.options[d]=l[d];return o.options}function D(o,l,d){var p=[];for(var v in o)p.push(encodeURIComponent(d?v.toUpperCase():v)+"="+encodeURIComponent(o[v]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function P(o,l){return o.replace(A,function(d,p){var v=l[p];if(v===void 0)throw new Error("No value provided for variable "+d);return typeof v=="function"&&(v=v(l)),v})}var N=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function j(o,l){for(var d=0;d<o.length;d++)if(o[d]===l)return d;return-1}var G="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Z(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var x=0;function I(o){var l=+new Date,d=Math.max(0,16-(l-x));return x=l+d,window.setTimeout(o,d)}var R=window.requestAnimationFrame||Z("RequestAnimationFrame")||I,O=window.cancelAnimationFrame||Z("CancelAnimationFrame")||Z("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function V(o,l,d){if(d&&R===I)o.call(l);else return R.call(window,a(o,l))}function U(o){o&&O.call(window,o)}var F={__proto__:null,extend:r,create:s,bind:a,get lastId(){return u},stamp:h,throttle:f,wrapNum:_,falseFn:g,formatNum:w,trim:C,splitWords:b,setOptions:k,getParamString:D,template:P,isArray:N,indexOf:j,emptyImageUrl:G,requestFn:R,cancelFn:O,requestAnimFrame:V,cancelAnimFrame:U};function ot(){}ot.extend=function(o){var l=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=s(d);p.constructor=l,l.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return o.statics&&r(l,o.statics),o.includes&&(Oi(o.includes),r.apply(null,[p].concat(o.includes))),r(p,o),delete p.statics,delete p.includes,p.options&&(p.options=d.options?s(d.options):{},r(p.options,o.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var T=0,M=p._initHooks.length;T<M;T++)p._initHooks[T].call(this)}},l},ot.include=function(o){var l=this.prototype.options;return r(this.prototype,o),o.options&&(this.prototype.options=l,this.mergeOptions(o.options)),this},ot.mergeOptions=function(o){return r(this.prototype.options,o),this},ot.addInitHook=function(o){var l=Array.prototype.slice.call(arguments,1),d=typeof o=="function"?o:function(){this[o].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function Oi(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=N(o)?o:[o];for(var l=0;l<o.length;l++)o[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Tt={on:function(o,l,d){if(typeof o=="object")for(var p in o)this._on(p,o[p],l);else{o=b(o);for(var v=0,T=o.length;v<T;v++)this._on(o[v],l,d)}return this},off:function(o,l,d){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var p in o)this._off(p,o[p],l);else{o=b(o);for(var v=arguments.length===1,T=0,M=o.length;T<M;T++)v?this._off(o[T]):this._off(o[T],l,d)}return this},_on:function(o,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(o,l,d)===!1){d===this&&(d=void 0);var v={fn:l,ctx:d};p&&(v.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(v)}},_off:function(o,l,d){var p,v,T;if(this._events&&(p=this._events[o],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,T=p.length;v<T;v++)p[v].fn=g;delete this._events[o];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var M=this._listens(o,l,d);if(M!==!1){var B=p[M];this._firingCount&&(B.fn=g,this._events[o]=p=p.slice()),p.splice(M,1)}}},fire:function(o,l,d){if(!this.listens(o,d))return this;var p=r({},l,{type:o,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[o];if(v){this._firingCount=this._firingCount+1||1;for(var T=0,M=v.length;T<M;T++){var B=v[T],W=B.fn;B.once&&this.off(o,W,B.ctx),W.call(B.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(o,l,d,p){typeof o!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(p=!!l,v=void 0,d=void 0);var T=this._events&&this._events[o];if(T&&T.length&&this._listens(o,v,d)!==!1)return!0;if(p){for(var M in this._eventParents)if(this._eventParents[M].listens(o,l,d,p))return!0}return!1},_listens:function(o,l,d){if(!this._events)return!1;var p=this._events[o]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var v=0,T=p.length;v<T;v++)if(p[v].fn===l&&p[v].ctx===d)return v;return!1},once:function(o,l,d){if(typeof o=="object")for(var p in o)this._on(p,o[p],l,!0);else{o=b(o);for(var v=0,T=o.length;v<T;v++)this._on(o[v],l,d,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[h(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[h(o)],this},_propagateEvent:function(o){for(var l in this._eventParents)this._eventParents[l].fire(o.type,r({layer:o.target,propagatedFrom:o.target},o),!0)}};Tt.addEventListener=Tt.on,Tt.removeEventListener=Tt.clearAllEventListeners=Tt.off,Tt.addOneTimeEventListener=Tt.once,Tt.fireEvent=Tt.fire,Tt.hasEventListeners=Tt.listens;var tn=ot.extend(Tt);function q(o,l,d){this.x=d?Math.round(o):o,this.y=d?Math.round(l):l}var ce=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};q.prototype={clone:function(){return new q(this.x,this.y)},add:function(o){return this.clone()._add(J(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(J(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new q(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new q(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ce(this.x),this.y=ce(this.y),this},distanceTo:function(o){o=J(o);var l=o.x-this.x,d=o.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(o){return o=J(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=J(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function J(o,l,d){return o instanceof q?o:N(o)?new q(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new q(o.x,o.y):new q(o,l,d)}function fe(o,l){if(o)for(var d=l?[o,l]:o,p=0,v=d.length;p<v;p++)this.extend(d[p])}fe.prototype={extend:function(o){var l,d;if(!o)return this;if(o instanceof q||typeof o[0]=="number"||"x"in o)l=d=J(o);else if(o=we(o),l=o.min,d=o.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(o){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var l,d;return typeof o[0]=="number"||o instanceof q?o=J(o):o=we(o),o instanceof fe?(l=o.min,d=o.max):l=d=o,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(o){o=we(o);var l=this.min,d=this.max,p=o.min,v=o.max,T=v.x>=l.x&&p.x<=d.x,M=v.y>=l.y&&p.y<=d.y;return T&&M},overlaps:function(o){o=we(o);var l=this.min,d=this.max,p=o.min,v=o.max,T=v.x>l.x&&p.x<d.x,M=v.y>l.y&&p.y<d.y;return T&&M},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*o,v=Math.abs(l.y-d.y)*o;return we(J(l.x-p,l.y-v),J(d.x+p,d.y+v))},equals:function(o){return o?(o=we(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function we(o,l){return!o||o instanceof fe?o:new fe(o,l)}function Ae(o,l){if(o)for(var d=l?[o,l]:o,p=0,v=d.length;p<v;p++)this.extend(d[p])}Ae.prototype={extend:function(o){var l=this._southWest,d=this._northEast,p,v;if(o instanceof Ee)p=o,v=o;else if(o instanceof Ae){if(p=o._southWest,v=o._northEast,!p||!v)return this}else return o?this.extend(_e(o)||Fe(o)):this;return!l&&!d?(this._southWest=new Ee(p.lat,p.lng),this._northEast=new Ee(v.lat,v.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(v.lat,d.lat),d.lng=Math.max(v.lng,d.lng)),this},pad:function(o){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*o,v=Math.abs(l.lng-d.lng)*o;return new Ae(new Ee(l.lat-p,l.lng-v),new Ee(d.lat+p,d.lng+v))},getCenter:function(){return new Ee((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ee(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ee(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof Ee||"lat"in o?o=_e(o):o=Fe(o);var l=this._southWest,d=this._northEast,p,v;return o instanceof Ae?(p=o.getSouthWest(),v=o.getNorthEast()):p=v=o,p.lat>=l.lat&&v.lat<=d.lat&&p.lng>=l.lng&&v.lng<=d.lng},intersects:function(o){o=Fe(o);var l=this._southWest,d=this._northEast,p=o.getSouthWest(),v=o.getNorthEast(),T=v.lat>=l.lat&&p.lat<=d.lat,M=v.lng>=l.lng&&p.lng<=d.lng;return T&&M},overlaps:function(o){o=Fe(o);var l=this._southWest,d=this._northEast,p=o.getSouthWest(),v=o.getNorthEast(),T=v.lat>l.lat&&p.lat<d.lat,M=v.lng>l.lng&&p.lng<d.lng;return T&&M},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,l){return o?(o=Fe(o),this._southWest.equals(o.getSouthWest(),l)&&this._northEast.equals(o.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Fe(o,l){return o instanceof Ae?o:new Ae(o,l)}function Ee(o,l,d){if(isNaN(o)||isNaN(l))throw new Error("Invalid LatLng object: ("+o+", "+l+")");this.lat=+o,this.lng=+l,d!==void 0&&(this.alt=+d)}Ee.prototype={equals:function(o,l){if(!o)return!1;o=_e(o);var d=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return d<=(l===void 0?1e-9:l)},toString:function(o){return"LatLng("+w(this.lat,o)+", "+w(this.lng,o)+")"},distanceTo:function(o){return mi.distance(this,_e(o))},wrap:function(){return mi.wrapLatLng(this)},toBounds:function(o){var l=180*o/40075017,d=l/Math.cos(Math.PI/180*this.lat);return Fe([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Ee(this.lat,this.lng,this.alt)}};function _e(o,l,d){return o instanceof Ee?o:N(o)&&typeof o[0]!="object"?o.length===3?new Ee(o[0],o[1],o[2]):o.length===2?new Ee(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new Ee(o.lat,"lng"in o?o.lng:o.lon,o.alt):l===void 0?null:new Ee(o,l,d)}var It={latLngToPoint:function(o,l){var d=this.projection.project(o),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(o,l){var d=this.scale(l),p=this.transformation.untransform(o,d);return this.projection.unproject(p)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(o),p=this.transformation.transform(l.min,d),v=this.transformation.transform(l.max,d);return new fe(p,v)},infinite:!1,wrapLatLng:function(o){var l=this.wrapLng?_(o.lng,this.wrapLng,!0):o.lng,d=this.wrapLat?_(o.lat,this.wrapLat,!0):o.lat,p=o.alt;return new Ee(d,l,p)},wrapLatLngBounds:function(o){var l=o.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,v=l.lng-d.lng;if(p===0&&v===0)return o;var T=o.getSouthWest(),M=o.getNorthEast(),B=new Ee(T.lat-p,T.lng-v),W=new Ee(M.lat-p,M.lng-v);return new Ae(B,W)}},mi=r({},It,{wrapLng:[-180,180],R:6371e3,distance:function(o,l){var d=Math.PI/180,p=o.lat*d,v=l.lat*d,T=Math.sin((l.lat-o.lat)*d/2),M=Math.sin((l.lng-o.lng)*d/2),B=T*T+Math.cos(p)*Math.cos(v)*M*M,W=2*Math.atan2(Math.sqrt(B),Math.sqrt(1-B));return this.R*W}}),jc=6378137,Tr={R:jc,MAX_LATITUDE:85.0511287798,project:function(o){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,o.lat),-d),v=Math.sin(p*l);return new q(this.R*o.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(o){var l=180/Math.PI;return new Ee((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*l,o.x*l/this.R)},bounds:function(){var o=jc*Math.PI;return new fe([-o,-o],[o,o])}()};function Ir(o,l,d,p){if(N(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=l,this._c=d,this._d=p}Ir.prototype={transform:function(o,l){return this._transform(o.clone(),l)},_transform:function(o,l){return l=l||1,o.x=l*(this._a*o.x+this._b),o.y=l*(this._c*o.y+this._d),o},untransform:function(o,l){return l=l||1,new q((o.x/l-this._b)/this._a,(o.y/l-this._d)/this._c)}};function Di(o,l,d,p){return new Ir(o,l,d,p)}var Ts=r({},mi,{code:"EPSG:3857",projection:Tr,transformation:function(){var o=.5/(Math.PI*Tr.R);return Di(o,.5,-o,.5)}()}),ul=r({},Ts,{code:"EPSG:900913"});function wo(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function cl(o,l){var d="",p,v,T,M,B,W;for(p=0,T=o.length;p<T;p++){for(B=o[p],v=0,M=B.length;v<M;v++)W=B[v],d+=(v?"L":"M")+W.x+" "+W.y;d+=l?se.svg?"z":"x":""}return d||"M0 0"}var hl=document.documentElement.style,Eo="ActiveXObject"in window,zc=Eo&&!document.addEventListener,To="msLaunchUri"in navigator&&!("documentMode"in document),Io=Fn("webkit"),Bc=Fn("android"),So=Fn("android 2")||Fn("android 3"),dl=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Wc=Bc&&Fn("Google")&&dl<537&&!("AudioNode"in window),mt=!!window.opera,Rt=!To&&Fn("chrome"),Is=Fn("gecko")&&!Io&&!mt&&!Eo,Hc=!Rt&&Fn("safari"),fl=Fn("phantom"),$c="OTransition"in hl,Ss=navigator.platform.indexOf("Win")===0,pl=Eo&&"transition"in hl,Co="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!So,xo="MozPerspective"in hl,Ip=!window.L_DISABLE_3D&&(pl||Co||xo)&&!$c&&!fl,Cs=typeof orientation<"u"||Fn("mobile"),ml=Cs&&Io,qc=Cs&&Co,_l=!window.PointerEvent&&window.MSPointerEvent,Sr=!!(window.PointerEvent||_l),Po="ontouchstart"in window||!!window.TouchEvent,gl=!window.L_NO_TOUCH&&(Po||Sr),Mi=Cs&&mt,Gc=Cs&&Is,Ao=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Kc=function(){var o=!1;try{var l=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return o}(),xs=function(){return!!document.createElement("canvas").getContext}(),Ro=!!(document.createElementNS&&wo("svg").createSVGRect),Vt=!!Ro&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Zc=!Ro&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var l=o.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Ps=navigator.platform.indexOf("Mac")===0,As=navigator.platform.indexOf("Linux")===0;function Fn(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var se={ie:Eo,ielt9:zc,edge:To,webkit:Io,android:Bc,android23:So,androidStock:Wc,opera:mt,chrome:Rt,gecko:Is,safari:Hc,phantom:fl,opera12:$c,win:Ss,ie3d:pl,webkit3d:Co,gecko3d:xo,any3d:Ip,mobile:Cs,mobileWebkit:ml,mobileWebkit3d:qc,msPointer:_l,pointer:Sr,touch:gl,touchNative:Po,mobileOpera:Mi,mobileGecko:Gc,retina:Ao,passiveEvents:Kc,canvas:xs,svg:Ro,vml:Zc,inlineSvg:Vt,mac:Ps,linux:As},Fi=se.msPointer?"MSPointerDown":"pointerdown",Qc=se.msPointer?"MSPointerMove":"pointermove",Yc=se.msPointer?"MSPointerUp":"pointerup",Rs=se.msPointer?"MSPointerCancel":"pointercancel",ko={touchstart:Fi,touchmove:Qc,touchend:Yc,touchcancel:Rs},bo={touchstart:Lo,touchmove:No,touchend:No,touchcancel:No},Yn={},Xn=!1;function Xc(o,l,d){return l==="touchstart"&&eh(),bo[l]?(d=bo[l].bind(this,d),o.addEventListener(ko[l],d,!1),d):(console.warn("wrong event specified:",l),g)}function Jc(o,l,d){if(!ko[l]){console.warn("wrong event specified:",l);return}o.removeEventListener(ko[l],d,!1)}function vl(o){Yn[o.pointerId]=o}function yl(o){Yn[o.pointerId]&&(Yn[o.pointerId]=o)}function wl(o){delete Yn[o.pointerId]}function eh(){Xn||(document.addEventListener(Fi,vl,!0),document.addEventListener(Qc,yl,!0),document.addEventListener(Yc,wl,!0),document.addEventListener(Rs,wl,!0),Xn=!0)}function No(o,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Yn)l.touches.push(Yn[d]);l.changedTouches=[l],o(l)}}function Lo(o,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&tt(l),No(o,l)}function th(o){var l={},d,p;for(p in o)d=o[p],l[p]=d&&d.bind?d.bind(o):d;return o=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var El=200;function ks(o,l){o.addEventListener("dblclick",l);var d=0,p;function v(T){if(T.detail!==1){p=T.detail;return}if(!(T.pointerType==="mouse"||T.sourceCapabilities&&!T.sourceCapabilities.firesTouchEvents)){var M=Ll(T);if(!(M.some(function(W){return W instanceof HTMLLabelElement&&W.attributes.for})&&!M.some(function(W){return W instanceof HTMLInputElement||W instanceof HTMLSelectElement}))){var B=Date.now();B-d<=El?(p++,p===2&&l(th(T))):p=1,d=B}}}return o.addEventListener("click",v),{dblclick:l,simDblclick:v}}function Vi(o,l){o.removeEventListener("dblclick",l.dblclick),o.removeEventListener("click",l.simDblclick)}var bs=ji(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ns=ji(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Tl=Ns==="webkitTransition"||Ns==="OTransition"?Ns+"End":"transitionend";function Il(o){return typeof o=="string"?document.getElementById(o):o}function Cr(o,l){var d=o.style[l]||o.currentStyle&&o.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(o,null);d=p?p[l]:null}return d==="auto"?null:d}function Re(o,l,d){var p=document.createElement(o);return p.className=l||"",d&&d.appendChild(p),p}function Be(o){var l=o.parentNode;l&&l.removeChild(o)}function Ls(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function Ui(o){var l=o.parentNode;l&&l.lastChild!==o&&l.appendChild(o)}function xr(o){var l=o.parentNode;l&&l.firstChild!==o&&l.insertBefore(o,l.firstChild)}function Sl(o,l){if(o.classList!==void 0)return o.classList.contains(l);var d=Vn(o);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function ye(o,l){if(o.classList!==void 0)for(var d=b(l),p=0,v=d.length;p<v;p++)o.classList.add(d[p]);else if(!Sl(o,l)){var T=Vn(o);Cl(o,(T?T+" ":"")+l)}}function Ye(o,l){o.classList!==void 0?o.classList.remove(l):Cl(o,C((" "+Vn(o)+" ").replace(" "+l+" "," ")))}function Cl(o,l){o.className.baseVal===void 0?o.className=l:o.className.baseVal=l}function Vn(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function at(o,l){"opacity"in o.style?o.style.opacity=l:"filter"in o.style&&Oo(o,l)}function Oo(o,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=o.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):o.style.filter+=" progid:"+p+"(opacity="+l+")"}function ji(o){for(var l=document.documentElement.style,d=0;d<o.length;d++)if(o[d]in l)return o[d];return!1}function _i(o,l,d){var p=l||new q(0,0);o.style[bs]=(se.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function pe(o,l){o._leaflet_pos=l,se.any3d?_i(o,l):(o.style.left=l.x+"px",o.style.top=l.y+"px")}function Un(o){return o._leaflet_pos||new q(0,0)}var Jn,ei,xl;if("onselectstart"in document)Jn=function(){le(window,"selectstart",tt)},ei=function(){je(window,"selectstart",tt)};else{var Pr=ji(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Jn=function(){if(Pr){var o=document.documentElement.style;xl=o[Pr],o[Pr]="none"}},ei=function(){Pr&&(document.documentElement.style[Pr]=xl,xl=void 0)}}function Pl(){le(window,"dragstart",tt)}function Al(){je(window,"dragstart",tt)}var Do,Rl;function zi(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(In(),Do=o,Rl=o.style.outlineStyle,o.style.outlineStyle="none",le(window,"keydown",In))}function In(){Do&&(Do.style.outlineStyle=Rl,Do=void 0,Rl=void 0,je(window,"keydown",In))}function kl(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function Mo(o){var l=o.getBoundingClientRect();return{x:l.width/o.offsetWidth||1,y:l.height/o.offsetHeight||1,boundingClientRect:l}}var nh={__proto__:null,TRANSFORM:bs,TRANSITION:Ns,TRANSITION_END:Tl,get:Il,getStyle:Cr,create:Re,remove:Be,empty:Ls,toFront:Ui,toBack:xr,hasClass:Sl,addClass:ye,removeClass:Ye,setClass:Cl,getClass:Vn,setOpacity:at,testProp:ji,setTransform:_i,setPosition:pe,getPosition:Un,get disableTextSelection(){return Jn},get enableTextSelection(){return ei},disableImageDrag:Pl,enableImageDrag:Al,preventOutline:zi,restoreOutline:In,getSizedParentNode:kl,getScale:Mo};function le(o,l,d,p){if(l&&typeof l=="object")for(var v in l)bl(o,v,l[v],d);else{l=b(l);for(var T=0,M=l.length;T<M;T++)bl(o,l[T],d,p)}return this}var jn="_leaflet_events";function je(o,l,d,p){if(arguments.length===1)ih(o),delete o[jn];else if(l&&typeof l=="object")for(var v in l)Nl(o,v,l[v],d);else if(l=b(l),arguments.length===2)ih(o,function(B){return j(l,B)!==-1});else for(var T=0,M=l.length;T<M;T++)Nl(o,l[T],d,p);return this}function ih(o,l){for(var d in o[jn]){var p=d.split(/\d/)[0];(!l||l(p))&&Nl(o,p,null,null,d)}}var zn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function bl(o,l,d,p){var v=l+h(d)+(p?"_"+h(p):"");if(o[jn]&&o[jn][v])return this;var T=function(B){return d.call(p||o,B||window.event)},M=T;!se.touchNative&&se.pointer&&l.indexOf("touch")===0?T=Xc(o,l,T):se.touch&&l==="dblclick"?T=ks(o,T):"addEventListener"in o?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?o.addEventListener(zn[l]||l,T,se.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(T=function(B){B=B||window.event,Ol(o,B)&&M(B)},o.addEventListener(zn[l],T,!1)):o.addEventListener(l,M,!1):o.attachEvent("on"+l,T),o[jn]=o[jn]||{},o[jn][v]=T}function Nl(o,l,d,p,v){v=v||l+h(d)+(p?"_"+h(p):"");var T=o[jn]&&o[jn][v];if(!T)return this;!se.touchNative&&se.pointer&&l.indexOf("touch")===0?Jc(o,l,T):se.touch&&l==="dblclick"?Vi(o,T):"removeEventListener"in o?o.removeEventListener(zn[l]||l,T,!1):o.detachEvent("on"+l,T),o[jn][v]=null}function Sn(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function Ar(o){return bl(o,"wheel",Sn),this}function Rr(o){return le(o,"mousedown touchstart dblclick contextmenu",Sn),o._leaflet_disable_click=!0,this}function tt(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function Cn(o){return tt(o),Sn(o),this}function Ll(o){if(o.composedPath)return o.composedPath();for(var l=[],d=o.target;d;)l.push(d),d=d.parentNode;return l}function Fo(o,l){if(!l)return new q(o.clientX,o.clientY);var d=Mo(l),p=d.boundingClientRect;return new q((o.clientX-p.left)/d.x-l.clientLeft,(o.clientY-p.top)/d.y-l.clientTop)}var Xe=se.linux&&se.chrome?window.devicePixelRatio:se.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function rh(o){return se.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/Xe:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function Ol(o,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==o;)d=d.parentNode}catch{return!1}return d!==o}var sh={__proto__:null,on:le,off:je,stopPropagation:Sn,disableScrollPropagation:Ar,disableClickPropagation:Rr,preventDefault:tt,stop:Cn,getPropagationPath:Ll,getMousePosition:Fo,getWheelDelta:rh,isExternalTarget:Ol,addListener:le,removeListener:je},Dl=tn.extend({run:function(o,l,d,p){this.stop(),this._el=o,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Un(o),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(o){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),o):(this._runFrame(1),this._complete())},_runFrame:function(o,l){var d=this._startPos.add(this._offset.multiplyBy(o));l&&d._round(),pe(this._el,d),this.fire("step")},_complete:function(){U(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),Ce=tn.extend({options:{crs:Ts,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,l){l=k(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(_e(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ns&&se.any3d&&!se.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),le(this._proxy,Tl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),o=this._limitCenter(_e(o),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,l,d.zoom):this._tryAnimatedPan(o,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(o,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(o,l){return this._loaded?this.setView(this.getCenter(),o,{zoom:l}):(this._zoom=o,this)},zoomIn:function(o,l){return o=o||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,l)},zoomOut:function(o,l){return o=o||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,l)},setZoomAround:function(o,l,d){var p=this.getZoomScale(l),v=this.getSize().divideBy(2),T=o instanceof q?o:this.latLngToContainerPoint(o),M=T.subtract(v).multiplyBy(1-1/p),B=this.containerPointToLatLng(v.add(M));return this.setView(B,l,{zoom:d})},_getBoundsCenterZoom:function(o,l){l=l||{},o=o.getBounds?o.getBounds():Fe(o);var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(o,!1,d.add(p));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:o.getCenter(),zoom:v};var T=p.subtract(d).divideBy(2),M=this.project(o.getSouthWest(),v),B=this.project(o.getNorthEast(),v),W=this.unproject(M.add(B).divideBy(2).add(T),v);return{center:W,zoom:v}},fitBounds:function(o,l){if(o=Fe(o),!o.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(o,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,l){return this.setView(o,this._zoom,{pan:l})},panBy:function(o,l){if(o=J(o).round(),l=l||{},!o.x&&!o.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Dl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){ye(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,l,d){if(d=d||{},d.animate===!1||!se.any3d)return this.setView(o,l,d);this._stop();var p=this.project(this.getCenter()),v=this.project(o),T=this.getSize(),M=this._zoom;o=_e(o),l=l===void 0?M:l;var B=Math.max(T.x,T.y),W=B*this.getZoomScale(M,l),K=v.distanceTo(p)||1,ne=1.42,ue=ne*ne;function Te(gt){var Eh=gt?-1:1,wA=gt?W:B,EA=W*W-B*B+Eh*ue*ue*K*K,TA=2*wA*ue*K,kp=EA/TA,nw=Math.sqrt(kp*kp+1)-kp,IA=nw<1e-9?-18:Math.log(nw);return IA}function rn(gt){return(Math.exp(gt)-Math.exp(-gt))/2}function bt(gt){return(Math.exp(gt)+Math.exp(-gt))/2}function Wn(gt){return rn(gt)/bt(gt)}var hn=Te(0);function Qo(gt){return B*(bt(hn)/bt(hn+ne*gt))}function _A(gt){return B*(bt(hn)*Wn(hn+ne*gt)-rn(hn))/ue}function gA(gt){return 1-Math.pow(1-gt,1.5)}var vA=Date.now(),ew=(Te(1)-hn)/ne,yA=d.duration?1e3*d.duration:1e3*ew*.8;function tw(){var gt=(Date.now()-vA)/yA,Eh=gA(gt)*ew;gt<=1?(this._flyToFrame=V(tw,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(_A(Eh)/K)),M),this.getScaleZoom(B/Qo(Eh),M),{flyTo:!0})):this._move(o,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),tw.call(this),this},flyToBounds:function(o,l){var d=this._getBoundsCenterZoom(o,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(o){return o=Fe(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var l=this.options.minZoom;return this.options.minZoom=o,this._loaded&&l!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var l=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&l!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,Fe(o));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(o,l){l=l||{};var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),T=this.project(o),M=this.getPixelBounds(),B=we([M.min.add(d),M.max.subtract(p)]),W=B.getSize();if(!B.contains(T)){this._enforcingBounds=!0;var K=T.subtract(B.getCenter()),ne=B.extend(T).getSize().subtract(W);v.x+=K.x<0?-ne.x:ne.x,v.y+=K.y<0?-ne.y:ne.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=r({animate:!1,pan:!0},o===!0?{animate:!0}:o);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),v=d.divideBy(2).round(),T=p.subtract(v);return!T.x&&!T.y?this:(o.animate&&o.pan?this.panBy(T):(o.pan&&this._rawPanBy(T),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=r({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,o):navigator.geolocation.getCurrentPosition(l,d,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var l=o.code,d=o.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var l=o.coords.latitude,d=o.coords.longitude,p=new Ee(l,d),v=p.toBounds(o.coords.accuracy*2),T=this._locateOptions;if(T.setView){var M=this.getBoundsZoom(v);this.setView(p,T.maxZoom?Math.min(M,T.maxZoom):M)}var B={latlng:p,bounds:v,timestamp:o.timestamp};for(var W in o.coords)typeof o.coords[W]=="number"&&(B[W]=o.coords[W]);this.fire("locationfound",B)}},addHandler:function(o,l){if(!l)return this;var d=this[o]=new l(this);return this._handlers.push(d),this.options[o]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Be(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(U(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)Be(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,l){var d="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),p=Re("div",d,l||this._mapPane);return o&&(this._panes[o]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),l=this.unproject(o.getBottomLeft()),d=this.unproject(o.getTopRight());return new Ae(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,l,d){o=Fe(o),d=J(d||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),T=this.getMaxZoom(),M=o.getNorthWest(),B=o.getSouthEast(),W=this.getSize().subtract(d),K=we(this.project(B,p),this.project(M,p)).getSize(),ne=se.any3d?this.options.zoomSnap:1,ue=W.x/K.x,Te=W.y/K.y,rn=l?Math.max(ue,Te):Math.min(ue,Te);return p=this.getScaleZoom(rn,p),ne&&(p=Math.round(p/(ne/100))*(ne/100),p=l?Math.ceil(p/ne)*ne:Math.floor(p/ne)*ne),Math.max(v,Math.min(T,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,l){var d=this._getTopLeftPoint(o,l);return new fe(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(o)/d.scale(l)},getScaleZoom:function(o,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(o*d.scale(l));return isNaN(p)?1/0:p},project:function(o,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(_e(o),l)},unproject:function(o,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(J(o),l)},layerPointToLatLng:function(o){var l=J(o).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(o){var l=this.project(_e(o))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(_e(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(Fe(o))},distance:function(o,l){return this.options.crs.distance(_e(o),_e(l))},containerPointToLayerPoint:function(o){return J(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return J(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var l=this.containerPointToLayerPoint(J(o));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(_e(o)))},mouseEventToContainerPoint:function(o){return Fo(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var l=this._container=Il(o);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");le(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&se.any3d,ye(o,"leaflet-container"+(se.touch?" leaflet-touch":"")+(se.retina?" leaflet-retina":"")+(se.ielt9?" leaflet-oldie":"")+(se.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Cr(o,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),pe(this._mapPane,new q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ye(o.markerPane,"leaflet-zoom-hide"),ye(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,l,d){pe(this._mapPane,new q(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,d)._move(o,l)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(o,l){return o&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(o,l,d,p){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),p?d&&d.pinch&&this.fire("zoom",d):((v||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return U(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){pe(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[h(this._container)]=this;var l=o?je:le;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),se.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){U(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,l){for(var d=[],p,v=l==="mouseout"||l==="mouseover",T=o.target||o.srcElement,M=!1;T;){if(p=this._targets[h(T)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){M=!0;break}if(p&&p.listens(l,!0)&&(v&&!Ol(T,o)||(d.push(p),v))||T===this._container)break;T=T.parentNode}return!d.length&&!M&&!v&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var l=o.target||o.srcElement;if(!(!this._loaded||l._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(l))){var d=o.type;d==="mousedown"&&zi(l),this._fireDOMEvent(o,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,l,d){if(o.type==="click"){var p=r({},o);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var v=this._findEventTargets(o,l);if(d){for(var T=[],M=0;M<d.length;M++)d[M].listens(l,!0)&&T.push(d[M]);v=T.concat(v)}if(v.length){l==="contextmenu"&&tt(o);var B=v[0],W={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var K=B.getLatLng&&(!B._radius||B._radius<=10);W.containerPoint=K?this.latLngToContainerPoint(B.getLatLng()):this.mouseEventToContainerPoint(o),W.layerPoint=this.containerPointToLayerPoint(W.containerPoint),W.latlng=K?B.getLatLng():this.layerPointToLatLng(W.layerPoint)}for(M=0;M<v.length;M++)if(v[M].fire(l,W,!0),W.originalEvent._stopped||v[M].options.bubblingMouseEvents===!1&&j(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,l=this._handlers.length;o<l;o++)this._handlers[o].disable()},whenReady:function(o,l){return this._loaded?o.call(l||this,{target:this}):this.on("load",o,l),this},_getMapPanePos:function(){return Un(this._mapPane)||new q(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,l){var d=o&&l!==void 0?this._getNewPixelOrigin(o,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,l){var d=this.getSize()._divideBy(2);return this.project(o,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(o,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(o,l,d){var p=this._getNewPixelOrigin(d,l);return we([this.project(o.getSouthWest(),l)._subtract(p),this.project(o.getNorthWest(),l)._subtract(p),this.project(o.getSouthEast(),l)._subtract(p),this.project(o.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,l,d){if(!d)return o;var p=this.project(o,l),v=this.getSize().divideBy(2),T=new fe(p.subtract(v),p.add(v)),M=this._getBoundsOffset(T,d,l);return Math.abs(M.x)<=1&&Math.abs(M.y)<=1?o:this.unproject(p.add(M),l)},_limitOffset:function(o,l){if(!l)return o;var d=this.getPixelBounds(),p=new fe(d.min.add(o),d.max.add(o));return o.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(o,l,d){var p=we(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),v=p.min.subtract(o.min),T=p.max.subtract(o.max),M=this._rebound(v.x,-T.x),B=this._rebound(v.y,-T.y);return new q(M,B)},_rebound:function(o,l){return o+l>0?Math.round(o-l)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(l))},_limitZoom:function(o){var l=this.getMinZoom(),d=this.getMaxZoom(),p=se.any3d?this.options.zoomSnap:1;return p&&(o=Math.round(o/p)*p),Math.max(l,Math.min(d,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ye(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,l){var d=this._getCenterOffset(o)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var o=this._proxy=Re("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(l){var d=bs,p=this._proxy.style[d];_i(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Be(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),l=this.getZoom();_i(this._proxy,this.project(o,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),v=this._getCenterOffset(o)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(v)?!1:(V(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(o,l,!0)},this),!0)},_animateZoom:function(o,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=l,ye(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ye(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Vo(o,l){return new Ce(o,l)}var cn=ot.extend({options:{position:"topright"},initialize:function(o){k(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var l=this._map;return l&&l.removeControl(this),this.options.position=o,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var l=this._container=this.onAdd(o),d=this.getPosition(),p=o._controlCorners[d];return ye(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Be(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),nn=function(o){return new cn(o)};Ce.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},l="leaflet-",d=this._controlContainer=Re("div",l+"control-container",this._container);function p(v,T){var M=l+v+" "+l+T;o[v+T]=Re("div",M,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)Be(this._controlCorners[o]);Be(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ml=cn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(o,l,d){k(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in o)this._addLayer(o[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return cn.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,l){return this._addLayer(o,l),this._map?this._update():this},addOverlay:function(o,l){return this._addLayer(o,l,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(o));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){ye(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(ye(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):Ye(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ye(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",l=this._container=Re("div",o),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Rr(l),Ar(l);var p=this._section=Re("section",o+"-list");d&&(this._map.on("click",this.collapse,this),le(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=Re("a",o+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),le(v,{keydown:function(T){T.keyCode===13&&this._expandSafely()},click:function(T){tt(T),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Re("div",o+"-base",p),this._separator=Re("div",o+"-separator",p),this._overlaysList=Re("div",o+"-overlays",p),l.appendChild(p)},_getLayer:function(o){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===o)return this._layers[l]},_addLayer:function(o,l,d){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ls(this._baseLayersList),Ls(this._overlaysList),this._layerControlInputs=[];var o,l,d,p,v=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,o=o||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(o=o&&v>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=l&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var l=this._getLayer(h(o.target)),d=l.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(o,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(o){var l=document.createElement("label"),d=this._map.hasLayer(o.layer),p;o.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+h(this),d),this._layerControlInputs.push(p),p.layerId=h(o.layer),le(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+o.name;var T=document.createElement("span");l.appendChild(T),T.appendChild(p),T.appendChild(v);var M=o.overlay?this._overlaysList:this._baseLayersList;return M.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,l,d,p=[],v=[];this._handlingClick=!0;for(var T=o.length-1;T>=0;T--)l=o[T],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||v.push(d);for(T=0;T<v.length;T++)this._map.hasLayer(v[T])&&this._map.removeLayer(v[T]);for(T=0;T<p.length;T++)this._map.hasLayer(p[T])||this._map.addLayer(p[T]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,l,d,p=this._map.getZoom(),v=o.length-1;v>=0;v--)l=o[v],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,le(o,"click",tt),this.expand();var l=this;setTimeout(function(){je(o,"click",tt),l._preventClick=!1})}}),Sp=function(o,l,d){return new Ml(o,l,d)},Bi=cn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var l="leaflet-control-zoom",d=Re("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,l,d,p,v){var T=Re("a",d,p);return T.innerHTML=o,T.href="#",T.title=l,T.setAttribute("role","button"),T.setAttribute("aria-label",l),Rr(T),le(T,"click",Cn),le(T,"click",v,this),le(T,"click",this._refocusOnMap,this),T},_updateDisabled:function(){var o=this._map,l="leaflet-disabled";Ye(this._zoomInButton,l),Ye(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(ye(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(ye(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ce.mergeOptions({zoomControl:!0}),Ce.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Bi,this.addControl(this.zoomControl))});var oh=function(o){return new Bi(o)},Uo=cn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var l="leaflet-control-scale",d=Re("div",l),p=this.options;return this._addScales(p,l+"-line",d),o.on(p.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),d},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,l,d){o.metric&&(this._mScale=Re("div",l,d)),o.imperial&&(this._iScale=Re("div",l,d))},_update:function(){var o=this._map,l=o.getSize().y/2,d=o.distance(o.containerPointToLatLng([0,l]),o.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var l=this._getRoundNum(o),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/o)},_updateImperial:function(o){var l=o*3.2808399,d,p,v;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(o,l,d){o.style.width=Math.round(this.options.maxWidth*d)+"px",o.innerHTML=l},_getRoundNum:function(o){var l=Math.pow(10,(Math.floor(o)+"").length-1),d=o/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),jo=function(o){return new Uo(o)},ah='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',kr=cn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(se.inlineSvg?ah+" ":"")+"Leaflet</a>"},initialize:function(o){k(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=Re("div","leaflet-control-attribution"),Rr(this._container);for(var l in o._layers)o._layers[l].getAttribution&&this.addAttribution(o._layers[l].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var l in this._attributions)this._attributions[l]&&o.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),o.length&&d.push(o.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Ce.mergeOptions({attributionControl:!0}),Ce.addInitHook(function(){this.options.attributionControl&&new kr().addTo(this)});var Cp=function(o){return new kr(o)};cn.Layers=Ml,cn.Zoom=Bi,cn.Scale=Uo,cn.Attribution=kr,nn.layers=Sp,nn.zoom=oh,nn.scale=jo,nn.attribution=Cp;var xn=ot.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});xn.addTo=function(o,l){return o.addHandler(l,this),this};var Os={Events:Tt},Fl=se.touch?"touchstart mousedown":"mousedown",ti=tn.extend({options:{clickTolerance:3},initialize:function(o,l,d,p){k(this,p),this._element=o,this._dragStartTarget=l||o,this._preventOutline=d},enable:function(){this._enabled||(le(this._dragStartTarget,Fl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ti._dragging===this&&this.finishDrag(!0),je(this._dragStartTarget,Fl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Sl(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){ti._dragging===this&&this.finishDrag();return}if(!(ti._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(ti._dragging=this,this._preventOutline&&zi(this._element),Pl(),Jn(),!this._moving)){this.fire("down");var l=o.touches?o.touches[0]:o,d=kl(this._element);this._startPoint=new q(l.clientX,l.clientY),this._startPos=Un(this._element),this._parentScale=Mo(d);var p=o.type==="mousedown";le(document,p?"mousemove":"touchmove",this._onMove,this),le(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var l=o.touches&&o.touches.length===1?o.touches[0]:o,d=new q(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,tt(o),this._moved||(this.fire("dragstart"),this._moved=!0,ye(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ye(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),pe(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){Ye(document.body,"leaflet-dragging"),this._lastTarget&&(Ye(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),je(document,"mousemove touchmove",this._onMove,this),je(document,"mouseup touchend touchcancel",this._onUp,this),Al(),ei();var l=this._moved&&this._moving;this._moving=!1,ti._dragging=!1,l&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function zo(o,l,d){var p,v=[1,4,2,8],T,M,B,W,K,ne,ue,Te;for(T=0,ne=o.length;T<ne;T++)o[T]._code=gi(o[T],l);for(B=0;B<4;B++){for(ue=v[B],p=[],T=0,ne=o.length,M=ne-1;T<ne;M=T++)W=o[T],K=o[M],W._code&ue?K._code&ue||(Te=kt(K,W,ue,l,d),Te._code=gi(Te,l),p.push(Te)):(K._code&ue&&(Te=kt(K,W,ue,l,d),Te._code=gi(Te,l),p.push(Te)),p.push(W));o=p}return o}function Bo(o,l){var d,p,v,T,M,B,W,K,ne;if(!o||o.length===0)throw new Error("latlngs not passed");c(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var ue=_e([0,0]),Te=Fe(o),rn=Te.getNorthWest().distanceTo(Te.getSouthWest())*Te.getNorthEast().distanceTo(Te.getNorthWest());rn<1700&&(ue=Wo(o));var bt=o.length,Wn=[];for(d=0;d<bt;d++){var hn=_e(o[d]);Wn.push(l.project(_e([hn.lat-ue.lat,hn.lng-ue.lng])))}for(B=W=K=0,d=0,p=bt-1;d<bt;p=d++)v=Wn[d],T=Wn[p],M=v.y*T.x-T.y*v.x,W+=(v.x+T.x)*M,K+=(v.y+T.y)*M,B+=M*3;B===0?ne=Wn[0]:ne=[W/B,K/B];var Qo=l.unproject(J(ne));return _e([Qo.lat+ue.lat,Qo.lng+ue.lng])}function Wo(o){for(var l=0,d=0,p=0,v=0;v<o.length;v++){var T=_e(o[v]);l+=T.lat,d+=T.lng,p++}return _e([l/p,d/p])}var Ho={__proto__:null,clipPolygon:zo,polygonCenter:Bo,centroid:Wo};function Vl(o,l){if(!l||!o.length)return o.slice();var d=l*l;return o=uh(o,d),o=lh(o,d),o}function Ul(o,l,d){return Math.sqrt(Bn(o,l,d,!0))}function Wi(o,l,d){return Bn(o,l,d)}function lh(o,l){var d=o.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(d);v[0]=v[d-1]=1,$o(o,v,l,0,d-1);var T,M=[];for(T=0;T<d;T++)v[T]&&M.push(o[T]);return M}function $o(o,l,d,p,v){var T=0,M,B,W;for(B=p+1;B<=v-1;B++)W=Bn(o[B],o[p],o[v],!0),W>T&&(M=B,T=W);T>d&&(l[M]=1,$o(o,l,d,p,M),$o(o,l,d,M,v))}function uh(o,l){for(var d=[o[0]],p=1,v=0,T=o.length;p<T;p++)ch(o[p],o[v])>l&&(d.push(o[p]),v=p);return v<T-1&&d.push(o[T-1]),d}var jl;function Ds(o,l,d,p,v){var T=p?jl:gi(o,d),M=gi(l,d),B,W,K;for(jl=M;;){if(!(T|M))return[o,l];if(T&M)return!1;B=T||M,W=kt(o,l,B,d,v),K=gi(W,d),B===T?(o=W,T=K):(l=W,M=K)}}function kt(o,l,d,p,v){var T=l.x-o.x,M=l.y-o.y,B=p.min,W=p.max,K,ne;return d&8?(K=o.x+T*(W.y-o.y)/M,ne=W.y):d&4?(K=o.x+T*(B.y-o.y)/M,ne=B.y):d&2?(K=W.x,ne=o.y+M*(W.x-o.x)/T):d&1&&(K=B.x,ne=o.y+M*(B.x-o.x)/T),new q(K,ne,v)}function gi(o,l){var d=0;return o.x<l.min.x?d|=1:o.x>l.max.x&&(d|=2),o.y<l.min.y?d|=4:o.y>l.max.y&&(d|=8),d}function ch(o,l){var d=l.x-o.x,p=l.y-o.y;return d*d+p*p}function Bn(o,l,d,p){var v=l.x,T=l.y,M=d.x-v,B=d.y-T,W=M*M+B*B,K;return W>0&&(K=((o.x-v)*M+(o.y-T)*B)/W,K>1?(v=d.x,T=d.y):K>0&&(v+=M*K,T+=B*K)),M=o.x-v,B=o.y-T,p?M*M+B*B:new q(v,T)}function c(o){return!N(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function m(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),c(o)}function y(o,l){var d,p,v,T,M,B,W,K;if(!o||o.length===0)throw new Error("latlngs not passed");c(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var ne=_e([0,0]),ue=Fe(o),Te=ue.getNorthWest().distanceTo(ue.getSouthWest())*ue.getNorthEast().distanceTo(ue.getNorthWest());Te<1700&&(ne=Wo(o));var rn=o.length,bt=[];for(d=0;d<rn;d++){var Wn=_e(o[d]);bt.push(l.project(_e([Wn.lat-ne.lat,Wn.lng-ne.lng])))}for(d=0,p=0;d<rn-1;d++)p+=bt[d].distanceTo(bt[d+1])/2;if(p===0)K=bt[0];else for(d=0,T=0;d<rn-1;d++)if(M=bt[d],B=bt[d+1],v=M.distanceTo(B),T+=v,T>p){W=(T-p)/v,K=[B.x-W*(B.x-M.x),B.y-W*(B.y-M.y)];break}var hn=l.unproject(J(K));return _e([hn.lat+ne.lat,hn.lng+ne.lng])}var S={__proto__:null,simplify:Vl,pointToSegmentDistance:Ul,closestPointOnSegment:Wi,clipSegment:Ds,_getEdgeIntersection:kt,_getBitCode:gi,_sqClosestPointOnSegment:Bn,isFlat:c,_flat:m,polylineCenter:y},z={project:function(o){return new q(o.lng,o.lat)},unproject:function(o){return new Ee(o.y,o.x)},bounds:new fe([-180,-90],[180,90])},H={R:6378137,R_MINOR:6356752314245179e-9,bounds:new fe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var l=Math.PI/180,d=this.R,p=o.lat*l,v=this.R_MINOR/d,T=Math.sqrt(1-v*v),M=T*Math.sin(p),B=Math.tan(Math.PI/4-p/2)/Math.pow((1-M)/(1+M),T/2);return p=-d*Math.log(Math.max(B,1e-10)),new q(o.lng*l*d,p)},unproject:function(o){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,v=Math.sqrt(1-p*p),T=Math.exp(-o.y/d),M=Math.PI/2-2*Math.atan(T),B=0,W=.1,K;B<15&&Math.abs(W)>1e-7;B++)K=v*Math.sin(M),K=Math.pow((1-K)/(1+K),v/2),W=Math.PI/2-2*Math.atan(T*K)-M,M+=W;return new Ee(M*l,o.x*l/d)}},te={__proto__:null,LonLat:z,Mercator:H,SphericalMercator:Tr},Ve=r({},mi,{code:"EPSG:3395",projection:H,transformation:function(){var o=.5/(Math.PI*H.R);return Di(o,.5,-o,.5)}()}),_t=r({},mi,{code:"EPSG:4326",projection:z,transformation:Di(1/180,1,-1/180,.5)}),Ne=r({},It,{projection:z,transformation:Di(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,l){var d=l.lng-o.lng,p=l.lat-o.lat;return Math.sqrt(d*d+p*p)},infinite:!0});It.Earth=mi,It.EPSG3395=Ve,It.EPSG3857=Ts,It.EPSG900913=ul,It.EPSG4326=_t,It.Simple=Ne;var ze=tn.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[h(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[h(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var l=o.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Ce.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(o);return this._layers[l]?this:(this._layers[l]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var l=h(o);return this._layers[l]?(this._loaded&&o.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return h(o)in this._layers},eachLayer:function(o,l){for(var d in this._layers)o.call(l,this._layers[d]);return this},_addLayers:function(o){o=o?N(o)?o:[o]:[];for(var l=0,d=o.length;l<d;l++)this.addLayer(o[l])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[h(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var l=h(o);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;o=v.minZoom===void 0?o:Math.min(o,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=o===1/0?void 0:o,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var nt=ze.extend({initialize:function(o,l){k(this,l),this._layers={};var d,p;if(o)for(d=0,p=o.length;d<p;d++)this.addLayer(o[d])},addLayer:function(o){var l=this.getLayerId(o);return this._layers[l]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var l=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(o){var l=typeof o=="number"?o:this.getLayerId(o);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[o]&&p[o].apply(p,l);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,l){for(var d in this._layers)o.call(l,this._layers[d]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return h(o)}}),br=function(o,l){return new nt(o,l)},dt=nt.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),nt.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),nt.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new Ae;for(var l in this._layers){var d=this._layers[l];o.extend(d.getBounds?d.getBounds():d.getLatLng())}return o}}),qo=function(o,l){return new dt(o,l)},vi=ot.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){k(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,l){var d=this._getIconUrl(o);if(!d){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(o,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var v=J(p),T=J(l==="shadow"&&d.shadowAnchor||d.iconAnchor||v&&v.divideBy(2,!0));o.className="leaflet-marker-"+l+" "+(d.className||""),T&&(o.style.marginLeft=-T.x+"px",o.style.marginTop=-T.y+"px"),v&&(o.style.width=v.x+"px",o.style.height=v.y+"px")},_createImg:function(o,l){return l=l||document.createElement("img"),l.src=o,l},_getIconUrl:function(o){return se.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function Y1(o){return new vi(o)}var zl=vi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof zl.imagePath!="string"&&(zl.imagePath=this._detectIconPath()),(this.options.imagePath||zl.imagePath)+vi.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var l=function(d,p,v){var T=p.exec(d);return T&&T[v]};return o=l(o,/^url\((['"])?(.+)\1\)$/,2),o&&l(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=Re("div","leaflet-default-icon-path",document.body),l=Cr(o,"background-image")||Cr(o,"backgroundImage");if(document.body.removeChild(o),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),Dy=xn.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new ti(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ye(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ye(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,T=Un(l._icon),M=d.getPixelBounds(),B=d.getPixelOrigin(),W=we(M.min._subtract(B).add(v),M.max._subtract(B).subtract(v));if(!W.contains(T)){var K=J((Math.max(W.max.x,T.x)-W.max.x)/(M.max.x-W.max.x)-(Math.min(W.min.x,T.x)-W.min.x)/(M.min.x-W.min.x),(Math.max(W.max.y,T.y)-W.max.y)/(M.max.y-W.max.y)-(Math.min(W.min.y,T.y)-W.min.y)/(M.min.y-W.min.y)).multiplyBy(p);d.panBy(K,{animate:!1}),this._draggable._newPos._add(K),this._draggable._startPos._add(K),pe(l._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=V(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(U(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,o)))},_onDrag:function(o){var l=this._marker,d=l._shadow,p=Un(l._icon),v=l._map.layerPointToLatLng(p);d&&pe(d,p),l._latlng=v,o.latlng=v,o.oldLatLng=this._oldLatLng,l.fire("move",o).fire("drag",o)},_onDragEnd:function(o){U(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),hh=ze.extend({options:{icon:new zl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,l){k(this,l),this._latlng=_e(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var l=this._latlng;return this._latlng=_e(o),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=o.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,o.title&&(d.title=o.title),d.tagName==="IMG"&&(d.alt=o.alt||"")),ye(d,l),o.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&le(d,"focus",this._panOnFocus,this);var v=o.icon.createShadow(this._shadow),T=!1;v!==this._shadow&&(this._removeShadow(),T=!0),v&&(ye(v,l),v.alt=""),this._shadow=v,o.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&T&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&je(this._icon,"focus",this._panOnFocus,this),Be(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Be(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&pe(this._icon,o),this._shadow&&pe(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(ye(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Dy)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Dy(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&at(this._icon,o),this._shadow&&at(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var l=this.options.icon.options,d=l.iconSize?J(l.iconSize):J(0,0),p=l.iconAnchor?J(l.iconAnchor):J(0,0);o.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function X1(o,l){return new hh(o,l)}var Nr=ze.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return k(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),dh=Nr.extend({options:{fill:!0,radius:10},initialize:function(o,l){k(this,l),this._latlng=_e(o),this._radius=this.options.radius},setLatLng:function(o){var l=this._latlng;return this._latlng=_e(o),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var l=o&&o.radius||this._radius;return Nr.prototype.setStyle.call(this,o),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,l=this._radiusY||o,d=this._clickTolerance(),p=[o+d,l+d];this._pxBounds=new fe(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function J1(o,l){return new dh(o,l)}var xp=dh.extend({initialize:function(o,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),k(this,l),this._latlng=_e(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new Ae(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:Nr.prototype.setStyle,_project:function(){var o=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===mi.distance){var v=Math.PI/180,T=this._mRadius/mi.R/v,M=d.project([l+T,o]),B=d.project([l-T,o]),W=M.add(B).divideBy(2),K=d.unproject(W).lat,ne=Math.acos((Math.cos(T*v)-Math.sin(l*v)*Math.sin(K*v))/(Math.cos(l*v)*Math.cos(K*v)))/v;(isNaN(ne)||ne===0)&&(ne=T/Math.cos(Math.PI/180*l)),this._point=W.subtract(d.getPixelOrigin()),this._radius=isNaN(ne)?0:W.x-d.project([K,o-ne]).x,this._radiusY=W.y-M.y}else{var ue=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(ue).x}this._updateBounds()}});function eA(o,l,d){return new xp(o,l,d)}var Hi=Nr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,l){k(this,l),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var l=1/0,d=null,p=Bn,v,T,M=0,B=this._parts.length;M<B;M++)for(var W=this._parts[M],K=1,ne=W.length;K<ne;K++){v=W[K-1],T=W[K];var ue=p(o,v,T,!0);ue<l&&(l=ue,d=p(o,v,T))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return y(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,l){return l=l||this._defaultShape(),o=_e(o),l.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new Ae,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return c(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var l=[],d=c(o),p=0,v=o.length;p<v;p++)d?(l[p]=_e(o[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(o[p]);return l},_project:function(){var o=new fe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),l=new q(o,o);this._rawPxBounds&&(this._pxBounds=new fe([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(o,l,d){var p=o[0]instanceof Ee,v=o.length,T,M;if(p){for(M=[],T=0;T<v;T++)M[T]=this._map.latLngToLayerPoint(o[T]),d.extend(M[T]);l.push(M)}else for(T=0;T<v;T++)this._projectLatlngs(o[T],l,d)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,v,T,M,B,W;for(d=0,v=0,T=this._rings.length;d<T;d++)for(W=this._rings[d],p=0,M=W.length;p<M-1;p++)B=Ds(W[p],W[p+1],o,p,!0),B&&(l[v]=l[v]||[],l[v].push(B[0]),(B[1]!==W[p+1]||p===M-2)&&(l[v].push(B[1]),v++))}},_simplifyPoints:function(){for(var o=this._parts,l=this.options.smoothFactor,d=0,p=o.length;d<p;d++)o[d]=Vl(o[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,l){var d,p,v,T,M,B,W=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(d=0,T=this._parts.length;d<T;d++)for(B=this._parts[d],p=0,M=B.length,v=M-1;p<M;v=p++)if(!(!l&&p===0)&&Ul(o,B[v],B[p])<=W)return!0;return!1}});function tA(o,l){return new Hi(o,l)}Hi._flat=m;var Go=Hi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Bo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var l=Hi.prototype._convertLatLngs.call(this,o),d=l.length;return d>=2&&l[0]instanceof Ee&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(o){Hi.prototype._setLatLngs.call(this,o),c(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return c(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,l=this.options.weight,d=new q(l,l);if(o=new fe(o.min.subtract(d),o.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,T;p<v;p++)T=zo(this._rings[p],o,!0),T.length&&this._parts.push(T)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var l=!1,d,p,v,T,M,B,W,K;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(T=0,W=this._parts.length;T<W;T++)for(d=this._parts[T],M=0,K=d.length,B=K-1;M<K;B=M++)p=d[M],v=d[B],p.y>o.y!=v.y>o.y&&o.x<(v.x-p.x)*(o.y-p.y)/(v.y-p.y)+p.x&&(l=!l);return l||Hi.prototype._containsPoint.call(this,o,!0)}});function nA(o,l){return new Go(o,l)}var $i=dt.extend({initialize:function(o,l){k(this,l),this._layers={},o&&this.addData(o)},addData:function(o){var l=N(o)?o:o.features,d,p,v;if(l){for(d=0,p=l.length;d<p;d++)v=l[d],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var T=this.options;if(T.filter&&!T.filter(o))return this;var M=fh(o,T);return M?(M.feature=_h(o),M.defaultOptions=M.options,this.resetStyle(M),T.onEachFeature&&T.onEachFeature(o,M),this.addLayer(M)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=r({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(l){this._setLayerStyle(l,o)},this)},_setLayerStyle:function(o,l){o.setStyle&&(typeof l=="function"&&(l=l(o.feature)),o.setStyle(l))}});function fh(o,l){var d=o.type==="Feature"?o.geometry:o,p=d?d.coordinates:null,v=[],T=l&&l.pointToLayer,M=l&&l.coordsToLatLng||Pp,B,W,K,ne;if(!p&&!d)return null;switch(d.type){case"Point":return B=M(p),My(T,o,B,l);case"MultiPoint":for(K=0,ne=p.length;K<ne;K++)B=M(p[K]),v.push(My(T,o,B,l));return new dt(v);case"LineString":case"MultiLineString":return W=ph(p,d.type==="LineString"?0:1,M),new Hi(W,l);case"Polygon":case"MultiPolygon":return W=ph(p,d.type==="Polygon"?1:2,M),new Go(W,l);case"GeometryCollection":for(K=0,ne=d.geometries.length;K<ne;K++){var ue=fh({geometry:d.geometries[K],type:"Feature",properties:o.properties},l);ue&&v.push(ue)}return new dt(v);case"FeatureCollection":for(K=0,ne=d.features.length;K<ne;K++){var Te=fh(d.features[K],l);Te&&v.push(Te)}return new dt(v);default:throw new Error("Invalid GeoJSON object.")}}function My(o,l,d,p){return o?o(l,d):new hh(d,p&&p.markersInheritOptions&&p)}function Pp(o){return new Ee(o[1],o[0],o[2])}function ph(o,l,d){for(var p=[],v=0,T=o.length,M;v<T;v++)M=l?ph(o[v],l-1,d):(d||Pp)(o[v]),p.push(M);return p}function Ap(o,l){return o=_e(o),o.alt!==void 0?[w(o.lng,l),w(o.lat,l),w(o.alt,l)]:[w(o.lng,l),w(o.lat,l)]}function mh(o,l,d,p){for(var v=[],T=0,M=o.length;T<M;T++)v.push(l?mh(o[T],c(o[T])?0:l-1,d,p):Ap(o[T],p));return!l&&d&&v.length>0&&v.push(v[0].slice()),v}function Ko(o,l){return o.feature?r({},o.feature,{geometry:l}):_h(l)}function _h(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var Rp={toGeoJSON:function(o){return Ko(this,{type:"Point",coordinates:Ap(this.getLatLng(),o)})}};hh.include(Rp),xp.include(Rp),dh.include(Rp),Hi.include({toGeoJSON:function(o){var l=!c(this._latlngs),d=mh(this._latlngs,l?1:0,!1,o);return Ko(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),Go.include({toGeoJSON:function(o){var l=!c(this._latlngs),d=l&&!c(this._latlngs[0]),p=mh(this._latlngs,d?2:l?1:0,!0,o);return l||(p=[p]),Ko(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),nt.include({toMultiPoint:function(o){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(o).geometry.coordinates)}),Ko(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(o){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(o);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var T=v.toGeoJSON(o);if(d)p.push(T.geometry);else{var M=_h(T);M.type==="FeatureCollection"?p.push.apply(p,M.features):p.push(M)}}}),d?Ko(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function Fy(o,l){return new $i(o,l)}var iA=Fy,gh=ze.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,l,d){this._url=o,this._bounds=Fe(l),k(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ye(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Be(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&Ui(this._image),this},bringToBack:function(){return this._map&&xr(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=Fe(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",l=this._image=o?this._url:Re("img");if(ye(l,"leaflet-image-layer"),this._zoomAnimated&&ye(l,"leaflet-zoom-animated"),this.options.className&&ye(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(o){var l=this._map.getZoomScale(o.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;_i(this._image,d,l)},_reset:function(){var o=this._image,l=new fe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();pe(o,l.min),o.style.width=d.x+"px",o.style.height=d.y+"px"},_updateOpacity:function(){at(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),rA=function(o,l,d){return new gh(o,l,d)},Vy=gh.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",l=this._image=o?this._url:Re("video");if(ye(l,"leaflet-image-layer"),this._zoomAnimated&&ye(l,"leaflet-zoom-animated"),this.options.className&&ye(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=a(this.fire,this,"load"),o){for(var d=l.getElementsByTagName("source"),p=[],v=0;v<d.length;v++)p.push(d[v].src);this._url=d.length>0?p:[l.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var T=0;T<this._url.length;T++){var M=Re("source");M.src=this._url[T],l.appendChild(M)}}});function sA(o,l,d){return new Vy(o,l,d)}var Uy=gh.extend({_initImage:function(){var o=this._image=this._url;ye(o,"leaflet-image-layer"),this._zoomAnimated&&ye(o,"leaflet-zoom-animated"),this.options.className&&ye(o,this.options.className),o.onselectstart=g,o.onmousemove=g}});function oA(o,l,d){return new Uy(o,l,d)}var yi=ze.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,l){o&&(o instanceof Ee||N(o))?(this._latlng=_e(o),k(this,l)):(k(this,o),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&at(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&at(this._container,1),this.bringToFront(),this.options.interactive&&(ye(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(at(this._container,0),this._removeTimeout=setTimeout(a(Be,void 0,this._container),200)):Be(this._container),this.options.interactive&&(Ye(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=_e(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ui(this._container),this},bringToBack:function(){return this._map&&xr(this._container),this},_prepareOpen:function(o){var l=this._source;if(!l._map)return!1;if(l instanceof dt){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!o)if(l.getCenter)o=l.getCenter();else if(l.getLatLng)o=l.getLatLng();else if(l.getBounds)o=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")o.innerHTML=l;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),l=J(this.options.offset),d=this._getAnchor();this._zoomAnimated?pe(this._container,o.add(d)):l=l.add(o).add(d);var p=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});Ce.include({_initOverlay:function(o,l,d,p){var v=l;return v instanceof o||(v=new o(p).setContent(l)),d&&v.setLatLng(d),v}}),ze.include({_initOverlay:function(o,l,d,p){var v=d;return v instanceof o?(k(v,p),v._source=this):(v=l&&!p?l:new o(p,this),v.setContent(d)),v}});var vh=yi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,yi.prototype.openOn.call(this,o)},onAdd:function(o){yi.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Nr||this._source.on("preclick",Sn))},onRemove:function(o){yi.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Nr||this._source.off("preclick",Sn))},getEvents:function(){var o=yi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",l=this._container=Re("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Re("div",o+"-content-wrapper",l);if(this._contentNode=Re("div",o+"-content",d),Rr(l),Ar(this._contentNode),le(l,"contextmenu",Sn),this._tipContainer=Re("div",o+"-tip-container",l),this._tip=Re("div",o+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Re("a",o+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',le(p,"click",function(v){tt(v),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,l=o.style;l.width="",l.whiteSpace="nowrap";var d=o.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=o.offsetHeight,v=this.options.maxHeight,T="leaflet-popup-scrolled";v&&p>v?(l.height=v+"px",ye(o,T)):Ye(o,T),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),d=this._getAnchor();pe(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,l=parseInt(Cr(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,v=new q(this._containerLeft,-d-this._containerBottom);v._add(Un(this._container));var T=o.layerPointToContainerPoint(v),M=J(this.options.autoPanPadding),B=J(this.options.autoPanPaddingTopLeft||M),W=J(this.options.autoPanPaddingBottomRight||M),K=o.getSize(),ne=0,ue=0;T.x+p+W.x>K.x&&(ne=T.x+p-K.x+W.x),T.x-ne-B.x<0&&(ne=T.x-B.x),T.y+d+W.y>K.y&&(ue=T.y+d-K.y+W.y),T.y-ue-B.y<0&&(ue=T.y-B.y),(ne||ue)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([ne,ue]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),aA=function(o,l){return new vh(o,l)};Ce.mergeOptions({closePopupOnClick:!0}),Ce.include({openPopup:function(o,l,d){return this._initOverlay(vh,o,l,d).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),ze.include({bindPopup:function(o,l){return this._popup=this._initOverlay(vh,this._popup,o,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof dt||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){Cn(o);var l=o.layer||o.target;if(this._popup._source===l&&!(l instanceof Nr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=l,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var yh=yi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){yi.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){yi.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=yi.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",l=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Re("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var l,d,p=this._map,v=this._container,T=p.latLngToContainerPoint(p.getCenter()),M=p.layerPointToContainerPoint(o),B=this.options.direction,W=v.offsetWidth,K=v.offsetHeight,ne=J(this.options.offset),ue=this._getAnchor();B==="top"?(l=W/2,d=K):B==="bottom"?(l=W/2,d=0):B==="center"?(l=W/2,d=K/2):B==="right"?(l=0,d=K/2):B==="left"?(l=W,d=K/2):M.x<T.x?(B="right",l=0,d=K/2):(B="left",l=W+(ne.x+ue.x)*2,d=K/2),o=o.subtract(J(l,d,!0)).add(ne).add(ue),Ye(v,"leaflet-tooltip-right"),Ye(v,"leaflet-tooltip-left"),Ye(v,"leaflet-tooltip-top"),Ye(v,"leaflet-tooltip-bottom"),ye(v,"leaflet-tooltip-"+B),pe(v,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&at(this._container,o)},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(l)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),lA=function(o,l){return new yh(o,l)};Ce.include({openTooltip:function(o,l,d){return this._initOverlay(yh,o,l,d).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),ze.include({bindTooltip:function(o,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(yh,this._tooltip,o,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var l=o?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof dt||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var l=typeof o.getElement=="function"&&o.getElement();l&&(le(l,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),le(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var l=typeof o.getElement=="function"&&o.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var l=o.latlng,d,p;this._tooltip.options.sticky&&o.originalEvent&&(d=this._map.mouseEventToContainerPoint(o.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var jy=vi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var l=o&&o.tagName==="DIV"?o:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Ls(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=J(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function uA(o){return new jy(o)}vi.Default=zl;var Bl=ze.extend({options:{tileSize:256,opacity:1,updateWhenIdle:se.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){k(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),Be(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ui(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(xr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof q?o:new q(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var l=this.getPane().children,d=-o(-1/0,1/0),p=0,v=l.length,T;p<v;p++)T=l[p].style.zIndex,l[p]!==this._container&&T&&(d=o(d,+T));isFinite(d)&&(this.options.zIndex=d+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!se.ielt9){at(this._container,this.options.opacity);var o=+new Date,l=!1,d=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var T=Math.min(1,(o-v.loaded)/200);at(v.el,T),T<1?l=!0:(v.active?d=!0:this._onOpaqueTile(v),v.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(U(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Re("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,l=this.options.maxZoom;if(o!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===o?(this._levels[d].el.style.zIndex=l-Math.abs(o-d),this._onUpdateLevel(d)):(Be(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[o],v=this._map;return p||(p=this._levels[o]={},p.el=Re("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=v.project(v.unproject(v.getPixelOrigin()),o).round(),p.zoom=o,this._setZoomTransform(p,v.getCenter(),v.getZoom()),g(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var o,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)l=this._tiles[o],l.retain=l.current;for(o in this._tiles)if(l=this._tiles[o],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var l in this._tiles)this._tiles[l].coords.z===o&&this._removeTile(l)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)Be(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,l,d,p){var v=Math.floor(o/2),T=Math.floor(l/2),M=d-1,B=new q(+v,+T);B.z=+M;var W=this._tileCoordsToKey(B),K=this._tiles[W];return K&&K.active?(K.retain=!0,!0):(K&&K.loaded&&(K.retain=!0),M>p?this._retainParent(v,T,M,p):!1)},_retainChildren:function(o,l,d,p){for(var v=2*o;v<2*o+2;v++)for(var T=2*l;T<2*l+2;T++){var M=new q(v,T);M.z=d+1;var B=this._tileCoordsToKey(M),W=this._tiles[B];if(W&&W.active){W.retain=!0;continue}else W&&W.loaded&&(W.retain=!0);d+1<p&&this._retainChildren(v,T,d+1,p)}},_resetView:function(o){var l=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var l=this.options;return l.minNativeZoom!==void 0&&o<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<o?l.maxNativeZoom:o},_setView:function(o,l,d,p){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var T=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||T)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(o),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(o,l)},_setZoomTransforms:function(o,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],o,l)},_setZoomTransform:function(o,l,d){var p=this._map.getZoomScale(d,o.zoom),v=o.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();se.any3d?_i(o.el,v,p):pe(o.el,v)},_resetGrid:function(){var o=this._map,l=o.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(o.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(o.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),v=l.project(o,this._tileZoom).floor(),T=l.getSize().divideBy(p*2);return new fe(v.subtract(T),v.add(T))},_update:function(o){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(o===void 0&&(o=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(o),v=this._pxBoundsToTileRange(p),T=v.getCenter(),M=[],B=this.options.keepBuffer,W=new fe(v.getBottomLeft().subtract([B,-B]),v.getTopRight().add([B,-B]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var K in this._tiles){var ne=this._tiles[K].coords;(ne.z!==this._tileZoom||!W.contains(new q(ne.x,ne.y)))&&(this._tiles[K].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(o,d);return}for(var ue=v.min.y;ue<=v.max.y;ue++)for(var Te=v.min.x;Te<=v.max.x;Te++){var rn=new q(Te,ue);if(rn.z=this._tileZoom,!!this._isValidTile(rn)){var bt=this._tiles[this._tileCoordsToKey(rn)];bt?bt.current=!0:M.push(rn)}}if(M.sort(function(hn,Qo){return hn.distanceTo(T)-Qo.distanceTo(T)}),M.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Wn=document.createDocumentFragment();for(Te=0;Te<M.length;Te++)this._addTile(M[Te],Wn);this._level.el.appendChild(Wn)}}}},_isValidTile:function(o){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(o.x<d.min.x||o.x>d.max.x)||!l.wrapLat&&(o.y<d.min.y||o.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(o);return Fe(this.options.bounds).overlaps(p)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var l=this._map,d=this.getTileSize(),p=o.scaleBy(d),v=p.add(d),T=l.unproject(p,o.z),M=l.unproject(v,o.z);return[T,M]},_tileCoordsToBounds:function(o){var l=this._tileCoordsToNwSe(o),d=new Ae(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var l=o.split(":"),d=new q(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(o){var l=this._tiles[o];l&&(Be(l.el),delete this._tiles[o],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){ye(o,"leaflet-tile");var l=this.getTileSize();o.style.width=l.x+"px",o.style.height=l.y+"px",o.onselectstart=g,o.onmousemove=g,se.ielt9&&this.options.opacity<1&&at(o,this.options.opacity)},_addTile:function(o,l){var d=this._getTilePos(o),p=this._tileCoordsToKey(o),v=this.createTile(this._wrapCoords(o),a(this._tileReady,this,o));this._initTile(v),this.createTile.length<2&&V(a(this._tileReady,this,o,null,v)),pe(v,d),this._tiles[p]={el:v,coords:o,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:o})},_tileReady:function(o,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:o});var p=this._tileCoordsToKey(o);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(at(d.el,0),U(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(ye(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),se.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var l=new q(this._wrapX?_(o.x,this._wrapX):o.x,this._wrapY?_(o.y,this._wrapY):o.y);return l.z=o.z,l},_pxBoundsToTileRange:function(o){var l=this.getTileSize();return new fe(o.min.unscaleBy(l).floor(),o.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function cA(o){return new Bl(o)}var Zo=Bl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,l){this._url=o,l=k(this,l),l.detectRetina&&se.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,l){return this._url===o&&l===void 0&&(l=!0),this._url=o,l||this.redraw(),this},createTile:function(o,l){var d=document.createElement("img");return le(d,"load",a(this._tileOnLoad,this,l,d)),le(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(o),d},getTileUrl:function(o){var l={r:se.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-o.y;this.options.tms&&(l.y=d),l["-y"]=d}return P(this._url,r(l,this.options))},_tileOnLoad:function(o,l){se.ielt9?setTimeout(a(o,this,null,l),0):o(null,l)},_tileOnError:function(o,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),o(d,l)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(o=l-o),o+p},_getSubdomain:function(o){var l=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var o,l;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(l=this._tiles[o].el,l.onload=g,l.onerror=g,!l.complete)){l.src=G;var d=this._tiles[o].coords;Be(l),delete this._tiles[o],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(o){var l=this._tiles[o];if(l)return l.el.setAttribute("src",G),Bl.prototype._removeTile.call(this,o)},_tileReady:function(o,l,d){if(!(!this._map||d&&d.getAttribute("src")===G))return Bl.prototype._tileReady.call(this,o,l,d)}});function zy(o,l){return new Zo(o,l)}var By=Zo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,l){this._url=o;var d=r({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=k(this,l);var v=l.detectRetina&&se.retina?2:1,T=this.getTileSize();d.width=T.x*v,d.height=T.y*v,this.wmsParams=d},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Zo.prototype.onAdd.call(this,o)},getTileUrl:function(o){var l=this._tileCoordsToNwSe(o),d=this._crs,p=we(d.project(l[0]),d.project(l[1])),v=p.min,T=p.max,M=(this._wmsVersion>=1.3&&this._crs===_t?[v.y,v.x,T.y,T.x]:[v.x,v.y,T.x,T.y]).join(","),B=Zo.prototype.getTileUrl.call(this,o);return B+D(this.wmsParams,B,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+M},setParams:function(o,l){return r(this.wmsParams,o),l||this.redraw(),this}});function hA(o,l){return new By(o,l)}Zo.WMS=By,zy.wms=hA;var qi=ze.extend({options:{padding:.1},initialize:function(o){k(this,o),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ye(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),T=p.multiplyBy(-d).add(v).subtract(this._map._getNewPixelOrigin(o,l));se.any3d?_i(this._container,T,d):pe(this._container,T)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-o)).round();this._bounds=new fe(d,d.add(l.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Wy=qi.extend({options:{tolerance:0},getEvents:function(){var o=qi.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){qi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");le(o,"mousemove",this._onMouseMove,this),le(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),le(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){U(this._redrawRequest),delete this._ctx,Be(this._container),je(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var l in this._layers)o=this._layers[l],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){qi.prototype._update.call(this);var o=this._bounds,l=this._container,d=o.getSize(),p=se.retina?2:1;pe(l,o.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",se.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){qi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[h(o)]=o;var l=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var l=o._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete o._order,delete this._layers[h(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var l=o.options.dashArray.split(/[, ]+/),d=[],p,v;for(v=0;v<l.length;v++){if(p=Number(l[v]),isNaN(p))return;d.push(p)}o.options._dashArray=d}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var l=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new fe,this._redrawBounds.extend(o._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(o._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var l=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)o=p.layer,(!l||o._pxBounds&&o._pxBounds.intersects(l))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,l){if(this._drawing){var d,p,v,T,M=o._parts,B=M.length,W=this._ctx;if(B){for(W.beginPath(),d=0;d<B;d++){for(p=0,v=M[d].length;p<v;p++)T=M[d][p],W[p?"lineTo":"moveTo"](T.x,T.y);l&&W.closePath()}this._fillStroke(W,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var l=o._point,d=this._ctx,p=Math.max(Math.round(o._radius),1),v=(Math.max(Math.round(o._radiusY),1)||p)/p;v!==1&&(d.save(),d.scale(1,v)),d.beginPath(),d.arc(l.x,l.y/v,p,0,Math.PI*2,!1),v!==1&&d.restore(),this._fillStroke(d,o)}},_fillStroke:function(o,l){var d=l.options;d.fill&&(o.globalAlpha=d.fillOpacity,o.fillStyle=d.fillColor||d.color,o.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(o.setLineDash&&o.setLineDash(l.options&&l.options._dashArray||[]),o.globalAlpha=d.opacity,o.lineWidth=d.weight,o.strokeStyle=d.color,o.lineCap=d.lineCap,o.lineJoin=d.lineJoin,o.stroke())},_onClick:function(o){for(var l=this._map.mouseEventToLayerPoint(o),d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,l)}},_handleMouseOut:function(o){var l=this._hoveredLayer;l&&(Ye(this._container,"leaflet-interactive"),this._fireEvent([l],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,l){if(!this._mouseHoverThrottled){for(var d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(o),p&&(ye(this._container,"leaflet-interactive"),this._fireEvent([p],o,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,l,d){this._map._fireDOMEvent(l,d||l.type,o)},_bringToFront:function(o){var l=o._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(o)}},_bringToBack:function(o){var l=o._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(o)}}});function Hy(o){return se.canvas?new Wy(o):null}var Wl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),dA={_initContainer:function(){this._container=Re("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(qi.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var l=o._container=Wl("shape");ye(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",o._path=Wl("path"),l.appendChild(o._path),this._updateStyle(o),this._layers[h(o)]=o},_addPath:function(o){var l=o._container;this._container.appendChild(l),o.options.interactive&&o.addInteractiveTarget(l)},_removePath:function(o){var l=o._container;Be(l),o.removeInteractiveTarget(l),delete this._layers[h(o)]},_updateStyle:function(o){var l=o._stroke,d=o._fill,p=o.options,v=o._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(l||(l=o._stroke=Wl("stroke")),v.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=N(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(v.removeChild(l),o._stroke=null),p.fill?(d||(d=o._fill=Wl("fill")),v.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(v.removeChild(d),o._fill=null)},_updateCircle:function(o){var l=o._point.round(),d=Math.round(o._radius),p=Math.round(o._radiusY||d);this._setPath(o,o._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(o,l){o._path.v=l},_bringToFront:function(o){Ui(o._container)},_bringToBack:function(o){xr(o._container)}},wh=se.vml?Wl:wo,Hl=qi.extend({_initContainer:function(){this._container=wh("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=wh("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Be(this._container),je(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){qi.prototype._update.call(this);var o=this._bounds,l=o.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),pe(d,o.min),d.setAttribute("viewBox",[o.min.x,o.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(o){var l=o._path=wh("path");o.options.className&&ye(l,o.options.className),o.options.interactive&&ye(l,"leaflet-interactive"),this._updateStyle(o),this._layers[h(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){Be(o._path),o.removeInteractiveTarget(o._path),delete this._layers[h(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var l=o._path,d=o.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(o,l){this._setPath(o,cl(o._parts,l))},_updateCircle:function(o){var l=o._point,d=Math.max(Math.round(o._radius),1),p=Math.max(Math.round(o._radiusY),1)||d,v="a"+d+","+p+" 0 1,0 ",T=o._empty()?"M0 0":"M"+(l.x-d)+","+l.y+v+d*2+",0 "+v+-d*2+",0 ";this._setPath(o,T)},_setPath:function(o,l){o._path.setAttribute("d",l)},_bringToFront:function(o){Ui(o._path)},_bringToBack:function(o){xr(o._path)}});se.vml&&Hl.include(dA);function $y(o){return se.svg||se.vml?new Hl(o):null}Ce.include({getRenderer:function(o){var l=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var l=this._paneRenderers[o];return l===void 0&&(l=this._createRenderer({pane:o}),this._paneRenderers[o]=l),l},_createRenderer:function(o){return this.options.preferCanvas&&Hy(o)||$y(o)}});var qy=Go.extend({initialize:function(o,l){Go.prototype.initialize.call(this,this._boundsToLatLngs(o),l)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=Fe(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function fA(o,l){return new qy(o,l)}Hl.create=wh,Hl.pointsToPath=cl,$i.geometryToLayer=fh,$i.coordsToLatLng=Pp,$i.coordsToLatLngs=ph,$i.latLngToCoords=Ap,$i.latLngsToCoords=mh,$i.getFeature=Ko,$i.asFeature=_h,Ce.mergeOptions({boxZoom:!0});var Gy=xn.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){le(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){je(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Be(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Jn(),Pl(),this._startPoint=this._map.mouseEventToContainerPoint(o),le(document,{contextmenu:Cn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=Re("div","leaflet-zoom-box",this._container),ye(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var l=new fe(this._point,this._startPoint),d=l.getSize();pe(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(Be(this._box),Ye(this._container,"leaflet-crosshair")),ei(),Al(),je(document,{contextmenu:Cn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new Ae(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ce.addInitHook("addHandler","boxZoom",Gy),Ce.mergeOptions({doubleClickZoom:!0});var Ky=xn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,v=o.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(o.containerPoint,v)}});Ce.addInitHook("addHandler","doubleClickZoom",Ky),Ce.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Zy=xn.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new ti(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}ye(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ye(this._map._container,"leaflet-grab"),Ye(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Fe(this._map.options.maxBounds);this._offsetLimit=we(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,l){return o-(o-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;o.x<l.min.x&&(o.x=this._viscousLimit(o.x,l.min.x)),o.y<l.min.y&&(o.y=this._viscousLimit(o.y,l.min.y)),o.x>l.max.x&&(o.x=this._viscousLimit(o.x,l.max.x)),o.y>l.max.y&&(o.y=this._viscousLimit(o.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,l=Math.round(o/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-l+d)%o+l-d,T=(p+l+d)%o-l-d,M=Math.abs(v+d)<Math.abs(T+d)?v:T;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=M},_onDragEnd:function(o){var l=this._map,d=l.options,p=!d.inertia||o.noInertia||this._times.length<2;if(l.fire("dragend",o),p)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),T=(this._lastTime-this._times[0])/1e3,M=d.easeLinearity,B=v.multiplyBy(M/T),W=B.distanceTo([0,0]),K=Math.min(d.inertiaMaxSpeed,W),ne=B.multiplyBy(K/W),ue=K/(d.inertiaDeceleration*M),Te=ne.multiplyBy(-ue/2).round();!Te.x&&!Te.y?l.fire("moveend"):(Te=l._limitOffset(Te,l.options.maxBounds),V(function(){l.panBy(Te,{duration:ue,easeLinearity:M,noMoveStart:!0,animate:!0})}))}}});Ce.addInitHook("addHandler","dragging",Zy),Ce.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Qy=xn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),le(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),je(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,l=document.documentElement,d=o.scrollTop||l.scrollTop,p=o.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var l=this._panKeys={},d=this.keyCodes,p,v;for(p=0,v=d.left.length;p<v;p++)l[d.left[p]]=[-1*o,0];for(p=0,v=d.right.length;p<v;p++)l[d.right[p]]=[o,0];for(p=0,v=d.down.length;p<v;p++)l[d.down[p]]=[0,o];for(p=0,v=d.up.length;p<v;p++)l[d.up[p]]=[0,-1*o]},_setZoomDelta:function(o){var l=this._zoomKeys={},d=this.keyCodes,p,v;for(p=0,v=d.zoomIn.length;p<v;p++)l[d.zoomIn[p]]=o;for(p=0,v=d.zoomOut.length;p<v;p++)l[d.zoomOut[p]]=-o},_addHooks:function(){le(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){je(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var l=o.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],o.shiftKey&&(p=J(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(J(p),d.options.maxBounds)),d.options.worldCopyJump){var v=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(v)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;Cn(o)}}});Ce.addInitHook("addHandler","keyboard",Qy),Ce.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Yy=xn.extend({addHooks:function(){le(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){je(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var l=rh(o),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),Cn(o)},_performZoom:function(){var o=this._map,l=o.getZoom(),d=this._map.options.zoomSnap||0;o._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,T=d?Math.ceil(v/d)*d:v,M=o._limitZoom(l+(this._delta>0?T:-T))-l;this._delta=0,this._startTime=null,M&&(o.options.scrollWheelZoom==="center"?o.setZoom(l+M):o.setZoomAround(this._lastMousePos,l+M))}});Ce.addInitHook("addHandler","scrollWheelZoom",Yy);var pA=600;Ce.mergeOptions({tapHold:se.touchNative&&se.safari&&se.mobile,tapTolerance:15});var Xy=xn.extend({addHooks:function(){le(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){je(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var l=o.touches[0];this._startPos=this._newPos=new q(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(le(document,"touchend",tt),le(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),pA),le(document,"touchend touchcancel contextmenu",this._cancel,this),le(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){je(document,"touchend",tt),je(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),je(document,"touchend touchcancel contextmenu",this._cancel,this),je(document,"touchmove",this._onMove,this)},_onMove:function(o){var l=o.touches[0];this._newPos=new q(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,l){var d=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Ce.addInitHook("addHandler","tapHold",Xy),Ce.mergeOptions({touchZoom:se.touch,bounceAtZoomLimits:!0});var Jy=xn.extend({addHooks:function(){ye(this._map._container,"leaflet-touch-zoom"),le(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ye(this._map._container,"leaflet-touch-zoom"),je(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var l=this._map;if(!(!o.touches||o.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(o.touches[0]),p=l.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),le(document,"touchmove",this._onTouchMove,this),le(document,"touchend touchcancel",this._onTouchEnd,this),tt(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(o.touches[0]),p=l.mouseEventToContainerPoint(o.touches[1]),v=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var T=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&T.x===0&&T.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(T),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),U(this._animRequest);var M=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(M,this,!0),tt(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,U(this._animRequest),je(document,"touchmove",this._onTouchMove,this),je(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ce.addInitHook("addHandler","touchZoom",Jy),Ce.BoxZoom=Gy,Ce.DoubleClickZoom=Ky,Ce.Drag=Zy,Ce.Keyboard=Qy,Ce.ScrollWheelZoom=Yy,Ce.TapHold=Xy,Ce.TouchZoom=Jy,n.Bounds=fe,n.Browser=se,n.CRS=It,n.Canvas=Wy,n.Circle=xp,n.CircleMarker=dh,n.Class=ot,n.Control=cn,n.DivIcon=jy,n.DivOverlay=yi,n.DomEvent=sh,n.DomUtil=nh,n.Draggable=ti,n.Evented=tn,n.FeatureGroup=dt,n.GeoJSON=$i,n.GridLayer=Bl,n.Handler=xn,n.Icon=vi,n.ImageOverlay=gh,n.LatLng=Ee,n.LatLngBounds=Ae,n.Layer=ze,n.LayerGroup=nt,n.LineUtil=S,n.Map=Ce,n.Marker=hh,n.Mixin=Os,n.Path=Nr,n.Point=q,n.PolyUtil=Ho,n.Polygon=Go,n.Polyline=Hi,n.Popup=vh,n.PosAnimation=Dl,n.Projection=te,n.Rectangle=qy,n.Renderer=qi,n.SVG=Hl,n.SVGOverlay=Uy,n.TileLayer=Zo,n.Tooltip=yh,n.Transformation=Ir,n.Util=F,n.VideoOverlay=Vy,n.bind=a,n.bounds=we,n.canvas=Hy,n.circle=eA,n.circleMarker=J1,n.control=nn,n.divIcon=uA,n.extend=r,n.featureGroup=qo,n.geoJSON=Fy,n.geoJson=iA,n.gridLayer=cA,n.icon=Y1,n.imageOverlay=rA,n.latLng=_e,n.latLngBounds=Fe,n.layerGroup=br,n.map=Vo,n.marker=X1,n.point=J,n.polygon=nA,n.polyline=tA,n.popup=aA,n.rectangle=fA,n.setOptions=k,n.stamp=h,n.svg=$y,n.svgOverlay=oA,n.tileLayer=zy,n.tooltip=lA,n.transformation=Di,n.version=i,n.videoOverlay=sA;var mA=window.L;n.noConflict=function(){return window.L=mA,this},window.L=n})})(ig,ig.exports);var Tp=ig.exports;function Ly(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Oy(t,e){return e==null?function(i,r){const s=$.useRef();return s.current||(s.current=t(i,r)),s}:function(i,r){const s=$.useRef();s.current||(s.current=t(i,r));const a=$.useRef(i),{instance:u}=s.current;return $.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),s}}function xz(t,e){$.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var s;(s=e.layerContainer)==null||s.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function Z1(t){return function(n){const i=by(),r=t(Ny(n,i),i);return $1(i.map,n.attribution),K1(r.current,n.eventHandlers),xz(r.current,i),r}}function Pz(t,e){const n=Oy(t,e),i=Z1(n);return Tz(i)}function Az(t,e){const n=Oy(t),i=Cz(n,e);return Iz(i)}function Rz(t,e){const n=Oy(t,e),i=Z1(n);return Sz(i)}function kz(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function Q1(){return by().map}function rg(){return rg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},rg.apply(this,arguments)}function bz({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:s,placeholder:a,style:u,whenReady:h,zoom:f,..._},g){const[w]=$.useState({className:r,id:s,style:u}),[C,b]=$.useState(null);$.useImperativeHandle(g,()=>(C==null?void 0:C.map)??null,[C]);const k=$.useCallback(A=>{if(A!==null&&C===null){const P=new Tp.Map(A,_);n!=null&&f!=null?P.setView(n,f):t!=null&&P.fitBounds(t,e),h!=null&&P.whenReady(h),b(wz(P))}},[]);$.useEffect(()=>()=>{C==null||C.map.remove()},[C]);const D=C?_d.createElement(G1,{value:C},i):a??null;return _d.createElement("div",rg({},w,{ref:k}),D)}const Nz=$.forwardRef(bz),Lz=Pz(function({position:e,...n},i){const r=new Tp.Marker(e,n);return Ly(r,Ez(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),Oz=Az(function(e,n){const i=new Tp.Popup(e,n.overlayContainer);return Ly(i,n)},function(e,n,{position:i},r){$.useEffect(function(){const{instance:a}=e;function u(f){f.popup===a&&(a.update(),r(!0))}function h(f){f.popup===a&&r(!1)}return n.map.on({popupopen:u,popupclose:h}),n.overlayContainer==null?(i!=null&&a.setLatLng(i),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var _;n.map.off({popupopen:u,popupclose:h}),(_=n.overlayContainer)==null||_.unbindPopup(),n.map.removeLayer(a)}},[e,n,r,i])}),Dz=Rz(function({url:e,...n},i){const r=new Tp.TileLayer(e,Ny(n,i));return Ly(r,i)},function(e,n,i){kz(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)}),Mz=({position:t})=>(Q1().setView([t.lat,t.lng],13),null),Fz=({position:t})=>{const e=Q1(),n=()=>{e.setView([t.lat,t.lng],16)};return E.jsx(Lz,{position:[t.lat,t.lng],eventHandlers:{click:n},children:E.jsx(Oz,{children:"Camohaguin Barangay Hall"})})},Vz=()=>{const t={lat:13.909491554603317,lng:122.16558462351907};return E.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"20px"},children:E.jsxs(Nz,{style:{height:"400px",width:"80%",borderRadius:"20px",border:"2px solid #ccc",overflow:"hidden",zIndex:1},children:[E.jsx(Mz,{position:t}),E.jsx(Dz,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),E.jsx(Fz,{position:t})]})})},Uz=()=>{const[t,e]=$.useState([]),[n,i]=$.useState({id:"",title:"",date:"",location:"",description:"",image:[],category:""}),[r,s]=$.useState([]),[a,u]=$.useState([0]),[h,f]=$.useState(null),[_,g]=$.useState(!1),w=RP();$.useEffect(()=>{C()},[]);const C=async()=>{try{const x=On(pt,"events"),R=(await gr(x)).docs.map(O=>({id:O.id,...O.data()}));e(R)}catch(x){console.error("Error fetching events:",x)}},b=(x,I)=>{if(x.target.files){const R=Array.from(x.target.files),O=[...r];O[I]=R[0],s(O)}},k=()=>{u([...a,a.length])},D=x=>{u(a.filter((I,R)=>R!==x)),s(r.filter((I,R)=>R!==x))},A=async()=>{const x=r.map(I=>new Promise((R,O)=>{const V=hc(w,`events/${I.name}`);uc(V,I).then(async U=>{const F=await cc(U.ref);R(F)}).catch(U=>{console.error("Error uploading file:",U),O(U)})}));try{return await Promise.all(x)}catch(I){return console.error("Error uploading images:",I),[]}},P=async()=>{try{const x=await A(),I=On(pt,"events");await sl(I,{title:n.title,date:n.date,location:n.location,description:n.description,image:x,category:n.category}),i({id:"",title:"",date:"",location:"",description:"",image:[],category:""}),s([]),u([0]),C()}catch(x){console.error("Error adding document:",x)}},N=async x=>{try{const I=_r(pt,"events",x);await $a(I),C()}catch(I){console.error("Error deleting document:",I)}},j=x=>{const I=t.find(R=>R.id===x);I?(i(I),s(Array.isArray(I.image)?I.image.map(R=>R):[]),u(I.image&&Array.isArray(I.image)?I.image.map((R,O)=>O):[0])):console.error("Event not found for ID:",x)},G=async()=>{try{if(!n.id){console.error("No event ID specified for update.");return}const x=_r(pt,"events",n.id);if(!(await bF(x)).exists()){console.error("No such document!");return}const R=r.length?await A():n.image;await $v(x,{title:n.title,date:n.date,location:n.location,description:n.description,image:R,category:n.category}),i({id:"",title:"",date:"",location:"",description:"",image:[],category:""}),s([]),u([0]),C()}catch(x){console.error("Error updating document:",x)}},Z=x=>{const I=new Date().toISOString().split("T")[0];x.date===I?(f(x),g(!0)):alert("Attendance form is only available on the event date.")};return E.jsxs("div",{className:"p-8 bg-gray-100 min-h-screen",children:[E.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Manage Events"}),E.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8",children:[E.jsx("h3",{className:"text-xl font-semibold mb-4",children:n.id?"Edit Event":"Add New Event"}),E.jsxs("div",{className:"space-y-4",children:[E.jsx("input",{type:"text",placeholder:"Title",value:n.title,onChange:x=>i({...n,title:x.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),E.jsx("input",{type:"date",placeholder:"Date",value:n.date,onChange:x=>i({...n,date:x.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),E.jsx("input",{type:"text",placeholder:"Location",value:n.location,onChange:x=>i({...n,location:x.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),E.jsx("textarea",{placeholder:"Description",value:n.description,onChange:x=>i({...n,description:x.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.map((x,I)=>E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("input",{type:"file",onChange:R=>b(R,I),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),E.jsx("button",{onClick:()=>D(I),className:"bg-red-500 text-white px-3 py-2 rounded-lg hover:bg-red-600 transition duration-300",children:"Remove"})]},I)),E.jsx("button",{onClick:k,className:"bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 transition duration-300",children:"Add Image"}),E.jsx("input",{type:"text",placeholder:"Category",value:n.category,onChange:x=>i({...n,category:x.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),E.jsx("button",{onClick:n.id?G:P,className:"mt-4 bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition duration-300",children:n.id?"Update Event":"Add Event"})]}),E.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[E.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Event List"}),E.jsx("ul",{children:t.map(x=>E.jsxs("li",{className:"flex items-center justify-between mb-4",children:[E.jsxs("div",{children:[E.jsx("h4",{className:"text-lg font-semibold",children:x.title}),E.jsx("p",{className:"text-gray-600",children:x.date}),E.jsx("p",{className:"text-gray-600",children:x.location}),E.jsx("p",{className:"text-gray-600",children:x.description}),E.jsxs("p",{className:"text-gray-600",children:["Category: ",x.category]}),E.jsx("div",{className:"mt-2",children:x.image.map((I,R)=>E.jsx("img",{src:I,alt:`Event ${R}`,className:"w-32 h-32 object-cover mb-2"},R))})]}),E.jsxs("div",{className:"flex space-x-2",children:[E.jsx("button",{onClick:()=>j(x.id),className:"bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition duration-300",children:"Edit"}),E.jsx("button",{onClick:()=>N(x.id),className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition duration-300",children:"Delete"}),E.jsx("button",{onClick:()=>Z(x),className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition duration-300",children:"Mark Attendance"})]})]},x.id))})]}),_&&h&&E.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center",children:E.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md w-96",children:[E.jsxs("h4",{className:"text-xl font-semibold mb-4",children:["Mark Attendance for ",h.title]}),E.jsx("form",{}),E.jsx("button",{onClick:()=>g(!1),className:"mt-4 bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-600 transition duration-300",children:"Close"})]})})]})},jz=()=>{const[t,e]=$.useState([]),[n,i]=$.useState(null),[r,s]=$.useState({title:"",description:"",imageUrl:""}),[a,u]=$.useState(null),h=On(pt,"newsletters");$.useEffect(()=>{(async()=>{const D=await gr(h);e(D.docs.map(A=>({...A.data(),id:A.id})))})()},[h]);const f=async()=>{let k=r.imageUrl;if(a){const D=hc(Tf,`images/${a.name}`);await uc(D,a),k=await cc(D)}await sl(h,{...r,imageUrl:k}),s({title:"",description:"",imageUrl:""}),u(null)},_=async k=>{const D=_r(pt,"newsletters",k);let A=r.imageUrl;if(a){const P=hc(Tf,`images/${a.name}`);await uc(P,a),A=await cc(P)}await $v(D,{...r,imageUrl:A}),i(null),u(null)},g=async k=>{const D=_r(pt,"newsletters",k);await $a(D)},w=k=>{i(k.id),s({title:k.title,description:k.description,imageUrl:k.imageUrl})},C=k=>{s({...r,[k.target.name]:k.target.value})},b=k=>{k.target.files&&u(k.target.files[0])};return E.jsxs("div",{className:"p-4",children:[E.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Manage Newsletters"}),E.jsxs("div",{className:"mb-6",children:[E.jsx("h2",{className:"text-xl font-semibold mb-4",children:n?"Edit Newsletter":"Add New Newsletter"}),E.jsxs("form",{onSubmit:k=>{k.preventDefault(),n?_(n):f()},children:[E.jsx("input",{type:"text",name:"title",placeholder:"Title",value:r.title,onChange:C,className:"block w-full mb-2 p-2 border border-gray-300 rounded"}),E.jsx("textarea",{name:"description",placeholder:"Description",value:r.description,onChange:C,className:"block w-full mb-2 p-2 border border-gray-300 rounded"}),E.jsx("input",{type:"file",name:"imageUrl",onChange:b,className:"block w-full mb-2"}),E.jsx("button",{type:"submit",className:"bg-blue-500 text-white p-2 rounded",children:n?"Update":"Add"})]})]}),E.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:t.map(k=>E.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[E.jsx("img",{src:k.imageUrl,alt:k.title,className:"w-full h-48 object-cover"}),E.jsxs("div",{className:"p-4",children:[E.jsx("h2",{className:"text-xl font-bold mb-2",children:k.title}),E.jsx("p",{className:"text-gray-700 mb-4",children:k.description}),E.jsx("button",{onClick:()=>w(k),className:"text-blue-500 hover:underline mr-4",children:"Edit"}),E.jsx("button",{onClick:()=>g(k.id),className:"text-red-500 hover:underline",children:"Delete"})]})]},k.id))})]})},zz=()=>{const[t,e]=$.useState([]),[n,i]=$.useState({title:"",description:"",imageUrl:"",formFields:[]}),[r,s]=$.useState(null),[a,u]=$.useState([{label:"",type:"text"}]),h=On(pt,"services"),f=$.useCallback(async()=>{try{const D=await gr(h);e(D.docs.map(A=>({...A.data(),id:A.id})))}catch(D){console.error("Error fetching services:",D)}},[h]);$.useEffect(()=>{f()},[f]);const _=async D=>{if(D)try{const A=hc(Tf,`services/${D.name}`);return await uc(A,D),await cc(A)}catch(A){console.error("Error uploading image:",A)}},g=async()=>{try{const D=await _(r);if(!D)return;const A={title:n.title,description:n.description,imageUrl:D,formFields:a};await sl(h,A),f(),i({title:"",description:"",imageUrl:"",formFields:[]}),u([{label:"",type:"text"}]),s(null)}catch(D){console.error("Error adding service:",D)}},w=async D=>{try{const A=_r(pt,"services",D);await $a(A),f()}catch(A){console.error("Error deleting service:",A)}},C=()=>{u([...a,{label:"",type:"text"}])},b=(D,A,P)=>{const N=a.map((j,G)=>G===D?{...j,[A]:P}:j);u(N)},k=D=>{u(a.filter((A,P)=>P!==D))};return E.jsxs("div",{className:"p-6",children:[E.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Admin Services Management"}),E.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[E.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Add New Service"}),E.jsx("input",{type:"text",placeholder:"Service Title",value:n.title,onChange:D=>i({...n,title:D.target.value}),className:"block w-full mb-4 p-2 border border-gray-300 rounded"}),E.jsx("textarea",{placeholder:"Service Description",value:n.description,onChange:D=>i({...n,description:D.target.value}),className:"block w-full mb-4 p-2 border border-gray-300 rounded"}),E.jsx("input",{type:"file",onChange:D=>s(D.target.files?D.target.files[0]:null),className:"block w-full mb-4"}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-bold mb-2",children:"Custom Form Fields"}),a.map((D,A)=>E.jsxs("div",{className:"flex items-center mb-2",children:[E.jsx("input",{type:"text",placeholder:"Field Label",value:D.label,onChange:P=>b(A,"label",P.target.value),className:"block w-full p-2 border border-gray-300 rounded mr-2"}),E.jsxs("select",{value:D.type,onChange:P=>b(A,"type",P.target.value),className:"block w-1/4 p-2 border border-gray-300 rounded",children:[E.jsx("option",{value:"text",children:"Text"}),E.jsx("option",{value:"email",children:"Email"}),E.jsx("option",{value:"number",children:"Number"}),E.jsx("option",{value:"textarea",children:"Textarea"}),E.jsx("option",{value:"date",children:"Date"}),E.jsx("option",{value:"file",children:"File"})," "]}),E.jsx("button",{onClick:()=>k(A),className:"ml-2 bg-red-500 text-white p-2 rounded",children:"Remove"})]},A)),E.jsx("button",{onClick:C,className:"mt-4 bg-blue-500 text-white p-2 rounded",children:"Add Another Field"})]}),E.jsx("button",{onClick:g,className:"mt-6 bg-green-500 text-white p-3 rounded w-full",children:"Add Service"})]}),E.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[E.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Available Services"}),E.jsx("ul",{className:"space-y-4",children:t.map(D=>E.jsxs("li",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[E.jsxs("div",{className:"flex items-center",children:[E.jsx("img",{src:D.imageUrl,alt:D.title,className:"w-16 h-16 rounded mr-4"}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-xl font-bold",children:D.title}),E.jsx("p",{className:"text-gray-600",children:D.description})]})]}),E.jsx("button",{onClick:()=>w(D.id),className:"bg-red-500 text-white p-2 rounded",children:"Delete"})]},D.id))})]})]})},Bz=()=>{const[t,e]=$.useState([]),[n,i]=$.useState(!0),[r,s]=$.useState(null),[a,u]=$.useState(!1);$.useEffect(()=>{(async()=>{try{const w=(await gr(On(pt,"attendance"))).docs.map(C=>({id:C.id,...C.data()}));e(w)}catch(g){console.error("Error fetching attendance records:",g)}finally{i(!1)}})()},[]);const h=async()=>{if(t.length===0){alert("No records available for the raffle.");return}const _=Math.floor(Math.random()*t.length),g=t[_];try{await sl(On(pt,"raffleWinners"),{fullName:g.fullName,eventName:g.eventName,timestamp:new Date().toISOString()}),await $a(_r(pt,"attendance",g.id)),e(w=>w.filter(C=>C.id!==g.id)),s(g.fullName),u(!0)}catch(w){console.error("Error during the raffle process:",w),alert("Failed to complete the raffle process.")}},f=()=>{u(!1)};return n?E.jsx("p",{children:"Loading attendance records..."}):E.jsxs("div",{className:"p-6",children:[E.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"User Attendance Records"}),t.length>0?E.jsx("div",{className:"overflow-x-auto mb-8",children:E.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{className:"py-2 px-4 border-b",children:"Event Name"}),E.jsx("th",{className:"py-2 px-4 border-b",children:"Email"}),E.jsx("th",{className:"py-2 px-4 border-b",children:"Full Name"}),E.jsx("th",{className:"py-2 px-4 border-b",children:"Age"}),E.jsx("th",{className:"py-2 px-4 border-b",children:"Address"}),E.jsx("th",{className:"py-2 px-4 border-b",children:"Timestamp"})]})}),E.jsx("tbody",{children:t.map(_=>E.jsxs("tr",{children:[E.jsx("td",{className:"py-2 px-4 border-b",children:_.eventName}),E.jsx("td",{className:"py-2 px-4 border-b",children:_.email}),E.jsx("td",{className:"py-2 px-4 border-b",children:_.fullName}),E.jsx("td",{className:"py-2 px-4 border-b",children:_.age}),E.jsx("td",{className:"py-2 px-4 border-b",children:_.address}),E.jsx("td",{className:"py-2 px-4 border-b",children:new Date(_.timestamp).toLocaleString()})]},_.id))})]})}):E.jsx("p",{children:"No attendance records found."}),E.jsx("div",{className:"my-6",children:E.jsx("button",{onClick:h,className:"bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 transition duration-300",children:"Raffle a Winner"})}),a&&r&&E.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:E.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center",children:[E.jsx("h3",{className:"text-xl font-bold mb-4",children:" Raffle Winner "}),E.jsxs("p",{className:"text-lg",children:["Congratulations to ",E.jsxs("h1",{className:"font-bold text-5xl",children:[" ",r," !"]})]}),E.jsx("button",{onClick:f,className:"mt-4 bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition duration-300",children:"Close"})]})})]})},Wz=()=>{const[t,e]=$.useState([]),[n,i]=$.useState({}),[,r]=$.useState({}),[s,a]=$.useState(!1);$.useEffect(()=>{(async()=>{try{const w=(await gr(On(pt,"services"))).docs.reduce((C,b)=>{const k=b.data();return C[b.id]=k.title,C},{});i(w),a(!0)}catch(g){console.error("Error fetching services:",g)}})()},[]),$.useEffect(()=>{s&&(async()=>{try{const g=await gr(On(pt,"applications")),w=[];await Promise.all(g.docs.map(async C=>{const b=C.data(),k=b.serviceId;s&&((n[k]||"Unknown Service")==="Unknown Service"?await $a(C.ref):w.push({id:C.id,data:b}))})),e(w)}catch(g){console.error("Error fetching and filtering applications:",g)}})()},[s,n]);const u=(_,g,w)=>{r(C=>({...C,[_]:{...C[_],[g]:w}}))},h=async _=>{try{const g=_r(pt,"applications",_);await $v(g,{qualified:!0}),e(w=>w.map(C=>C.id===_?{...C,data:{...C.data,qualified:!0}}:C))}catch(g){console.error("Error marking as qualified:",g)}},f=async _=>{try{const g=_r(pt,"applications",_);await $a(g),e(w=>w.filter(C=>C.id!==_))}catch(g){console.error("Error marking as unqualified:",g)}};return E.jsxs("div",{className:"max-w-7xl mx-4 sm:mx-8 lg:mx-auto p-6 font-sans",children:[E.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Service Results"}),t.length>0?E.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map((_,g)=>{const w=_.data.serviceId,C=n[w]||"Unknown Service",b=_.data.qualified||!1;return E.jsxs("div",{className:`bg-white shadow-md rounded-lg p-6 ${g<4?"w-full":""}`,children:[E.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Service Title: ",C]}),E.jsx("div",{className:"space-y-4",children:Object.entries(_.data).filter(([k])=>k!=="qualified").sort(([k],[D])=>k.localeCompare(D)).map(([k,D],A)=>E.jsxs("div",{className:"mb-4",children:[E.jsx("label",{className:"block font-medium text-gray-600",children:k}),E.jsx("div",{className:"mt-1 text-gray-800",children:Hz(k,D,w,u)})]},A))}),E.jsx("div",{className:"mt-4",children:b?E.jsx("div",{className:"bg-green-500 text-white px-4 py-2 rounded-md text-center",children:"Qualified"}):E.jsxs("div",{children:[E.jsx("button",{className:"bg-blue-500 text-white px-4 py-2 rounded-md mr-2",onClick:()=>h(_.id),children:"Qualify"}),E.jsx("button",{className:"bg-red-500 text-white px-4 py-2 rounded-md",onClick:()=>f(_.id),children:"Unqualify"})]})})]},_.id)})}):E.jsx("p",{className:"text-gray-600",children:"No applications found."})]})},Hz=(t,e,n,i)=>typeof e=="string"?E.jsx("input",{type:"text",value:e,onChange:r=>i(n,t,r.target.value),className:"border border-gray-300 rounded px-3 py-2"}):typeof e=="number"?E.jsx("input",{type:"number",value:e,onChange:r=>i(n,t,parseFloat(r.target.value)),className:"border border-gray-300 rounded px-3 py-2"}):Array.isArray(e)?E.jsx("ul",{className:"list-disc list-inside",children:e.map((r,s)=>E.jsx("li",{children:E.jsx("input",{type:"text",value:r,onChange:a=>i(n,t,a.target.value),className:"border border-gray-300 rounded px-3 py-2"})},s))}):E.jsx("span",{children:"Unsupported type"}),$z=()=>E.jsxs("div",{children:[E.jsx(Uz,{}),E.jsx(jz,{}),E.jsx(zz,{}),E.jsx(Wz,{}),E.jsx(Bz,{}),E.jsx(Vz,{})]});function qz(){return E.jsx(rz,{children:E.jsxs(Fb,{children:[E.jsx(oz,{}),E.jsxs(Ob,{children:[E.jsx(Vs,{path:"/",element:E.jsx(wT,{})}),E.jsx(Vs,{path:"/service",element:E.jsx(ET,{})}),E.jsx(Vs,{path:"/newsletter",element:E.jsx(TT,{})}),E.jsx(Vs,{path:"/events",element:E.jsx(IT,{})}),E.jsx(Vs,{path:"/involvement",element:E.jsx(ST,{})}),E.jsx(Vs,{path:"/main",element:E.jsx($z,{})})]}),E.jsx("div",{id:"home",children:E.jsx(wT,{})}),E.jsx("div",{id:"service",children:E.jsx(ET,{})}),E.jsx("div",{id:"newsletter",children:E.jsx(TT,{})}),E.jsx("div",{id:"events",children:E.jsx(IT,{})}),E.jsx(ST,{}),E.jsx(vz,{})]})})}VS(document.getElementById("root")).render(E.jsx($.StrictMode,{children:E.jsx(qz,{})}));
